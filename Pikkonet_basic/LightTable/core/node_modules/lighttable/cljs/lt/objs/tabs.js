// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.tabs');
goog.require('cljs.core');
goog.require('lt.util.js');
goog.require('lt.util.style');
goog.require('lt.util.dom');
goog.require('crate.binding');
goog.require('lt.object');
goog.require('lt.objs.menu');
goog.require('lt.util.js');
goog.require('lt.util.dom');
goog.require('lt.objs.context');
goog.require('crate.core');
goog.require('lt.objs.context');
goog.require('lt.util.dom');
goog.require('lt.objs.animations');
goog.require('lt.objs.canvas');
goog.require('lt.objs.command');
goog.require('lt.objs.menu');
goog.require('lt.util.load');
goog.require('lt.objs.animations');
goog.require('crate.binding');
goog.require('lt.objs.editor');
goog.require('lt.objs.canvas');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.util.load');
goog.require('lt.util.style');
goog.require('lt.objs.editor');
goog.require('crate.core');
goog.require('lt.objs.command');
lt.util.load.js.call(null,"core/node_modules/lighttable/ui/dragdrop.js",new cljs.core.Keyword(null,"sync","sync",1017449997));
lt.objs.tabs.ensure_visible = (function ensure_visible(idx,tabset){var temp__4092__auto__ = (lt.util.dom.$$.call(null,".list li",lt.object.__GT_content.call(null,tabset))[idx]);if(cljs.core.truth_(temp__4092__auto__))
{var cur = temp__4092__auto__;var left = cur.offsetLeft;var width = cur.clientWidth;var right = (left + width);var gp = lt.util.dom.parent.call(null,lt.util.dom.parent.call(null,cur));var pwidth = gp.clientWidth;var pleft = gp.scrollLeft;var pright = (pleft + pwidth);var inside = ((left >= pleft)) && ((right <= pright));if(inside)
{return null;
} else
{if((pleft > left))
{return gp.scrollLeft = (left - 50);
} else
{return gp.scrollLeft = ((right - pwidth) + 50);
}
}
} else
{return null;
}
});
lt.objs.tabs.__BEH__on_destroy_remove = (function __BEH__on_destroy_remove(this$){return lt.objs.tabs.rem_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","on-destroy-remove","lt.objs.tabs/on-destroy-remove",1369860715),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__on_destroy_remove,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"destroy","destroy",2571277164),null,new cljs.core.Keyword(null,"closed","closed",3951351006),null], null), null));
lt.objs.tabs.__BEH__active_tab_num = (function __BEH__active_tab_num(this$,num){var objs = cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"objs","objs",1017308622));if((num < cljs.core.count.call(null,objs)))
{return lt.objs.tabs.active_BANG_.call(null,cljs.core.get.call(null,objs,num));
} else
{return lt.objs.tabs.active_BANG_.call(null,cljs.core.get.call(null,objs,(cljs.core.count.call(null,objs) - 1)));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","active-tab-num","lt.objs.tabs/active-tab-num",3859758153),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__active_tab_num,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tab","tab",1014018823),null], null), null));
lt.objs.tabs.__BEH__prev_tab = (function __BEH__prev_tab(this$){var objs = cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"objs","objs",1017308622));var idx = lt.objs.tabs.__GT_index.call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));if((idx > 0))
{return lt.objs.tabs.active_BANG_.call(null,cljs.core.get.call(null,objs,(idx - 1)));
} else
{return lt.objs.tabs.active_BANG_.call(null,cljs.core.get.call(null,objs,(cljs.core.count.call(null,objs) - 1)));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","prev-tab","lt.objs.tabs/prev-tab",3503997629),new cljs.core.Keyword(null,"throttle","throttle",2497347228),100,new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__prev_tab,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tab.prev","tab.prev",4356539486),null], null), null));
lt.objs.tabs.__BEH__next_tab = (function __BEH__next_tab(this$){var objs = cljs.core.deref.call(null,this$).call(null,new cljs.core.Keyword(null,"objs","objs",1017308622));var idx = (lt.objs.tabs.__GT_index.call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))) + 1);if((idx < cljs.core.count.call(null,objs)))
{return lt.objs.tabs.active_BANG_.call(null,cljs.core.get.call(null,objs,idx));
} else
{return lt.objs.tabs.active_BANG_.call(null,cljs.core.get.call(null,objs,0));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","next-tab","lt.objs.tabs/next-tab",4026023933),new cljs.core.Keyword(null,"throttle","throttle",2497347228),100,new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__next_tab,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tab.next","tab.next",4356467998),null], null), null));
lt.objs.tabs.__BEH__tab_close = (function __BEH__tab_close(this$){try{var orig = new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));return lt.object.raise.call(null,orig,new cljs.core.Keyword(null,"close","close",1108660586));
}catch (e17705){if((e17705 instanceof Error))
{var e = e17705;return lt.objs.console.error(e);
} else
{if((e17705 instanceof global.Error))
{var e = e17705;return lt.objs.console.error(e);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e17705;
} else
{return null;
}
}
}
}});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","tab-close","lt.objs.tabs/tab-close",921329682),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__tab_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tab.close","tab.close",1544206801),null], null), null));
lt.objs.tabs.__GT_index = (function __GT_index(obj){if(cljs.core.truth_((function (){var and__3396__auto__ = obj;if(cljs.core.truth_(and__3396__auto__))
{var and__3396__auto____$1 = cljs.core.deref.call(null,obj);if(cljs.core.truth_(and__3396__auto____$1))
{return new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj));
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{return cljs.core.first.call(null,cljs.core.first.call(null,cljs.core.filter.call(null,(function (p1__17706_SHARP_){return cljs.core._EQ_.call(null,obj,cljs.core.second.call(null,p1__17706_SHARP_));
}),cljs.core.map_indexed.call(null,cljs.core.vector,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj))))))));
} else
{return null;
}
});
lt.objs.tabs.__GT_name = (function __GT_name(e){var or__3408__auto__ = new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"info","info",1017141280).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,e)));if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{var or__3408__auto____$1 = cljs.core.deref.call(null,e).call(null,new cljs.core.Keyword(null,"name","name",1017277949));if(cljs.core.truth_(or__3408__auto____$1))
{return or__3408__auto____$1;
} else
{return "unknown";
}
}
});
lt.objs.tabs.__GT_path = (function __GT_path(e){var or__3408__auto__ = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"info","info",1017141280).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,e)));if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{var or__3408__auto____$1 = cljs.core.deref.call(null,e).call(null,new cljs.core.Keyword(null,"path","path",1017337751));if(cljs.core.truth_(or__3408__auto____$1))
{return or__3408__auto____$1;
} else
{return "";
}
}
});
lt.objs.tabs.active_QMARK_ = (function active_QMARK_(c,e,multi){return [cljs.core.str(c),cljs.core.str(((cljs.core._EQ_.call(null,cljs.core.deref.call(null,multi).call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826)),e))?" active":null))].join('');
});
lt.objs.tabs.dirty_QMARK_ = (function dirty_QMARK_(c,e){return [cljs.core.str(c),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"dirty","dirty",1109497668).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,e)))?" dirty":null))].join('');
});
lt.objs.tabs.close_tab = (function close_tab(obj){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.tab-close","span.tab-close",4094760846),"x"], null));var seq__17713_17719 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"close","close",1108660586));
})], null)));var chunk__17714_17720 = null;var count__17715_17721 = 0;var i__17716_17722 = 0;while(true){
if((i__17716_17722 < count__17715_17721))
{var vec__17717_17723 = cljs.core._nth.call(null,chunk__17714_17720,i__17716_17722);var ev__4336__auto___17724 = cljs.core.nth.call(null,vec__17717_17723,0,null);var func__4337__auto___17725 = cljs.core.nth.call(null,vec__17717_17723,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17724,func__4337__auto___17725);
{
var G__17726 = seq__17713_17719;
var G__17727 = chunk__17714_17720;
var G__17728 = count__17715_17721;
var G__17729 = (i__17716_17722 + 1);
seq__17713_17719 = G__17726;
chunk__17714_17720 = G__17727;
count__17715_17721 = G__17728;
i__17716_17722 = G__17729;
continue;
}
} else
{var temp__4092__auto___17730 = cljs.core.seq.call(null,seq__17713_17719);if(temp__4092__auto___17730)
{var seq__17713_17731__$1 = temp__4092__auto___17730;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17713_17731__$1))
{var c__4150__auto___17732 = cljs.core.chunk_first.call(null,seq__17713_17731__$1);{
var G__17733 = cljs.core.chunk_rest.call(null,seq__17713_17731__$1);
var G__17734 = c__4150__auto___17732;
var G__17735 = cljs.core.count.call(null,c__4150__auto___17732);
var G__17736 = 0;
seq__17713_17719 = G__17733;
chunk__17714_17720 = G__17734;
count__17715_17721 = G__17735;
i__17716_17722 = G__17736;
continue;
}
} else
{var vec__17718_17737 = cljs.core.first.call(null,seq__17713_17731__$1);var ev__4336__auto___17738 = cljs.core.nth.call(null,vec__17718_17737,0,null);var func__4337__auto___17739 = cljs.core.nth.call(null,vec__17718_17737,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17738,func__4337__auto___17739);
{
var G__17740 = cljs.core.next.call(null,seq__17713_17731__$1);
var G__17741 = null;
var G__17742 = 0;
var G__17743 = 0;
seq__17713_17719 = G__17740;
chunk__17714_17720 = G__17741;
count__17715_17721 = G__17742;
i__17716_17722 = G__17743;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.tabs.item = (function item(multi,e,pos){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"class","class",1108647146),lt.objs.tabs.dirty_QMARK_.call(null,lt.objs.tabs.active_QMARK_.call(null," ",e,multi),e),new cljs.core.Keyword(null,"draggable","draggable",709423359),"true",new cljs.core.Keyword(null,"title","title",1124275658),lt.objs.tabs.__GT_path.call(null,e),new cljs.core.Keyword(null,"obj-id","obj-id",4285449507),lt.object.__GT_id.call(null,e),new cljs.core.Keyword(null,"pos","pos",1014015430),pos], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.file-name","span.file-name",2230443530),lt.objs.tabs.__GT_name.call(null,e)], null),lt.objs.tabs.close_tab.call(null,e)], null));var seq__17750_17756 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (ev){if(cljs.core.truth_((function (){var or__3408__auto__ = cljs.core._EQ_.call(null,1,ev.button);if(or__3408__auto__)
{return or__3408__auto__;
} else
{return ev.metaKey;
}
})()))
{return lt.object.raise.call(null,e,new cljs.core.Keyword(null,"close","close",1108660586));
} else
{return lt.objs.tabs.active_BANG_.call(null,e);
}
}),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (ev){lt.objs.tabs.menu_BANG_.call(null,e,ev);
lt.util.dom.prevent.call(null,ev);
return lt.util.dom.stop_propagation.call(null,ev);
})], null)));var chunk__17751_17757 = null;var count__17752_17758 = 0;var i__17753_17759 = 0;while(true){
if((i__17753_17759 < count__17752_17758))
{var vec__17754_17760 = cljs.core._nth.call(null,chunk__17751_17757,i__17753_17759);var ev__4336__auto___17761 = cljs.core.nth.call(null,vec__17754_17760,0,null);var func__4337__auto___17762 = cljs.core.nth.call(null,vec__17754_17760,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17761,func__4337__auto___17762);
{
var G__17763 = seq__17750_17756;
var G__17764 = chunk__17751_17757;
var G__17765 = count__17752_17758;
var G__17766 = (i__17753_17759 + 1);
seq__17750_17756 = G__17763;
chunk__17751_17757 = G__17764;
count__17752_17758 = G__17765;
i__17753_17759 = G__17766;
continue;
}
} else
{var temp__4092__auto___17767 = cljs.core.seq.call(null,seq__17750_17756);if(temp__4092__auto___17767)
{var seq__17750_17768__$1 = temp__4092__auto___17767;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17750_17768__$1))
{var c__4150__auto___17769 = cljs.core.chunk_first.call(null,seq__17750_17768__$1);{
var G__17770 = cljs.core.chunk_rest.call(null,seq__17750_17768__$1);
var G__17771 = c__4150__auto___17769;
var G__17772 = cljs.core.count.call(null,c__4150__auto___17769);
var G__17773 = 0;
seq__17750_17756 = G__17770;
chunk__17751_17757 = G__17771;
count__17752_17758 = G__17772;
i__17753_17759 = G__17773;
continue;
}
} else
{var vec__17755_17774 = cljs.core.first.call(null,seq__17750_17768__$1);var ev__4336__auto___17775 = cljs.core.nth.call(null,vec__17755_17774,0,null);var func__4337__auto___17776 = cljs.core.nth.call(null,vec__17755_17774,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17775,func__4337__auto___17776);
{
var G__17777 = cljs.core.next.call(null,seq__17750_17768__$1);
var G__17778 = null;
var G__17779 = 0;
var G__17780 = 0;
seq__17750_17756 = G__17777;
chunk__17751_17757 = G__17778;
count__17752_17758 = G__17779;
i__17753_17759 = G__17780;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.tabs.update_tab_order = (function update_tab_order(multi,children){var ser = ((cljs.core.vector_QMARK_.call(null,children))?children:cljs.core.map.call(null,(function (p1__17781_SHARP_){return lt.util.dom.attr.call(null,p1__17781_SHARP_,new cljs.core.Keyword(null,"pos","pos",1014015430));
}),children));var prev_active = new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,multi));lt.object.merge_BANG_.call(null,multi,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"objs","objs",1017308622),cljs.core.mapv.call(null,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,multi)),ser),new cljs.core.Keyword(null,"active-obj","active-obj",3056705826),null], null));
return lt.objs.tabs.active_BANG_.call(null,prev_active);
});
lt.objs.tabs.move_tab = (function move_tab(multi,elem){var id = lt.util.dom.attr.call(null,elem,new cljs.core.Keyword(null,"obj-id","obj-id",4285449507));var idx = lt.util.dom.index.call(null,elem);var obj = lt.object.by_id.call(null,parseInt(id));var cnt = cljs.core.count.call(null,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,multi)));lt.objs.tabs.rem_BANG_.call(null,obj);
lt.objs.tabs.add_BANG_.call(null,obj,multi);
if((cnt > 0))
{lt.objs.tabs.update_tab_order.call(null,multi,cljs.core.vec.call(null,cljs.core.concat.call(null,cljs.core.range.call(null,idx),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cnt], null),cljs.core.range.call(null,idx,cnt))));
} else
{}
return lt.objs.tabs.active_BANG_.call(null,obj);
});
lt.objs.tabs.objs_list = (function objs_list(multi,objs){var item = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),(function (){var iter__4119__auto__ = (function iter__17792(s__17793){return (new cljs.core.LazySeq(null,(function (){var s__17793__$1 = s__17793;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__17793__$1);if(temp__4092__auto__)
{var s__17793__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__17793__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__17793__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__17795 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__17794 = 0;while(true){
if((i__17794 < size__4118__auto__))
{var vec__17798 = cljs.core._nth.call(null,c__4117__auto__,i__17794);var idx = cljs.core.nth.call(null,vec__17798,0,null);var o = cljs.core.nth.call(null,vec__17798,1,null);if(cljs.core.truth_(cljs.core.deref.call(null,o)))
{cljs.core.chunk_append.call(null,b__17795,lt.objs.tabs.item.call(null,multi,o,idx));
{
var G__17802 = (i__17794 + 1);
i__17794 = G__17802;
continue;
}
} else
{{
var G__17803 = (i__17794 + 1);
i__17794 = G__17803;
continue;
}
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__17795),iter__17792.call(null,cljs.core.chunk_rest.call(null,s__17793__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__17795),null);
}
} else
{var vec__17799 = cljs.core.first.call(null,s__17793__$2);var idx = cljs.core.nth.call(null,vec__17799,0,null);var o = cljs.core.nth.call(null,vec__17799,1,null);if(cljs.core.truth_(cljs.core.deref.call(null,o)))
{return cljs.core.cons.call(null,lt.objs.tabs.item.call(null,multi,o,idx),iter__17792.call(null,cljs.core.rest.call(null,s__17793__$2)));
} else
{{
var G__17804 = cljs.core.rest.call(null,s__17793__$2);
s__17793__$1 = G__17804;
continue;
}
}
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.map.call(null,cljs.core.vector,cljs.core.range.call(null),objs));
})()], null));sortable(item,(function (){var obj17801 = {"axis":"x","distance":10,"scroll":false,"opacity":0.9,"connectWith":".list"};return obj17801;
})());
lt.util.dom.on.call(null,item,"contextmenu",(function (e){lt.object.raise.call(null,multi,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}));
lt.util.dom.on.call(null,item,"moved",(function (e){return lt.objs.tabs.move_tab.call(null,multi,e.opts);
}));
lt.util.dom.on.call(null,item,"sortupdate",(function (e){return lt.objs.tabs.update_tab_order.call(null,multi,e.opts);
}));
return item;
});
lt.objs.tabs.__BEH__on_destroy_objs = (function __BEH__on_destroy_objs(this$){var seq__17809 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));var chunk__17810 = null;var count__17811 = 0;var i__17812 = 0;while(true){
if((i__17812 < count__17811))
{var e = cljs.core._nth.call(null,chunk__17810,i__17812);lt.object.destroy_BANG_.call(null,e);
{
var G__17813 = seq__17809;
var G__17814 = chunk__17810;
var G__17815 = count__17811;
var G__17816 = (i__17812 + 1);
seq__17809 = G__17813;
chunk__17810 = G__17814;
count__17811 = G__17815;
i__17812 = G__17816;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__17809);if(temp__4092__auto__)
{var seq__17809__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17809__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__17809__$1);{
var G__17817 = cljs.core.chunk_rest.call(null,seq__17809__$1);
var G__17818 = c__4150__auto__;
var G__17819 = cljs.core.count.call(null,c__4150__auto__);
var G__17820 = 0;
seq__17809 = G__17817;
chunk__17810 = G__17818;
count__17811 = G__17819;
i__17812 = G__17820;
continue;
}
} else
{var e = cljs.core.first.call(null,seq__17809__$1);lt.object.destroy_BANG_.call(null,e);
{
var G__17821 = cljs.core.next.call(null,seq__17809__$1);
var G__17822 = null;
var G__17823 = 0;
var G__17824 = 0;
seq__17809 = G__17821;
chunk__17810 = G__17822;
count__17811 = G__17823;
i__17812 = G__17824;
continue;
}
}
} else
{return null;
}
}
break;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","on-destroy-objs","lt.objs.tabs/on-destroy-objs",2776869971),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__on_destroy_objs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"destroy","destroy",2571277164),null], null), null));
lt.objs.tabs.__BEH__repaint_tab_updated = (function __BEH__repaint_tab_updated(this$){return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"count","count",1108755585)], null),cljs.core.inc);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","repaint-tab-updated","lt.objs.tabs/repaint-tab-updated",1521843223),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__repaint_tab_updated,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tab.updated","tab.updated",2727558868),null], null), null));
lt.objs.tabs.tabbed_item = (function tabbed_item(active,item){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.content","div.content",3533478798),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",1123684643),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",2685668404),crate.binding.bound.call(null,active,(function (p1__17825_SHARP_){if(cljs.core._EQ_.call(null,p1__17825_SHARP_,cljs.core.deref.call(null,item)))
{return "";
} else
{return "none";
}
}))], null)], null),crate.binding.bound.call(null,item,(function (p1__17826_SHARP_){if(cljs.core.truth_(p1__17826_SHARP_))
{return lt.object.__GT_content.call(null,p1__17826_SHARP_);
} else
{return null;
}
}))], null));var seq__17833_17839 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__17834_17840 = null;var count__17835_17841 = 0;var i__17836_17842 = 0;while(true){
if((i__17836_17842 < count__17835_17841))
{var vec__17837_17843 = cljs.core._nth.call(null,chunk__17834_17840,i__17836_17842);var ev__4336__auto___17844 = cljs.core.nth.call(null,vec__17837_17843,0,null);var func__4337__auto___17845 = cljs.core.nth.call(null,vec__17837_17843,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17844,func__4337__auto___17845);
{
var G__17846 = seq__17833_17839;
var G__17847 = chunk__17834_17840;
var G__17848 = count__17835_17841;
var G__17849 = (i__17836_17842 + 1);
seq__17833_17839 = G__17846;
chunk__17834_17840 = G__17847;
count__17835_17841 = G__17848;
i__17836_17842 = G__17849;
continue;
}
} else
{var temp__4092__auto___17850 = cljs.core.seq.call(null,seq__17833_17839);if(temp__4092__auto___17850)
{var seq__17833_17851__$1 = temp__4092__auto___17850;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17833_17851__$1))
{var c__4150__auto___17852 = cljs.core.chunk_first.call(null,seq__17833_17851__$1);{
var G__17853 = cljs.core.chunk_rest.call(null,seq__17833_17851__$1);
var G__17854 = c__4150__auto___17852;
var G__17855 = cljs.core.count.call(null,c__4150__auto___17852);
var G__17856 = 0;
seq__17833_17839 = G__17853;
chunk__17834_17840 = G__17854;
count__17835_17841 = G__17855;
i__17836_17842 = G__17856;
continue;
}
} else
{var vec__17838_17857 = cljs.core.first.call(null,seq__17833_17851__$1);var ev__4336__auto___17858 = cljs.core.nth.call(null,vec__17838_17857,0,null);var func__4337__auto___17859 = cljs.core.nth.call(null,vec__17838_17857,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17858,func__4337__auto___17859);
{
var G__17860 = cljs.core.next.call(null,seq__17833_17851__$1);
var G__17861 = null;
var G__17862 = 0;
var G__17863 = 0;
seq__17833_17839 = G__17860;
chunk__17834_17840 = G__17861;
count__17835_17841 = G__17862;
i__17836_17842 = G__17863;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.tabs.vertical_grip = (function vertical_grip(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.vertical-grip","div.vertical-grip",4287455262),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"draggable","draggable",709423359),"true"], null)], null));var seq__17870_17876 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dragstart","dragstart",721070880),(function (e){e.dataTransfer.dropEffect = "move";
e.dataTransfer.setData("text/plain",null);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-drag","start-drag",3689081649),e);
}),new cljs.core.Keyword(null,"dragend","dragend",2926432921),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"end-drag","end-drag",2692811352),e);
}),new cljs.core.Keyword(null,"drag","drag",1016996006),(function (e){e.dataTransfer.dropEffect = "move";
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"width!","width!",4520836749),e);
})], null)));var chunk__17871_17877 = null;var count__17872_17878 = 0;var i__17873_17879 = 0;while(true){
if((i__17873_17879 < count__17872_17878))
{var vec__17874_17880 = cljs.core._nth.call(null,chunk__17871_17877,i__17873_17879);var ev__4336__auto___17881 = cljs.core.nth.call(null,vec__17874_17880,0,null);var func__4337__auto___17882 = cljs.core.nth.call(null,vec__17874_17880,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17881,func__4337__auto___17882);
{
var G__17883 = seq__17870_17876;
var G__17884 = chunk__17871_17877;
var G__17885 = count__17872_17878;
var G__17886 = (i__17873_17879 + 1);
seq__17870_17876 = G__17883;
chunk__17871_17877 = G__17884;
count__17872_17878 = G__17885;
i__17873_17879 = G__17886;
continue;
}
} else
{var temp__4092__auto___17887 = cljs.core.seq.call(null,seq__17870_17876);if(temp__4092__auto___17887)
{var seq__17870_17888__$1 = temp__4092__auto___17887;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17870_17888__$1))
{var c__4150__auto___17889 = cljs.core.chunk_first.call(null,seq__17870_17888__$1);{
var G__17890 = cljs.core.chunk_rest.call(null,seq__17870_17888__$1);
var G__17891 = c__4150__auto___17889;
var G__17892 = cljs.core.count.call(null,c__4150__auto___17889);
var G__17893 = 0;
seq__17870_17876 = G__17890;
chunk__17871_17877 = G__17891;
count__17872_17878 = G__17892;
i__17873_17879 = G__17893;
continue;
}
} else
{var vec__17875_17894 = cljs.core.first.call(null,seq__17870_17888__$1);var ev__4336__auto___17895 = cljs.core.nth.call(null,vec__17875_17894,0,null);var func__4337__auto___17896 = cljs.core.nth.call(null,vec__17875_17894,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17895,func__4337__auto___17896);
{
var G__17897 = cljs.core.next.call(null,seq__17870_17888__$1);
var G__17898 = null;
var G__17899 = 0;
var G__17900 = 0;
seq__17870_17876 = G__17897;
chunk__17871_17877 = G__17898;
count__17872_17878 = G__17899;
i__17873_17879 = G__17900;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.tabs.__GT_perc = (function __GT_perc(x){if(cljs.core.truth_(x))
{return [cljs.core.str(x),cljs.core.str("%")].join('');
} else
{return "0";
}
});
lt.objs.tabs.floored = (function floored(x){if((x < 0))
{return 0;
} else
{if((x > 100))
{return 100;
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{return x;
} else
{return null;
}
}
}
});
lt.objs.tabs.to_perc = (function to_perc(width,x){return ((x / width) * 100);
});
lt.objs.tabs.next_tabset = (function next_tabset(t){var ts = cljs.core.deref.call(null,lt.objs.tabs.multi).call(null,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576));return cljs.core.second.call(null,cljs.core.drop_while.call(null,(function (p1__17901_SHARP_){return cljs.core.not_EQ_.call(null,t,p1__17901_SHARP_);
}),ts));
});
lt.objs.tabs.prev_tabset = (function prev_tabset(t){var ts = cljs.core.deref.call(null,lt.objs.tabs.multi).call(null,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576));return cljs.core.last.call(null,cljs.core.take_while.call(null,(function (p1__17902_SHARP_){return cljs.core.not_EQ_.call(null,t,p1__17902_SHARP_);
}),ts));
});
lt.objs.tabs.previous_tabset_width = (function previous_tabset_width(cur){var ts = cljs.core.deref.call(null,lt.objs.tabs.multi).call(null,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576));return cljs.core.reduce.call(null,cljs.core._PLUS_,0,cljs.core.map.call(null,cljs.core.comp.call(null,new cljs.core.Keyword(null,"width","width",1127031096),cljs.core.deref),cljs.core.take_while.call(null,(function (p1__17903_SHARP_){return cljs.core.not_EQ_.call(null,cur,p1__17903_SHARP_);
}),ts)));
});
lt.objs.tabs.spawn_tabset = (function spawn_tabset(){var ts = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779));var width = (100 - cljs.core.reduce.call(null,cljs.core._PLUS_,cljs.core.map.call(null,cljs.core.comp.call(null,new cljs.core.Keyword(null,"width","width",1127031096),cljs.core.deref),cljs.core.deref.call(null,lt.objs.tabs.multi).call(null,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576)))));lt.object.merge_BANG_.call(null,ts,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),width], null));
lt.objs.tabs.add_tabset.call(null,ts);
return ts;
});
lt.objs.tabs.equalize_tabset_widths = (function equalize_tabset_widths(){var tss = new cljs.core.Keyword(null,"tabsets","tabsets",3756175576).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi));var width = (100.0 / cljs.core.count.call(null,tss));var seq__17908 = cljs.core.seq.call(null,tss);var chunk__17909 = null;var count__17910 = 0;var i__17911 = 0;while(true){
if((i__17911 < count__17910))
{var ts = cljs.core._nth.call(null,chunk__17909,i__17911);lt.object.merge_BANG_.call(null,ts,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),width], null));
{
var G__17912 = seq__17908;
var G__17913 = chunk__17909;
var G__17914 = count__17910;
var G__17915 = (i__17911 + 1);
seq__17908 = G__17912;
chunk__17909 = G__17913;
count__17910 = G__17914;
i__17911 = G__17915;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__17908);if(temp__4092__auto__)
{var seq__17908__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17908__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__17908__$1);{
var G__17916 = cljs.core.chunk_rest.call(null,seq__17908__$1);
var G__17917 = c__4150__auto__;
var G__17918 = cljs.core.count.call(null,c__4150__auto__);
var G__17919 = 0;
seq__17908 = G__17916;
chunk__17909 = G__17917;
count__17910 = G__17918;
i__17911 = G__17919;
continue;
}
} else
{var ts = cljs.core.first.call(null,seq__17908__$1);lt.object.merge_BANG_.call(null,ts,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),width], null));
{
var G__17920 = cljs.core.next.call(null,seq__17908__$1);
var G__17921 = null;
var G__17922 = 0;
var G__17923 = 0;
seq__17908 = G__17920;
chunk__17909 = G__17921;
count__17910 = G__17922;
i__17911 = G__17923;
continue;
}
}
} else
{return null;
}
}
break;
}
});
lt.objs.tabs.__BEH__no_anim_on_drag = (function __BEH__no_anim_on_drag(this$){return lt.objs.animations.off.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","no-anim-on-drag","lt.objs.tabs/no-anim-on-drag",2746913928),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__no_anim_on_drag,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"start-drag","start-drag",3689081649),null], null), null));
lt.objs.tabs.__BEH__reanim_on_drop = (function __BEH__reanim_on_drop(this$){return lt.objs.animations.on.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","reanim-on-drop","lt.objs.tabs/reanim-on-drop",2109600678),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__reanim_on_drop,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"end-drag","end-drag",2692811352),null], null), null));
lt.objs.tabs.__BEH__set_dragging = (function __BEH__set_dragging(this$){return lt.util.dom.add_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"dragging","dragging",4467773633));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","set-dragging","lt.objs.tabs/set-dragging",3265197408),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__set_dragging,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"start-drag","start-drag",3689081649),null], null), null));
lt.objs.tabs.__BEH__unset_dragging = (function __BEH__unset_dragging(this$){return lt.util.dom.remove_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"dragging","dragging",4467773633));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","unset-dragging","lt.objs.tabs/unset-dragging",4764787269),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__unset_dragging,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"end-drag","end-drag",2692811352),null], null), null));
lt.objs.tabs.__BEH__set_width_final_BANG_ = (function __BEH__set_width_final_BANG_(this$,e){var temp__4092__auto__ = lt.objs.tabs.next_tabset.call(null,this$);if(cljs.core.truth_(temp__4092__auto__))
{var ts = temp__4092__auto__;var width = lt.util.dom.width.call(null,lt.object.__GT_content.call(null,lt.objs.tabs.multi));var left = new cljs.core.Keyword(null,"left","left",1017222009).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi));var cx = e.clientX;var new_loc = ((width + left) - cx);var new_perc = lt.objs.tabs.floored.call(null,(((100 - lt.objs.tabs.previous_tabset_width.call(null,this$)) - lt.objs.tabs.to_perc.call(null,width,new_loc)) | 0));var prev_width = new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var new_perc__$1 = (((new_perc >= (new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts)) + prev_width)))?(new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts)) + prev_width):new_perc);var next_width = lt.objs.tabs.floored.call(null,((cljs.core.not.call(null,ts))?1:(new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts)) + (prev_width - new_perc__$1))));if(cljs.core._EQ_.call(null,new_perc__$1,0))
{return lt.objs.tabs.rem_tabset.call(null,this$);
} else
{if(cljs.core._EQ_.call(null,next_width,0))
{return lt.objs.tabs.rem_tabset.call(null,ts,new cljs.core.Keyword(null,"prev","prev",1017353637));
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{if(cljs.core._EQ_.call(null,cx,0))
{return null;
} else
{if((new_perc__$1 < 0))
{return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),100], null));
} else
{if(cljs.core.truth_((function (){var and__3396__auto__ = cljs.core.not_EQ_.call(null,cx,0);if(and__3396__auto__)
{var and__3396__auto____$1 = ts;if(cljs.core.truth_(and__3396__auto____$1))
{return ((new_perc__$1 >= 0)) && ((next_width >= 0));
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),new_perc__$1], null));
if(cljs.core.truth_(ts))
{return lt.object.merge_BANG_.call(null,ts,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),next_width], null));
} else
{return lt.objs.tabs.spawn_tabset.call(null);
}
} else
{return null;
}
}
}
} else
{return null;
}
}
}
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","set-width-final!","lt.objs.tabs/set-width-final!",4331804915),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__set_width_final_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"end-drag","end-drag",2692811352),null], null), null));
lt.objs.tabs.temp_width = (function temp_width(ts,w){return lt.util.dom.css.call(null,lt.object.__GT_content.call(null,ts),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"width","width",1127031096),lt.objs.tabs.__GT_perc.call(null,w),new cljs.core.Keyword(null,"border-width","border-width",1324275799),((cljs.core._EQ_.call(null,0,w))?0:"")], null));
});
lt.objs.tabs.__BEH__width_BANG_ = (function __BEH__width_BANG_(this$,e){var width_17924 = lt.util.dom.width.call(null,lt.object.__GT_content.call(null,lt.objs.tabs.multi));var left_17925 = new cljs.core.Keyword(null,"left","left",1017222009).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi));var cx_17926 = e.clientX;var new_loc_17927 = ((width_17924 + left_17925) - cx_17926);var new_perc_17928 = lt.objs.tabs.floored.call(null,(((100 - lt.objs.tabs.previous_tabset_width.call(null,this$)) - lt.objs.tabs.to_perc.call(null,width_17924,new_loc_17927)) | 0));var prev_width_17929 = new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var ts_17930 = lt.objs.tabs.next_tabset.call(null,this$);var new_perc_17931__$1 = (cljs.core.truth_((function (){var and__3396__auto__ = ts_17930;if(cljs.core.truth_(and__3396__auto__))
{return (new_perc_17928 >= (new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts_17930)) + prev_width_17929));
} else
{return and__3396__auto__;
}
})())?(new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts_17930)) + prev_width_17929):new_perc_17928);var next_width_17932 = lt.objs.tabs.floored.call(null,((cljs.core.not.call(null,ts_17930))?1:(new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts_17930)) + (prev_width_17929 - new_perc_17931__$1))));if(cljs.core._EQ_.call(null,cx_17926,0))
{} else
{if((new_perc_17931__$1 < 0))
{lt.objs.tabs.temp_width.call(null,this$,100);
} else
{if(cljs.core.truth_((function (){var and__3396__auto__ = cljs.core.not_EQ_.call(null,cx_17926,0);if(and__3396__auto__)
{var and__3396__auto____$1 = ts_17930;if(cljs.core.truth_(and__3396__auto____$1))
{return ((new_perc_17931__$1 >= 0)) && ((next_width_17932 >= 0));
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{lt.objs.tabs.temp_width.call(null,this$,new_perc_17931__$1);
if(cljs.core.truth_(ts_17930))
{lt.objs.tabs.temp_width.call(null,ts_17930,next_width_17932);
} else
{lt.objs.tabs.spawn_tabset.call(null);
}
} else
{}
}
}
return lt.objs.tabs.start = lt.util.js.now.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","width!","lt.objs.tabs/width!",1942600349),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__width_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width!","width!",4520836749),null], null), null));
lt.objs.tabs.activate_tabset = (function activate_tabset(ts){if(cljs.core._EQ_.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)),ts))
{return null;
} else
{var temp__4092__auto___17933 = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));if(cljs.core.truth_(temp__4092__auto___17933))
{var old_17934 = temp__4092__auto___17933;lt.util.dom.remove_class.call(null,lt.object.__GT_content.call(null,old_17934),new cljs.core.Keyword(null,"active","active",3885920888));
} else
{}
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575),ts);
lt.util.dom.add_class.call(null,lt.object.__GT_content.call(null,ts),new cljs.core.Keyword(null,"active","active",3885920888));
return true;
}
});
lt.objs.tabs.__BEH__tab_active = (function __BEH__tab_active(this$){return lt.objs.tabs.activate_tabset.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","tab-active","lt.objs.tabs/tab-active",3117606804),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__tab_active,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",3885920888),null], null), null));
lt.objs.tabs.__BEH__tabset_active = (function __BEH__tabset_active(this$){if(cljs.core.truth_(lt.objs.tabs.activate_tabset.call(null,this$)))
{var temp__4092__auto__ = new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));if(cljs.core.truth_(temp__4092__auto__))
{var active = temp__4092__auto__;return lt.object.raise.call(null,active,new cljs.core.Keyword(null,"focus!","focus!",4039653819));
} else
{return null;
}
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset-active","lt.objs.tabs/tabset-active",1106535340),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__tabset_active,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",3885920888),null], null), null));
lt.objs.tabs.__BEH__tabset_menu = (function __BEH__tabset_menu(this$,ev){return lt.objs.menu.show_menu.call(null,lt.objs.menu.menu.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"New tabset",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"tabset.new","tabset.new",1444331601));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Close tabset",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.tabs.rem_tabset.call(null,this$);
})], null)], null)),ev.clientX,ev.clientY);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset-menu","lt.objs.tabs/tabset-menu",965576017),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__tabset_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu!","menu!",1117686292),null], null), null));
lt.objs.tabs.tabset_ui = (function tabset_ui(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tabset","div.tabset",2815514652),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",1123684643),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"width","width",1127031096)),lt.objs.tabs.__GT_perc)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.list","div.list",1323928397),crate.binding.bound.call(null,this$,(function (p1__17935_SHARP_){return lt.objs.tabs.objs_list.call(null,this$,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(p1__17935_SHARP_));
}))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.items","div.items",2032262037),crate.binding.map_bound.call(null,cljs.core.partial.call(null,lt.objs.tabs.tabbed_item,crate.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826))),this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"objs","objs",1017308622)], null)], null))], null),lt.objs.tabs.vertical_grip.call(null,this$)], null));var seq__17942_17948 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"active","active",3885920888));
})], null)));var chunk__17943_17949 = null;var count__17944_17950 = 0;var i__17945_17951 = 0;while(true){
if((i__17945_17951 < count__17944_17950))
{var vec__17946_17952 = cljs.core._nth.call(null,chunk__17943_17949,i__17945_17951);var ev__4336__auto___17953 = cljs.core.nth.call(null,vec__17946_17952,0,null);var func__4337__auto___17954 = cljs.core.nth.call(null,vec__17946_17952,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17953,func__4337__auto___17954);
{
var G__17955 = seq__17942_17948;
var G__17956 = chunk__17943_17949;
var G__17957 = count__17944_17950;
var G__17958 = (i__17945_17951 + 1);
seq__17942_17948 = G__17955;
chunk__17943_17949 = G__17956;
count__17944_17950 = G__17957;
i__17945_17951 = G__17958;
continue;
}
} else
{var temp__4092__auto___17959 = cljs.core.seq.call(null,seq__17942_17948);if(temp__4092__auto___17959)
{var seq__17942_17960__$1 = temp__4092__auto___17959;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17942_17960__$1))
{var c__4150__auto___17961 = cljs.core.chunk_first.call(null,seq__17942_17960__$1);{
var G__17962 = cljs.core.chunk_rest.call(null,seq__17942_17960__$1);
var G__17963 = c__4150__auto___17961;
var G__17964 = cljs.core.count.call(null,c__4150__auto___17961);
var G__17965 = 0;
seq__17942_17948 = G__17962;
chunk__17943_17949 = G__17963;
count__17944_17950 = G__17964;
i__17945_17951 = G__17965;
continue;
}
} else
{var vec__17947_17966 = cljs.core.first.call(null,seq__17942_17960__$1);var ev__4336__auto___17967 = cljs.core.nth.call(null,vec__17947_17966,0,null);var func__4337__auto___17968 = cljs.core.nth.call(null,vec__17947_17966,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___17967,func__4337__auto___17968);
{
var G__17969 = cljs.core.next.call(null,seq__17942_17960__$1);
var G__17970 = null;
var G__17971 = 0;
var G__17972 = 0;
seq__17942_17948 = G__17969;
chunk__17943_17949 = G__17970;
count__17944_17950 = G__17971;
i__17945_17951 = G__17972;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779),new cljs.core.Keyword(null,"objs","objs",1017308622),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826),null,new cljs.core.Keyword(null,"count","count",1108755585),0,new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tabset","tabset",4427500575),null], null), null),new cljs.core.Keyword(null,"width","width",1127031096),100,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return lt.objs.tabs.tabset_ui.call(null,this$);
}));
lt.objs.tabs.__GT_tabsets = (function __GT_tabsets(tabs){var iter__4119__auto__ = (function iter__17977(s__17978){return (new cljs.core.LazySeq(null,(function (){var s__17978__$1 = s__17978;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__17978__$1);if(temp__4092__auto__)
{var s__17978__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__17978__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__17978__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__17980 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__17979 = 0;while(true){
if((i__17979 < size__4118__auto__))
{var k = cljs.core._nth.call(null,c__4117__auto__,i__17979);cljs.core.chunk_append.call(null,b__17980,lt.object.__GT_content.call(null,k));
{
var G__17981 = (i__17979 + 1);
i__17979 = G__17981;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__17980),iter__17977.call(null,cljs.core.chunk_rest.call(null,s__17978__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__17980),null);
}
} else
{var k = cljs.core.first.call(null,s__17978__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,k),iter__17977.call(null,cljs.core.rest.call(null,s__17978__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,tabs);
});
lt.objs.tabs.__BEH__left_BANG_ = (function __BEH__left_BANG_(this$,v){lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"left","left",1017222009)], null),cljs.core._PLUS_,v);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"resize","resize",4374433830));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","left!","lt.objs.tabs/left!",2125172416),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__left_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"left!","left!",1116755052),null], null), null));
lt.objs.tabs.__BEH__right_BANG_ = (function __BEH__right_BANG_(this$,v){lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"right","right",1122416014)], null),cljs.core._PLUS_,v);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"resize","resize",4374433830));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","right!","lt.objs.tabs/right!",3429024843),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__right_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"right!","right!",4377769207),null], null), null));
lt.objs.tabs.__BEH__bottom_BANG_ = (function __BEH__bottom_BANG_(this$,v){lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"bottom","bottom",3925642653)], null),cljs.core._PLUS_,v);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"resize","resize",4374433830));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","bottom!","lt.objs.tabs/bottom!",2158565980),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__bottom_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"bottom!","bottom!",1083481800),null], null), null));
lt.objs.tabs.__BEH__tabset_bottom_BANG_ = (function __BEH__tabset_bottom_BANG_(this$,v){lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tabset-bottom","tabset-bottom",2176185021)], null),cljs.core._PLUS_,v);
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"resize","resize",4374433830));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset-bottom!","lt.objs.tabs/tabset-bottom!",3779353980),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__tabset_bottom_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tabset-bottom!","tabset-bottom!",2684870056),null], null), null));
lt.objs.tabs.multi_def = lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","multi-editor2","lt.objs.tabs/multi-editor2",1325787623),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tabs","tabs",1017456368),null], null), null),new cljs.core.Keyword(null,"tabsets","tabsets",3756175576),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"left","left",1017222009),0,new cljs.core.Keyword(null,"right","right",1122416014),0,new cljs.core.Keyword(null,"bottom","bottom",3925642653),0,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){var tabsets = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tabsets","div.tabsets",1029252219),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",1123684643),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"bottom","bottom",3925642653),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"tabset-bottom","tabset-bottom",2176185021)),lt.util.style.__GT_px)], null)], null)], null));lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tabsets-elem","tabsets-elem",4253111048),tabsets], null));
lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"tabs","tabs",1017456368),this$);
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#multi","div#multi",1721072185),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",1123684643),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"left","left",1017222009),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"left","left",1017222009)),lt.util.style.__GT_px),new cljs.core.Keyword(null,"right","right",1122416014),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"right","right",1122416014)),lt.util.style.__GT_px),new cljs.core.Keyword(null,"bottom","bottom",3925642653),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.Keyword(null,"bottom","bottom",3925642653)),lt.util.style.__GT_px)], null)], null),tabsets], null);
}));
lt.objs.tabs.multi = lt.object.create.call(null,lt.objs.tabs.multi_def);
lt.objs.tabs.tabset = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779));
lt.objs.tabs.add_tabset = (function add_tabset(ts){lt.object.update_BANG_.call(null,lt.objs.tabs.multi,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tabsets","tabsets",3756175576)], null),cljs.core.conj,ts);
return lt.util.dom.append.call(null,new cljs.core.Keyword(null,"tabsets-elem","tabsets-elem",4253111048).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi)),lt.object.__GT_content.call(null,ts));
});
lt.objs.tabs.rem_tabset = (function rem_tabset(ts,prev_QMARK_){var to_ts = (cljs.core.truth_(prev_QMARK_)?(function (){var or__3408__auto__ = lt.objs.tabs.prev_tabset.call(null,ts);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.tabs.next_tabset.call(null,ts);
}
})():(function (){var or__3408__auto__ = lt.objs.tabs.next_tabset.call(null,ts);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.tabs.prev_tabset.call(null,ts);
}
})());if(cljs.core.truth_(to_ts))
{lt.object.merge_BANG_.call(null,to_ts,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"width","width",1127031096),lt.objs.tabs.floored.call(null,(new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,to_ts)) + new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts))))], null));
lt.util.dom.remove.call(null,lt.object.__GT_content.call(null,ts));
var seq__17987_17991 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts)));var chunk__17988_17992 = null;var count__17989_17993 = 0;var i__17990_17994 = 0;while(true){
if((i__17990_17994 < count__17989_17993))
{var t_17995 = cljs.core._nth.call(null,chunk__17988_17992,i__17990_17994);lt.objs.tabs.add_BANG_.call(null,t_17995,to_ts);
{
var G__17996 = seq__17987_17991;
var G__17997 = chunk__17988_17992;
var G__17998 = count__17989_17993;
var G__17999 = (i__17990_17994 + 1);
seq__17987_17991 = G__17996;
chunk__17988_17992 = G__17997;
count__17989_17993 = G__17998;
i__17990_17994 = G__17999;
continue;
}
} else
{var temp__4092__auto___18000 = cljs.core.seq.call(null,seq__17987_17991);if(temp__4092__auto___18000)
{var seq__17987_18001__$1 = temp__4092__auto___18000;if(cljs.core.chunked_seq_QMARK_.call(null,seq__17987_18001__$1))
{var c__4150__auto___18002 = cljs.core.chunk_first.call(null,seq__17987_18001__$1);{
var G__18003 = cljs.core.chunk_rest.call(null,seq__17987_18001__$1);
var G__18004 = c__4150__auto___18002;
var G__18005 = cljs.core.count.call(null,c__4150__auto___18002);
var G__18006 = 0;
seq__17987_17991 = G__18003;
chunk__17988_17992 = G__18004;
count__17989_17993 = G__18005;
i__17990_17994 = G__18006;
continue;
}
} else
{var t_18007 = cljs.core.first.call(null,seq__17987_18001__$1);lt.objs.tabs.add_BANG_.call(null,t_18007,to_ts);
{
var G__18008 = cljs.core.next.call(null,seq__17987_18001__$1);
var G__18009 = null;
var G__18010 = 0;
var G__18011 = 0;
seq__17987_17991 = G__18008;
chunk__17988_17992 = G__18009;
count__17989_17993 = G__18010;
i__17990_17994 = G__18011;
continue;
}
}
} else
{}
}
break;
}
lt.object.update_BANG_.call(null,lt.objs.tabs.multi,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tabsets","tabsets",3756175576)], null),(function (p1__17982_SHARP_){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([ts], true),p1__17982_SHARP_));
}));
lt.object.destroy_BANG_.call(null,ts);
lt.objs.tabs.equalize_tabset_widths.call(null);
return lt.object.raise.call(null,to_ts,new cljs.core.Keyword(null,"active","active",3885920888));
} else
{return null;
}
});
lt.objs.tabs.menu_BANG_ = (function menu_BANG_(obj,ev){return lt.objs.menu.show_menu.call(null,lt.objs.menu.menu.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Move tab to new tabset",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"tabs.move-new-tabset","tabs.move-new-tabset",1394582008),obj);
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Close tab",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"close","close",1108660586));
})], null)], null)),ev.clientX,ev.clientY);
});
lt.objs.tabs.rem_BANG_ = (function rem_BANG_(obj){if(cljs.core.truth_((function (){var and__3396__auto__ = obj;if(cljs.core.truth_(and__3396__auto__))
{var and__3396__auto____$1 = cljs.core.deref.call(null,obj);if(cljs.core.truth_(and__3396__auto____$1))
{return new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj));
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{var cur_tabset = new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj));var idx = lt.objs.tabs.__GT_index.call(null,obj);var active = new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,cur_tabset));var aidx = lt.objs.tabs.__GT_index.call(null,active);cljs.core.remove_watch.call(null,obj,new cljs.core.Keyword(null,"tabs","tabs",1017456368));
lt.object.merge_BANG_.call(null,obj,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779),null], null));
lt.object.merge_BANG_.call(null,cur_tabset,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"objs","objs",1017308622),cljs.core.vec.call(null,cljs.core.remove.call(null,(function (p1__18012_SHARP_){return cljs.core._EQ_.call(null,obj,p1__18012_SHARP_);
}),cljs.core.deref.call(null,cur_tabset).call(null,new cljs.core.Keyword(null,"objs","objs",1017308622))))], null));
if(cljs.core._EQ_.call(null,obj,active))
{return lt.object.raise.call(null,cur_tabset,new cljs.core.Keyword(null,"tab","tab",1014018823),idx);
} else
{if(cljs.core.not_EQ_.call(null,aidx,lt.objs.tabs.__GT_index.call(null,active)))
{lt.object.merge_BANG_.call(null,cur_tabset,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active-obj","active-obj",3056705826),null], null));
return lt.objs.tabs.active_BANG_.call(null,active);
} else
{return null;
}
}
} else
{return null;
}
});
lt.objs.tabs.add_BANG_ = (function() {
var add_BANG_ = null;
var add_BANG___1 = (function (obj){return add_BANG_.call(null,obj,null);
});
var add_BANG___2 = (function (obj,ts){var temp__4092__auto__ = (function (){var or__3408__auto__ = ts;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));
}
})();if(cljs.core.truth_(temp__4092__auto__))
{var cur_tabset = temp__4092__auto__;lt.object.add_tags.call(null,obj,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tabset.tab","tabset.tab",1444337222)], null));
lt.object.update_BANG_.call(null,cur_tabset,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"objs","objs",1017308622)], null),cljs.core.conj,obj);
lt.object.merge_BANG_.call(null,obj,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779),cur_tabset], null));
cljs.core.add_watch.call(null,crate.binding.subatom.call(null,obj,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dirty","dirty",1109497668)], null)),new cljs.core.Keyword(null,"tabs","tabs",1017456368),(function (_,___$1,___$2,cur){return lt.object.raise.call(null,cur_tabset,new cljs.core.Keyword(null,"tab.updated","tab.updated",2727558868));
}));
return obj;
} else
{return null;
}
});
add_BANG_ = function(obj,ts){
switch(arguments.length){
case 1:
return add_BANG___1.call(this,obj);
case 2:
return add_BANG___2.call(this,obj,ts);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
add_BANG_.cljs$core$IFn$_invoke$arity$1 = add_BANG___1;
add_BANG_.cljs$core$IFn$_invoke$arity$2 = add_BANG___2;
return add_BANG_;
})()
;
lt.objs.tabs.refresh_BANG_ = (function refresh_BANG_(obj){var temp__4092__auto__ = new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj));if(cljs.core.truth_(temp__4092__auto__))
{var ts = temp__4092__auto__;return lt.object.raise.call(null,ts,new cljs.core.Keyword(null,"tab.updated","tab.updated",2727558868));
} else
{return null;
}
});
lt.objs.tabs.in_tab_QMARK_ = (function in_tab_QMARK_(obj){return cljs.core.deref.call(null,obj).call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779));
});
lt.objs.tabs.add_or_focus_BANG_ = (function add_or_focus_BANG_(obj){if(cljs.core.truth_(lt.objs.tabs.in_tab_QMARK_.call(null,obj)))
{return lt.objs.tabs.active_BANG_.call(null,obj);
} else
{lt.objs.tabs.add_BANG_.call(null,obj);
return lt.objs.tabs.active_BANG_.call(null,obj);
}
});
lt.objs.tabs.active_BANG_ = (function active_BANG_(obj){if(cljs.core.truth_((function (){var and__3396__auto__ = obj;if(cljs.core.truth_(and__3396__auto__))
{return new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj));
} else
{return and__3396__auto__;
}
})()))
{lt.object.merge_BANG_.call(null,new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active-obj","active-obj",3056705826),obj], null));
lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"show","show",1017433711));
return lt.objs.tabs.ensure_visible.call(null,lt.objs.tabs.__GT_index.call(null,obj),new cljs.core.Keyword("lt.objs.tabs","tabset","lt.objs.tabs/tabset",3378091779).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,obj)));
} else
{return null;
}
});
lt.objs.tabs.num_tabs = (function num_tabs(){return cljs.core.reduce.call(null,(function (res,cur){return (res + cljs.core.count.call(null,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,cur))));
}),0,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi)));
});
lt.objs.tabs.active_tab = (function active_tab(){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));if(cljs.core.truth_(temp__4092__auto__))
{var cur_tabset = temp__4092__auto__;return new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,cur_tabset));
} else
{return null;
}
});
lt.util.dom.append.call(null,lt.object.__GT_content.call(null,lt.objs.canvas.canvas),new cljs.core.Keyword(null,"content","content",1965434859).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi)));
lt.objs.tabs.move_tab_to_tabset = (function move_tab_to_tabset(obj,ts){lt.objs.tabs.rem_BANG_.call(null,obj);
lt.objs.tabs.add_BANG_.call(null,obj,ts);
return lt.objs.tabs.active_BANG_.call(null,obj);
});
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.move-new-tabset","tabs.move-new-tabset",1394582008),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Move tab to new tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (tab){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));if(cljs.core.truth_(temp__4092__auto__))
{var ts = temp__4092__auto__;var temp__4092__auto____$1 = (function (){var or__3408__auto__ = tab;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return cljs.core.deref.call(null,ts).call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826));
}
})();if(cljs.core.truth_(temp__4092__auto____$1))
{var cur = temp__4092__auto____$1;var new$ = lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"tabset.new","tabset.new",1444331601));return lt.objs.tabs.move_tab_to_tabset.call(null,cur,new$);
} else
{return null;
}
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.move-next-tabset","tabs.move-next-tabset",3557293229),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Move tab to next tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));if(cljs.core.truth_(temp__4092__auto__))
{var ts = temp__4092__auto__;var cur = cljs.core.deref.call(null,ts).call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826));var next = (function (){var or__3408__auto__ = lt.objs.tabs.next_tabset.call(null,ts);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.tabs.prev_tabset.call(null,ts);
}
})();if(cljs.core.truth_((function (){var and__3396__auto__ = cur;if(cljs.core.truth_(and__3396__auto__))
{var and__3396__auto____$1 = next;if(cljs.core.truth_(and__3396__auto____$1))
{return cljs.core.not_EQ_.call(null,next,ts);
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{return lt.objs.tabs.move_tab_to_tabset.call(null,cur,next);
} else
{return null;
}
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.move-prev-tabset","tabs.move-prev-tabset",876232045),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Move tab to previous tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));if(cljs.core.truth_(temp__4092__auto__))
{var ts = temp__4092__auto__;var cur = cljs.core.deref.call(null,ts).call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826));var next = (function (){var or__3408__auto__ = lt.objs.tabs.prev_tabset.call(null,ts);if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.tabs.next_tabset.call(null,ts);
}
})();if(cljs.core.truth_((function (){var and__3396__auto__ = cur;if(cljs.core.truth_(and__3396__auto__))
{var and__3396__auto____$1 = next;if(cljs.core.truth_(and__3396__auto____$1))
{return cljs.core.not_EQ_.call(null,next,ts);
} else
{return and__3396__auto____$1;
}
} else
{return and__3396__auto__;
}
})()))
{return lt.objs.tabs.move_tab_to_tabset.call(null,cur,next);
} else
{return null;
}
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.next","tabs.next",3470721749),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Next tab",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)),new cljs.core.Keyword(null,"tab.next","tab.next",4356467998));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.prev","tabs.prev",3470793237),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Previous tab",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)),new cljs.core.Keyword(null,"tab.prev","tab.prev",4356539486));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.close","tabs.close",4150844154),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Close current tab",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){if(cljs.core._EQ_.call(null,0,lt.objs.tabs.num_tabs.call(null)))
{lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"window.close","window.close",3118917100));
} else
{}
var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));if(cljs.core.truth_(temp__4092__auto__))
{var ts = temp__4092__auto__;if(cljs.core.truth_((function (){var and__3396__auto__ = new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts));if(cljs.core.truth_(and__3396__auto__))
{return cljs.core.deref.call(null,new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts)));
} else
{return and__3396__auto__;
}
})()))
{return lt.object.raise.call(null,ts,new cljs.core.Keyword(null,"tab.close","tab.close",1544206801));
} else
{return null;
}
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.close-all","tabs.close-all",2444215630),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tabs: Close all tabs",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var objs = lt.object.by_tag.call(null,new cljs.core.Keyword(null,"tabset.tab","tabset.tab",1444337222));var seq__18013 = cljs.core.seq.call(null,objs);var chunk__18014 = null;var count__18015 = 0;var i__18016 = 0;while(true){
if((i__18016 < count__18015))
{var obj = cljs.core._nth.call(null,chunk__18014,i__18016);lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"close","close",1108660586));
{
var G__18017 = seq__18013;
var G__18018 = chunk__18014;
var G__18019 = count__18015;
var G__18020 = (i__18016 + 1);
seq__18013 = G__18017;
chunk__18014 = G__18018;
count__18015 = G__18019;
i__18016 = G__18020;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__18013);if(temp__4092__auto__)
{var seq__18013__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__18013__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__18013__$1);{
var G__18021 = cljs.core.chunk_rest.call(null,seq__18013__$1);
var G__18022 = c__4150__auto__;
var G__18023 = cljs.core.count.call(null,c__4150__auto__);
var G__18024 = 0;
seq__18013 = G__18021;
chunk__18014 = G__18022;
count__18015 = G__18023;
i__18016 = G__18024;
continue;
}
} else
{var obj = cljs.core.first.call(null,seq__18013__$1);lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"close","close",1108660586));
{
var G__18025 = cljs.core.next.call(null,seq__18013__$1);
var G__18026 = null;
var G__18027 = 0;
var G__18028 = 0;
seq__18013 = G__18025;
chunk__18014 = G__18026;
count__18015 = G__18027;
i__18016 = G__18028;
continue;
}
}
} else
{return null;
}
}
break;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.close-others","tabs.close-others",1458098362),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tabs: Close tabs except current tab",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var cur = lt.objs.tabs.active_tab.call(null);var objs = lt.object.by_tag.call(null,new cljs.core.Keyword(null,"tabset.tab","tabset.tab",1444337222));var seq__18029 = cljs.core.seq.call(null,objs);var chunk__18030 = null;var count__18031 = 0;var i__18032 = 0;while(true){
if((i__18032 < count__18031))
{var obj = cljs.core._nth.call(null,chunk__18030,i__18032);if(!((cur === obj)))
{lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"close","close",1108660586));
} else
{}
{
var G__18033 = seq__18029;
var G__18034 = chunk__18030;
var G__18035 = count__18031;
var G__18036 = (i__18032 + 1);
seq__18029 = G__18033;
chunk__18030 = G__18034;
count__18031 = G__18035;
i__18032 = G__18036;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__18029);if(temp__4092__auto__)
{var seq__18029__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__18029__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__18029__$1);{
var G__18037 = cljs.core.chunk_rest.call(null,seq__18029__$1);
var G__18038 = c__4150__auto__;
var G__18039 = cljs.core.count.call(null,c__4150__auto__);
var G__18040 = 0;
seq__18029 = G__18037;
chunk__18030 = G__18038;
count__18031 = G__18039;
i__18032 = G__18040;
continue;
}
} else
{var obj = cljs.core.first.call(null,seq__18029__$1);if(!((cur === obj)))
{lt.object.raise.call(null,obj,new cljs.core.Keyword(null,"close","close",1108660586));
} else
{}
{
var G__18041 = cljs.core.next.call(null,seq__18029__$1);
var G__18042 = null;
var G__18043 = 0;
var G__18044 = 0;
seq__18029 = G__18041;
chunk__18030 = G__18042;
count__18031 = G__18043;
i__18032 = G__18044;
continue;
}
}
} else
{return null;
}
}
break;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.goto","tabs.goto",3470522693),new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: Goto tab # or :last",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (x){var ts = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575));var tab_count = cljs.core.count.call(null,new cljs.core.Keyword(null,"objs","objs",1017308622).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ts)));var idx = (tab_count - 1);return lt.object.raise.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)),new cljs.core.Keyword(null,"tab","tab",1014018823),((cljs.core._EQ_.call(null,x,new cljs.core.Keyword(null,"last","last",1017218568)))?idx:x));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabset.next","tabset.next",1472250630),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tabset: Next tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4090__auto__ = lt.objs.tabs.next_tabset.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)));if(cljs.core.truth_(temp__4090__auto__))
{var n = temp__4090__auto__;return lt.object.raise.call(null,n,new cljs.core.Keyword(null,"active","active",3885920888));
} else
{var temp__4090__auto____$1 = cljs.core.get.call(null,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi)),0);if(cljs.core.truth_(temp__4090__auto____$1))
{var n = temp__4090__auto____$1;return lt.object.raise.call(null,n,new cljs.core.Keyword(null,"active","active",3885920888));
} else
{return null;
}
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabset.prev","tabset.prev",1472322118),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tabset: Previous tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4090__auto__ = lt.objs.tabs.prev_tabset.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)));if(cljs.core.truth_(temp__4090__auto__))
{var n = temp__4090__auto__;return lt.object.raise.call(null,n,new cljs.core.Keyword(null,"active","active",3885920888));
} else
{var temp__4090__auto____$1 = cljs.core.last.call(null,new cljs.core.Keyword(null,"tabsets","tabsets",3756175576).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.tabs.multi)));if(cljs.core.truth_(temp__4090__auto____$1))
{var n = temp__4090__auto____$1;return lt.object.raise.call(null,n,new cljs.core.Keyword(null,"active","active",3885920888));
} else
{return null;
}
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabset.close","tabset.close",2327781609),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tabset: Remove active tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (ts){return lt.objs.tabs.rem_tabset.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575)));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabset.new","tabset.new",1444331601),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tabset: Add a tabset",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var ts = lt.objs.tabs.spawn_tabset.call(null);lt.objs.tabs.equalize_tabset_widths.call(null);
return ts;
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"tabs.focus-active","tabs.focus-active",2001074557),new cljs.core.Keyword(null,"desc","desc",1016984067),"Tab: focus active",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = new cljs.core.Keyword(null,"active-obj","active-obj",3056705826).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tabset","tabset",4427500575))));if(cljs.core.truth_(temp__4092__auto__))
{var active = temp__4092__auto__;return lt.object.raise.call(null,active,new cljs.core.Keyword(null,"focus!","focus!",4039653819));
} else
{return null;
}
})], null));
lt.objs.tabs.__BEH__init_sortable = (function __BEH__init_sortable(app){return initSortable(window);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","init-sortable","lt.objs.tabs/init-sortable",4237069211),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__init_sortable,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null));
lt.objs.tabs.__BEH__init = (function __BEH__init(this$){lt.objs.tabs.add_tabset.call(null,lt.objs.tabs.tabset);
return lt.object.raise.call(null,lt.objs.tabs.tabset,new cljs.core.Keyword(null,"active","active",3885920888));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.tabs","init","lt.objs.tabs/init",2224810146),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.tabs.__BEH__init,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null));
