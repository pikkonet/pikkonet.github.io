// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.titlebar');
goog.require('cljs.core');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar.command');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.tabs');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.canvas');
goog.require('lt.objs.canvas');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.tabs');
goog.require('lt.objs.sidebar.command');
lt.objs.titlebar.gui = require("nw.gui");
lt.objs.titlebar.win = lt.objs.titlebar.gui.Window.get();
lt.objs.titlebar.fullscreen_QMARK_ = false;
lt.objs.titlebar.win.on("enter-fullscreen",(function (){lt.objs.titlebar.fullscreen_QMARK_ = true;
return lt.util.dom.add_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861));
}));
lt.objs.titlebar.win.on("leave-fullscreen",(function (){lt.objs.titlebar.fullscreen_QMARK_ = false;
return lt.util.dom.remove_class.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861));
}));
lt.objs.titlebar.close = (function close(){return lt.objs.titlebar.win.close();
});
lt.objs.titlebar.minimize = (function minimize(){return lt.objs.titlebar.win.minimize();
});
lt.objs.titlebar.maximize = (function maximize(){return lt.objs.titlebar.win.maximize();
});
lt.objs.titlebar.fullscreen = (function fullscreen(){if(cljs.core.not.call(null,lt.objs.titlebar.fullscreen_QMARK_))
{return lt.objs.titlebar.win.enterFullscreen();
} else
{return lt.objs.titlebar.win.leaveFullscreen();
}
});
lt.objs.titlebar.button = (function button(class$,action,label){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",1108647146),[cljs.core.str("button "),cljs.core.str(cljs.core.name.call(null,class$))].join(''),new cljs.core.Keyword(null,"title","title",1124275658),"Exit fullscreen"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),label], null)], null));var seq__12813_12819 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return action.call(null);
})], null)));var chunk__12814_12820 = null;var count__12815_12821 = 0;var i__12816_12822 = 0;while(true){
if((i__12816_12822 < count__12815_12821))
{var vec__12817_12823 = cljs.core._nth.call(null,chunk__12814_12820,i__12816_12822);var ev__4336__auto___12824 = cljs.core.nth.call(null,vec__12817_12823,0,null);var func__4337__auto___12825 = cljs.core.nth.call(null,vec__12817_12823,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12824,func__4337__auto___12825);
{
var G__12826 = seq__12813_12819;
var G__12827 = chunk__12814_12820;
var G__12828 = count__12815_12821;
var G__12829 = (i__12816_12822 + 1);
seq__12813_12819 = G__12826;
chunk__12814_12820 = G__12827;
count__12815_12821 = G__12828;
i__12816_12822 = G__12829;
continue;
}
} else
{var temp__4092__auto___12830 = cljs.core.seq.call(null,seq__12813_12819);if(temp__4092__auto___12830)
{var seq__12813_12831__$1 = temp__4092__auto___12830;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12813_12831__$1))
{var c__4150__auto___12832 = cljs.core.chunk_first.call(null,seq__12813_12831__$1);{
var G__12833 = cljs.core.chunk_rest.call(null,seq__12813_12831__$1);
var G__12834 = c__4150__auto___12832;
var G__12835 = cljs.core.count.call(null,c__4150__auto___12832);
var G__12836 = 0;
seq__12813_12819 = G__12833;
chunk__12814_12820 = G__12834;
count__12815_12821 = G__12835;
i__12816_12822 = G__12836;
continue;
}
} else
{var vec__12818_12837 = cljs.core.first.call(null,seq__12813_12831__$1);var ev__4336__auto___12838 = cljs.core.nth.call(null,vec__12818_12837,0,null);var func__4337__auto___12839 = cljs.core.nth.call(null,vec__12818_12837,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12838,func__4337__auto___12839);
{
var G__12840 = cljs.core.next.call(null,seq__12813_12831__$1);
var G__12841 = null;
var G__12842 = 0;
var G__12843 = 0;
seq__12813_12819 = G__12840;
chunk__12814_12820 = G__12841;
count__12815_12821 = G__12842;
i__12816_12822 = G__12843;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.titlebar.window_buttons = (function window_buttons(){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.window-buttons","div.window-buttons",2883666195),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"close","close",1108660586),lt.objs.titlebar.close,"x"),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"minimize","minimize",3949804048),lt.objs.titlebar.minimize,"-"),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"maximize","maximize",1431033406),lt.objs.titlebar.maximize,"+")], null));var seq__12850_12856 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__12851_12857 = null;var count__12852_12858 = 0;var i__12853_12859 = 0;while(true){
if((i__12853_12859 < count__12852_12858))
{var vec__12854_12860 = cljs.core._nth.call(null,chunk__12851_12857,i__12853_12859);var ev__4336__auto___12861 = cljs.core.nth.call(null,vec__12854_12860,0,null);var func__4337__auto___12862 = cljs.core.nth.call(null,vec__12854_12860,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12861,func__4337__auto___12862);
{
var G__12863 = seq__12850_12856;
var G__12864 = chunk__12851_12857;
var G__12865 = count__12852_12858;
var G__12866 = (i__12853_12859 + 1);
seq__12850_12856 = G__12863;
chunk__12851_12857 = G__12864;
count__12852_12858 = G__12865;
i__12853_12859 = G__12866;
continue;
}
} else
{var temp__4092__auto___12867 = cljs.core.seq.call(null,seq__12850_12856);if(temp__4092__auto___12867)
{var seq__12850_12868__$1 = temp__4092__auto___12867;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12850_12868__$1))
{var c__4150__auto___12869 = cljs.core.chunk_first.call(null,seq__12850_12868__$1);{
var G__12870 = cljs.core.chunk_rest.call(null,seq__12850_12868__$1);
var G__12871 = c__4150__auto___12869;
var G__12872 = cljs.core.count.call(null,c__4150__auto___12869);
var G__12873 = 0;
seq__12850_12856 = G__12870;
chunk__12851_12857 = G__12871;
count__12852_12858 = G__12872;
i__12853_12859 = G__12873;
continue;
}
} else
{var vec__12855_12874 = cljs.core.first.call(null,seq__12850_12868__$1);var ev__4336__auto___12875 = cljs.core.nth.call(null,vec__12855_12874,0,null);var func__4337__auto___12876 = cljs.core.nth.call(null,vec__12855_12874,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12875,func__4337__auto___12876);
{
var G__12877 = cljs.core.next.call(null,seq__12850_12868__$1);
var G__12878 = null;
var G__12879 = 0;
var G__12880 = 0;
seq__12850_12856 = G__12877;
chunk__12851_12857 = G__12878;
count__12852_12858 = G__12879;
i__12853_12859 = G__12880;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.titlebar.titlebar = (function titlebar(){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#titlebar","div#titlebar",3210758623),lt.objs.titlebar.window_buttons.call(null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),"Light Table"], null),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861),lt.objs.titlebar.fullscreen,"f")], null));var seq__12887_12893 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__12888_12894 = null;var count__12889_12895 = 0;var i__12890_12896 = 0;while(true){
if((i__12890_12896 < count__12889_12895))
{var vec__12891_12897 = cljs.core._nth.call(null,chunk__12888_12894,i__12890_12896);var ev__4336__auto___12898 = cljs.core.nth.call(null,vec__12891_12897,0,null);var func__4337__auto___12899 = cljs.core.nth.call(null,vec__12891_12897,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12898,func__4337__auto___12899);
{
var G__12900 = seq__12887_12893;
var G__12901 = chunk__12888_12894;
var G__12902 = count__12889_12895;
var G__12903 = (i__12890_12896 + 1);
seq__12887_12893 = G__12900;
chunk__12888_12894 = G__12901;
count__12889_12895 = G__12902;
i__12890_12896 = G__12903;
continue;
}
} else
{var temp__4092__auto___12904 = cljs.core.seq.call(null,seq__12887_12893);if(temp__4092__auto___12904)
{var seq__12887_12905__$1 = temp__4092__auto___12904;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12887_12905__$1))
{var c__4150__auto___12906 = cljs.core.chunk_first.call(null,seq__12887_12905__$1);{
var G__12907 = cljs.core.chunk_rest.call(null,seq__12887_12905__$1);
var G__12908 = c__4150__auto___12906;
var G__12909 = cljs.core.count.call(null,c__4150__auto___12906);
var G__12910 = 0;
seq__12887_12893 = G__12907;
chunk__12888_12894 = G__12908;
count__12889_12895 = G__12909;
i__12890_12896 = G__12910;
continue;
}
} else
{var vec__12892_12911 = cljs.core.first.call(null,seq__12887_12905__$1);var ev__4336__auto___12912 = cljs.core.nth.call(null,vec__12892_12911,0,null);var func__4337__auto___12913 = cljs.core.nth.call(null,vec__12892_12911,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12912,func__4337__auto___12913);
{
var G__12914 = cljs.core.next.call(null,seq__12887_12905__$1);
var G__12915 = null;
var G__12916 = 0;
var G__12917 = 0;
seq__12887_12893 = G__12914;
chunk__12888_12894 = G__12915;
count__12889_12895 = G__12916;
i__12890_12896 = G__12917;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.titlebar.__BEH__add_titlebar = (function __BEH__add_titlebar(app){if(cljs.core.truth_(lt.util.dom.$.call(null,new cljs.core.Keyword(null,"#titlebar","#titlebar",4602477392))))
{return null;
} else
{return lt.util.dom.append.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),lt.objs.titlebar.titlebar.call(null));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.titlebar","add-titlebar","lt.objs.titlebar/add-titlebar",771287687),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.titlebar.__BEH__add_titlebar,new cljs.core.Keyword(null,"desc","desc",1016984067),"App: Append custom titlebar",new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null));
lt.util.dom.append.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"#multi","#multi",2120181352)),lt.objs.titlebar.button.call(null,new cljs.core.Keyword(null,"fullscreen","fullscreen",1123970861),lt.objs.titlebar.fullscreen,"-"));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"window.fullscreen","window.fullscreen",3710835691),new cljs.core.Keyword(null,"desc","desc",1016984067),"Window: Toggle fullscreen",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.titlebar.fullscreen.call(null);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"window.minimize","window.minimize",2477637198),new cljs.core.Keyword(null,"desc","desc",1016984067),"Window: Minimize",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.titlebar.minimize.call(null);
})], null));
lt.objs.sidebar.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"window.maximize","window.maximize",4253833852),new cljs.core.Keyword(null,"desc","desc",1016984067),"Window: Maximize",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.titlebar.maximize.call(null);
})], null));
