// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.search');
goog.require('cljs.core');
goog.require('crate.binding');
goog.require('lt.util.js');
goog.require('lt.objs.thread');
goog.require('lt.objs.files');
goog.require('lt.util.js');
goog.require('lt.util.dom');
goog.require('lt.objs.context');
goog.require('lt.objs.platform');
goog.require('lt.objs.tabs');
goog.require('crate.core');
goog.require('lt.objs.workspace');
goog.require('lt.objs.context');
goog.require('lt.objs.notifos');
goog.require('lt.objs.proc');
goog.require('lt.objs.notifos');
goog.require('lt.util.dom');
goog.require('lt.objs.editor.pool');
goog.require('clojure.string');
goog.require('lt.objs.command');
goog.require('lt.objs.platform');
goog.require('lt.objs.files');
goog.require('lt.objs.thread');
goog.require('lt.util.load');
goog.require('clojure.string');
goog.require('lt.objs.workspace');
goog.require('crate.binding');
goog.require('lt.objs.editor');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.util.load');
goog.require('lt.objs.proc');
goog.require('lt.objs.tabs');
goog.require('lt.objs.editor');
goog.require('crate.core');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.command');
lt.objs.search.search_BANG_ = lt.objs.thread.thread_STAR_.call(null,(function tfun10696(){var orig__4408__auto__ = argsArray(arguments);var msg__4409__auto__ = orig__4408__auto__.shift();var args__4410__auto__ = orig__4408__auto__.map(cljs.reader.read_string);var raise = ((function (orig__4408__auto__,msg__4409__auto__,args__4410__auto__){
return (function (obj__4411__auto__,k__4412__auto__,v__4413__auto__){return _send(obj__4411__auto__,k__4412__auto__,cljs.core.pr_str.call(null,v__4413__auto__),"clj");
});})(orig__4408__auto__,msg__4409__auto__,args__4410__auto__))
;args__4410__auto__.unshift(msg__4409__auto__.obj);
return (function (obj_id,opts){var replacer = require([cljs.core.str(ltpath),cljs.core.str("/core/node_modules/replace")].join(''));var search = (function (){var temp__4090__auto__ = cljs.core.re_seq.call(null,/^\/(.+)\/$/,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(opts));if(cljs.core.truth_(temp__4090__auto__))
{var pattern = temp__4090__auto__;return (new RegExp(cljs.core.second.call(null,cljs.core.first.call(null,pattern))));
} else
{return new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(opts);
}
})();var final$ = replacer.call(null,cljs.core.clj__GT_js.call(null,new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"regex","regex",1122296761),search,new cljs.core.Keyword(null,"exclude","exclude",3987722572),(cljs.core.truth_(new cljs.core.Keyword(null,"exclude","exclude",3987722572).cljs$core$IFn$_invoke$arity$1(opts))?(new RegExp(new cljs.core.Keyword(null,"exclude","exclude",3987722572).cljs$core$IFn$_invoke$arity$1(opts))):null),new cljs.core.Keyword(null,"recursive","recursive",2179684260),true,new cljs.core.Keyword(null,"ignoreCase","ignoreCase",1893967764),!(cljs.core.boolean$.call(null,cljs.core.re_seq.call(null,/[A-Z]/,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(opts)))),new cljs.core.Keyword(null,"replacement","replacement",1444823428),new cljs.core.Keyword(null,"replacement","replacement",1444823428).cljs$core$IFn$_invoke$arity$1(opts),new cljs.core.Keyword(null,"paths","paths",1120343136),new cljs.core.Keyword(null,"paths","paths",1120343136).cljs$core$IFn$_invoke$arity$1(opts),new cljs.core.Keyword(null,"result","result",4374444943),((function (replacer,search){
return (function (r){return _send(obj_id,new cljs.core.Keyword(null,"result","result",4374444943),r);
});})(replacer,search))
], null)));return raise.call(null,obj_id,new cljs.core.Keyword(null,"done-searching","done-searching",1230467105),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"total","total",1124454070),final$.totalFiles,new cljs.core.Keyword(null,"time","time",1017464383),final$.time,new cljs.core.Keyword(null,"replace?","replace?",583571325),cljs.core.boolean$.call(null,new cljs.core.Keyword(null,"replacement","replacement",1444823428).cljs$core$IFn$_invoke$arity$1(opts))], null));
}).apply(null,args__4410__auto__);
}));
lt.objs.search.result_threshold = 500;
lt.objs.search.location = (function (){var method_table__4260__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var prefer_table__4261__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var method_cache__4262__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var cached_hierarchy__4263__auto__ = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);var hierarchy__4264__auto__ = cljs.core.get.call(null,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"hierarchy","hierarchy",3129050535),cljs.core.get_global_hierarchy.call(null));return (new cljs.core.MultiFn("location",cljs.core.identity,new cljs.core.Keyword(null,"default","default",2558708147),hierarchy__4264__auto__,method_table__4260__auto__,prefer_table__4261__auto__,method_cache__4262__auto__,cached_hierarchy__4263__auto__));
})();
cljs.core._add_method.call(null,lt.objs.search.location,"<workspace>",(function (_){return cljs.core.apply.call(null,cljs.core.concat,cljs.core.juxt.call(null,new cljs.core.Keyword(null,"folders","folders",4625622327),new cljs.core.Keyword(null,"files","files",1111338473)).call(null,lt.objs.workspace.serialize.call(null,cljs.core.deref.call(null,lt.objs.workspace.current_ws))));
}));
cljs.core._add_method.call(null,lt.objs.search.location,new cljs.core.Keyword(null,"default","default",2558708147),(function (loc){return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [loc], null);
}));
lt.objs.search.string__GT_loc = (function string__GT_loc(loc_str){return cljs.core.mapcat.call(null,cljs.core.comp.call(null,lt.objs.search.location,clojure.string.trim),cljs.core.remove.call(null,cljs.core.empty_QMARK_,clojure.string.split.call(null,loc_str,",")));
});
lt.objs.search.__GT_res = (function __GT_res(this$){return lt.util.dom.$.call(null,new cljs.core.Keyword(null,".res",".res",1015387428),lt.object.__GT_content.call(null,this$));
});
lt.objs.search.__GT_entry = (function __GT_entry(r,file){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.entry","p.entry",3043677414),crate.core.raw.call(null,[cljs.core.str("<span class='line'>"),cljs.core.str(r.line),cljs.core.str("</span><pre>"),cljs.core.str(r.text),cljs.core.str("</pre>")].join(''))], null));var seq__10703_10709 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),file);
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"goto-line","goto-line",2802035088),r.line);
})], null)));var chunk__10704_10710 = null;var count__10705_10711 = 0;var i__10706_10712 = 0;while(true){
if((i__10706_10712 < count__10705_10711))
{var vec__10707_10713 = cljs.core._nth.call(null,chunk__10704_10710,i__10706_10712);var ev__4336__auto___10714 = cljs.core.nth.call(null,vec__10707_10713,0,null);var func__4337__auto___10715 = cljs.core.nth.call(null,vec__10707_10713,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10714,func__4337__auto___10715);
{
var G__10716 = seq__10703_10709;
var G__10717 = chunk__10704_10710;
var G__10718 = count__10705_10711;
var G__10719 = (i__10706_10712 + 1);
seq__10703_10709 = G__10716;
chunk__10704_10710 = G__10717;
count__10705_10711 = G__10718;
i__10706_10712 = G__10719;
continue;
}
} else
{var temp__4092__auto___10720 = cljs.core.seq.call(null,seq__10703_10709);if(temp__4092__auto___10720)
{var seq__10703_10721__$1 = temp__4092__auto___10720;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10703_10721__$1))
{var c__4150__auto___10722 = cljs.core.chunk_first.call(null,seq__10703_10721__$1);{
var G__10723 = cljs.core.chunk_rest.call(null,seq__10703_10721__$1);
var G__10724 = c__4150__auto___10722;
var G__10725 = cljs.core.count.call(null,c__4150__auto___10722);
var G__10726 = 0;
seq__10703_10709 = G__10723;
chunk__10704_10710 = G__10724;
count__10705_10711 = G__10725;
i__10706_10712 = G__10726;
continue;
}
} else
{var vec__10708_10727 = cljs.core.first.call(null,seq__10703_10721__$1);var ev__4336__auto___10728 = cljs.core.nth.call(null,vec__10708_10727,0,null);var func__4337__auto___10729 = cljs.core.nth.call(null,vec__10708_10727,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10728,func__4337__auto___10729);
{
var G__10730 = cljs.core.next.call(null,seq__10703_10721__$1);
var G__10731 = null;
var G__10732 = 0;
var G__10733 = 0;
seq__10703_10709 = G__10730;
chunk__10704_10710 = G__10731;
count__10705_10711 = G__10732;
i__10706_10712 = G__10733;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.__GT_result_item = (function __GT_result_item(r){var e__4335__auto__ = crate.core.html.call(null,(function (){var file = r.file;return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.path","p.path",4266284629),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.file","span.file",4619643154),lt.objs.files.basename.call(null,file)], null),"(",lt.objs.files.parent.call(null,file),")"], null),(function (){var iter__4119__auto__ = ((function (file){
return (function iter__10744(s__10745){return (new cljs.core.LazySeq(null,((function (file){
return (function (){var s__10745__$1 = s__10745;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__10745__$1);if(temp__4092__auto__)
{var s__10745__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__10745__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__10745__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__10747 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__10746 = 0;while(true){
if((i__10746 < size__4118__auto__))
{var r__$1 = cljs.core._nth.call(null,c__4117__auto__,i__10746);cljs.core.chunk_append.call(null,b__10747,lt.objs.search.__GT_entry.call(null,r__$1,file));
{
var G__10754 = (i__10746 + 1);
i__10746 = G__10754;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__10747),iter__10744.call(null,cljs.core.chunk_rest.call(null,s__10745__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__10747),null);
}
} else
{var r__$1 = cljs.core.first.call(null,s__10745__$2);return cljs.core.cons.call(null,lt.objs.search.__GT_entry.call(null,r__$1,file),iter__10744.call(null,cljs.core.rest.call(null,s__10745__$2)));
}
} else
{return null;
}
break;
}
});})(file))
,null,null));
});})(file))
;return iter__4119__auto__.call(null,r.results);
})()], null);
})());var seq__10748_10755 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__10749_10756 = null;var count__10750_10757 = 0;var i__10751_10758 = 0;while(true){
if((i__10751_10758 < count__10750_10757))
{var vec__10752_10759 = cljs.core._nth.call(null,chunk__10749_10756,i__10751_10758);var ev__4336__auto___10760 = cljs.core.nth.call(null,vec__10752_10759,0,null);var func__4337__auto___10761 = cljs.core.nth.call(null,vec__10752_10759,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10760,func__4337__auto___10761);
{
var G__10762 = seq__10748_10755;
var G__10763 = chunk__10749_10756;
var G__10764 = count__10750_10757;
var G__10765 = (i__10751_10758 + 1);
seq__10748_10755 = G__10762;
chunk__10749_10756 = G__10763;
count__10750_10757 = G__10764;
i__10751_10758 = G__10765;
continue;
}
} else
{var temp__4092__auto___10766 = cljs.core.seq.call(null,seq__10748_10755);if(temp__4092__auto___10766)
{var seq__10748_10767__$1 = temp__4092__auto___10766;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10748_10767__$1))
{var c__4150__auto___10768 = cljs.core.chunk_first.call(null,seq__10748_10767__$1);{
var G__10769 = cljs.core.chunk_rest.call(null,seq__10748_10767__$1);
var G__10770 = c__4150__auto___10768;
var G__10771 = cljs.core.count.call(null,c__4150__auto___10768);
var G__10772 = 0;
seq__10748_10755 = G__10769;
chunk__10749_10756 = G__10770;
count__10750_10757 = G__10771;
i__10751_10758 = G__10772;
continue;
}
} else
{var vec__10753_10773 = cljs.core.first.call(null,seq__10748_10767__$1);var ev__4336__auto___10774 = cljs.core.nth.call(null,vec__10753_10773,0,null);var func__4337__auto___10775 = cljs.core.nth.call(null,vec__10753_10773,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10774,func__4337__auto___10775);
{
var G__10776 = cljs.core.next.call(null,seq__10748_10767__$1);
var G__10777 = null;
var G__10778 = 0;
var G__10779 = 0;
seq__10748_10755 = G__10776;
chunk__10749_10756 = G__10777;
count__10750_10757 = G__10778;
i__10751_10758 = G__10779;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.search_box = (function search_box(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.search","input.search",1599745982),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"placeholder","placeholder",1612151013),"Search"], null)], null));var seq__10786_10792 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.search","searcher.search",1646738643),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.search","searcher.search",1646738643));
})], null)));var chunk__10787_10793 = null;var count__10788_10794 = 0;var i__10789_10795 = 0;while(true){
if((i__10789_10795 < count__10788_10794))
{var vec__10790_10796 = cljs.core._nth.call(null,chunk__10787_10793,i__10789_10795);var ev__4336__auto___10797 = cljs.core.nth.call(null,vec__10790_10796,0,null);var func__4337__auto___10798 = cljs.core.nth.call(null,vec__10790_10796,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10797,func__4337__auto___10798);
{
var G__10799 = seq__10786_10792;
var G__10800 = chunk__10787_10793;
var G__10801 = count__10788_10794;
var G__10802 = (i__10789_10795 + 1);
seq__10786_10792 = G__10799;
chunk__10787_10793 = G__10800;
count__10788_10794 = G__10801;
i__10789_10795 = G__10802;
continue;
}
} else
{var temp__4092__auto___10803 = cljs.core.seq.call(null,seq__10786_10792);if(temp__4092__auto___10803)
{var seq__10786_10804__$1 = temp__4092__auto___10803;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10786_10804__$1))
{var c__4150__auto___10805 = cljs.core.chunk_first.call(null,seq__10786_10804__$1);{
var G__10806 = cljs.core.chunk_rest.call(null,seq__10786_10804__$1);
var G__10807 = c__4150__auto___10805;
var G__10808 = cljs.core.count.call(null,c__4150__auto___10805);
var G__10809 = 0;
seq__10786_10792 = G__10806;
chunk__10787_10793 = G__10807;
count__10788_10794 = G__10808;
i__10789_10795 = G__10809;
continue;
}
} else
{var vec__10791_10810 = cljs.core.first.call(null,seq__10786_10804__$1);var ev__4336__auto___10811 = cljs.core.nth.call(null,vec__10791_10810,0,null);var func__4337__auto___10812 = cljs.core.nth.call(null,vec__10791_10810,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10811,func__4337__auto___10812);
{
var G__10813 = cljs.core.next.call(null,seq__10786_10804__$1);
var G__10814 = null;
var G__10815 = 0;
var G__10816 = 0;
seq__10786_10792 = G__10813;
chunk__10787_10793 = G__10814;
count__10788_10794 = G__10815;
i__10789_10795 = G__10816;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.replace_box = (function replace_box(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.replace","input.replace",1121297410),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"placeholder","placeholder",1612151013),"Replace"], null)], null));var seq__10823_10829 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace","searcher.replace",2578069901),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace","searcher.replace",2578069901));
})], null)));var chunk__10824_10830 = null;var count__10825_10831 = 0;var i__10826_10832 = 0;while(true){
if((i__10826_10832 < count__10825_10831))
{var vec__10827_10833 = cljs.core._nth.call(null,chunk__10824_10830,i__10826_10832);var ev__4336__auto___10834 = cljs.core.nth.call(null,vec__10827_10833,0,null);var func__4337__auto___10835 = cljs.core.nth.call(null,vec__10827_10833,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10834,func__4337__auto___10835);
{
var G__10836 = seq__10823_10829;
var G__10837 = chunk__10824_10830;
var G__10838 = count__10825_10831;
var G__10839 = (i__10826_10832 + 1);
seq__10823_10829 = G__10836;
chunk__10824_10830 = G__10837;
count__10825_10831 = G__10838;
i__10826_10832 = G__10839;
continue;
}
} else
{var temp__4092__auto___10840 = cljs.core.seq.call(null,seq__10823_10829);if(temp__4092__auto___10840)
{var seq__10823_10841__$1 = temp__4092__auto___10840;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10823_10841__$1))
{var c__4150__auto___10842 = cljs.core.chunk_first.call(null,seq__10823_10841__$1);{
var G__10843 = cljs.core.chunk_rest.call(null,seq__10823_10841__$1);
var G__10844 = c__4150__auto___10842;
var G__10845 = cljs.core.count.call(null,c__4150__auto___10842);
var G__10846 = 0;
seq__10823_10829 = G__10843;
chunk__10824_10830 = G__10844;
count__10825_10831 = G__10845;
i__10826_10832 = G__10846;
continue;
}
} else
{var vec__10828_10847 = cljs.core.first.call(null,seq__10823_10841__$1);var ev__4336__auto___10848 = cljs.core.nth.call(null,vec__10828_10847,0,null);var func__4337__auto___10849 = cljs.core.nth.call(null,vec__10828_10847,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10848,func__4337__auto___10849);
{
var G__10850 = cljs.core.next.call(null,seq__10823_10841__$1);
var G__10851 = null;
var G__10852 = 0;
var G__10853 = 0;
seq__10823_10829 = G__10850;
chunk__10824_10830 = G__10851;
count__10825_10831 = G__10852;
i__10826_10832 = G__10853;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.replace_all_button = (function replace_all_button(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button.replace","button.replace",910855018),"all"], null));var seq__10860_10866 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (e){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"searcher.replace-all","searcher.replace-all",1613341281));
})], null)));var chunk__10861_10867 = null;var count__10862_10868 = 0;var i__10863_10869 = 0;while(true){
if((i__10863_10869 < count__10862_10868))
{var vec__10864_10870 = cljs.core._nth.call(null,chunk__10861_10867,i__10863_10869);var ev__4336__auto___10871 = cljs.core.nth.call(null,vec__10864_10870,0,null);var func__4337__auto___10872 = cljs.core.nth.call(null,vec__10864_10870,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10871,func__4337__auto___10872);
{
var G__10873 = seq__10860_10866;
var G__10874 = chunk__10861_10867;
var G__10875 = count__10862_10868;
var G__10876 = (i__10863_10869 + 1);
seq__10860_10866 = G__10873;
chunk__10861_10867 = G__10874;
count__10862_10868 = G__10875;
i__10863_10869 = G__10876;
continue;
}
} else
{var temp__4092__auto___10877 = cljs.core.seq.call(null,seq__10860_10866);if(temp__4092__auto___10877)
{var seq__10860_10878__$1 = temp__4092__auto___10877;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10860_10878__$1))
{var c__4150__auto___10879 = cljs.core.chunk_first.call(null,seq__10860_10878__$1);{
var G__10880 = cljs.core.chunk_rest.call(null,seq__10860_10878__$1);
var G__10881 = c__4150__auto___10879;
var G__10882 = cljs.core.count.call(null,c__4150__auto___10879);
var G__10883 = 0;
seq__10860_10866 = G__10880;
chunk__10861_10867 = G__10881;
count__10862_10868 = G__10882;
i__10863_10869 = G__10883;
continue;
}
} else
{var vec__10865_10884 = cljs.core.first.call(null,seq__10860_10878__$1);var ev__4336__auto___10885 = cljs.core.nth.call(null,vec__10865_10884,0,null);var func__4337__auto___10886 = cljs.core.nth.call(null,vec__10865_10884,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10885,func__4337__auto___10886);
{
var G__10887 = cljs.core.next.call(null,seq__10860_10878__$1);
var G__10888 = null;
var G__10889 = 0;
var G__10890 = 0;
seq__10860_10866 = G__10887;
chunk__10861_10867 = G__10888;
count__10862_10868 = G__10889;
i__10863_10869 = G__10890;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.location_box = (function location_box(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.loc","input.loc",2719736462),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"placeholder","placeholder",1612151013),"Locations",new cljs.core.Keyword(null,"value","value",1125876963),"<workspace>"], null)], null));var seq__10897_10903 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"searcher.location","searcher.location",4589776032),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"searcher.location","searcher.location",4589776032));
})], null)));var chunk__10898_10904 = null;var count__10899_10905 = 0;var i__10900_10906 = 0;while(true){
if((i__10900_10906 < count__10899_10905))
{var vec__10901_10907 = cljs.core._nth.call(null,chunk__10898_10904,i__10900_10906);var ev__4336__auto___10908 = cljs.core.nth.call(null,vec__10901_10907,0,null);var func__4337__auto___10909 = cljs.core.nth.call(null,vec__10901_10907,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10908,func__4337__auto___10909);
{
var G__10910 = seq__10897_10903;
var G__10911 = chunk__10898_10904;
var G__10912 = count__10899_10905;
var G__10913 = (i__10900_10906 + 1);
seq__10897_10903 = G__10910;
chunk__10898_10904 = G__10911;
count__10899_10905 = G__10912;
i__10900_10906 = G__10913;
continue;
}
} else
{var temp__4092__auto___10914 = cljs.core.seq.call(null,seq__10897_10903);if(temp__4092__auto___10914)
{var seq__10897_10915__$1 = temp__4092__auto___10914;if(cljs.core.chunked_seq_QMARK_.call(null,seq__10897_10915__$1))
{var c__4150__auto___10916 = cljs.core.chunk_first.call(null,seq__10897_10915__$1);{
var G__10917 = cljs.core.chunk_rest.call(null,seq__10897_10915__$1);
var G__10918 = c__4150__auto___10916;
var G__10919 = cljs.core.count.call(null,c__4150__auto___10916);
var G__10920 = 0;
seq__10897_10903 = G__10917;
chunk__10898_10904 = G__10918;
count__10899_10905 = G__10919;
i__10900_10906 = G__10920;
continue;
}
} else
{var vec__10902_10921 = cljs.core.first.call(null,seq__10897_10915__$1);var ev__4336__auto___10922 = cljs.core.nth.call(null,vec__10902_10921,0,null);var func__4337__auto___10923 = cljs.core.nth.call(null,vec__10902_10921,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___10922,func__4337__auto___10923);
{
var G__10924 = cljs.core.next.call(null,seq__10897_10915__$1);
var G__10925 = null;
var G__10926 = 0;
var G__10927 = 0;
seq__10897_10903 = G__10924;
chunk__10898_10904 = G__10925;
count__10899_10905 = G__10926;
i__10900_10906 = G__10927;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.search.__GT_search_info = (function __GT_search_info(this$){var search = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",2278031048),lt.object.__GT_content.call(null,this$));var replace = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".replace",".replace",673297976),lt.object.__GT_content.call(null,this$));var loc = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".loc",".loc",1015381956),lt.object.__GT_content.call(null,this$));return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"search","search",4402534682),lt.util.dom.val.call(null,search),new cljs.core.Keyword(null,"replace","replace",2108401190),lt.util.dom.val.call(null,replace),new cljs.core.Keyword(null,"loc","loc",1014011570),lt.util.dom.val.call(null,loc)], null);
});
lt.objs.search.__BEH__on_close = (function __BEH__on_close(this$){return lt.objs.tabs.rem_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","on-close","lt.objs.search/on-close",852635541),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__on_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close","close",1108660586),null], null), null));
lt.objs.search.__BEH__clear_BANG_ = (function __BEH__clear_BANG_(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"timeout","timeout",3994960083),null,new cljs.core.Keyword(null,"results","results",2111450984),[],new cljs.core.Keyword(null,"result-count","result-count",4392277713),0,new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424),null,new cljs.core.Keyword("lt.objs.search","filesSearched","lt.objs.search/filesSearched",2511844033),null,new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,-1], null)], null));
return lt.util.dom.empty.call(null,lt.objs.search.__GT_res.call(null,this$));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","clear!","lt.objs.search/clear!",4760733279),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__clear_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null));
lt.objs.search.__BEH__search_BANG_ = (function __BEH__search_BANG_(this$){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
var info = lt.objs.search.__GT_search_info.call(null,this$);if(cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(info)))
{return null;
} else
{lt.object.merge_BANG_.call(null,this$,info);
lt.objs.notifos.working.call(null,"Searching workspace...");
return lt.objs.search.search_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"exclude","exclude",3987722572),lt.objs.files.ignore_pattern.source,new cljs.core.Keyword(null,"paths","paths",1120343136),lt.objs.search.string__GT_loc.call(null,new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","search!","lt.objs.search/search!",3582214748),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__search_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"search!","search!",2982232811),null], null), null));
lt.objs.search.__BEH__replace_BANG_ = (function __BEH__replace_BANG_(this$){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
var info = lt.objs.search.__GT_search_info.call(null,this$);if(cljs.core.empty_QMARK_.call(null,new cljs.core.Keyword(null,"search","search",4402534682).cljs$core$IFn$_invoke$arity$1(info)))
{return null;
} else
{lt.object.merge_BANG_.call(null,this$,info);
lt.objs.notifos.working.call(null,"Replacing all in workspace...");
return lt.objs.search.search_BANG_.call(null,this$,cljs.core.assoc.call(null,info,new cljs.core.Keyword(null,"replacement","replacement",1444823428),new cljs.core.Keyword(null,"replace","replace",2108401190).cljs$core$IFn$_invoke$arity$1(info),new cljs.core.Keyword(null,"exclude","exclude",3987722572),lt.objs.files.ignore_pattern.source,new cljs.core.Keyword(null,"paths","paths",1120343136),lt.objs.search.string__GT_loc.call(null,new cljs.core.Keyword(null,"loc","loc",1014011570).cljs$core$IFn$_invoke$arity$1(info))));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","replace!","lt.objs.search/replace!",1148909304),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__replace_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"replace!","replace!",583571295),null], null), null));
lt.objs.search.__BEH__done_searching = (function __BEH__done_searching(this$,info){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424),(new cljs.core.Keyword(null,"time","time",1017464383).cljs$core$IFn$_invoke$arity$1(info) / 1000),new cljs.core.Keyword("lt.objs.search","filesSearched","lt.objs.search/filesSearched",2511844033),new cljs.core.Keyword(null,"total","total",1124454070).cljs$core$IFn$_invoke$arity$1(info)], null));
if(cljs.core.truth_(new cljs.core.Keyword(null,"replace?","replace?",583571325).cljs$core$IFn$_invoke$arity$1(info)))
{lt.objs.notifos.done_working.call(null,[cljs.core.str("Replaced "),cljs.core.str(new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" results in "),cljs.core.str((new cljs.core.Keyword(null,"time","time",1017464383).cljs$core$IFn$_invoke$arity$1(info) / 1000)),cljs.core.str("s.")].join(''));
return lt.util.dom.empty.call(null,lt.objs.search.__GT_res.call(null,this$));
} else
{return lt.objs.notifos.done_working.call(null,[cljs.core.str("Found "),cljs.core.str(new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" results searching "),cljs.core.str(new cljs.core.Keyword(null,"total","total",1124454070).cljs$core$IFn$_invoke$arity$1(info)),cljs.core.str(" files in "),cljs.core.str((new cljs.core.Keyword(null,"time","time",1017464383).cljs$core$IFn$_invoke$arity$1(info) / 1000)),cljs.core.str("s.")].join(''));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","done-searching","lt.objs.search/done-searching",1038716850),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__done_searching,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"done-searching","done-searching",1230467105),null], null), null));
lt.objs.search.__BEH__next_BANG_ = (function __BEH__next_BANG_(this$){if((new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).length > 0))
{var all = new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var vec__10930 = new cljs.core.Keyword(null,"position","position",1761709211).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var file = cljs.core.nth.call(null,vec__10930,0,null);var result = cljs.core.nth.call(null,vec__10930,1,null);var cur = (all[file]);var vec__10931 = ((((result + 1) >= cur.results.length))?((((file + 1) >= all.length))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,0], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(file + 1),0], null)):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file,(result + 1)], null));var file__$1 = cljs.core.nth.call(null,vec__10931,0,null);var result__$1 = cljs.core.nth.call(null,vec__10931,1,null);var neue = (all[file__$1]);lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file__$1,result__$1], null)], null));
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),neue.file);
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"goto-line","goto-line",2802035088),(neue.results[result__$1]).line);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","next!","lt.objs.search/next!",614385297),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__next_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"next!","next!",1118619392),null], null), null));
lt.objs.search.__BEH__prev_BANG_ = (function __BEH__prev_BANG_(this$){if((new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).length > 0))
{var all = new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var vec__10934 = new cljs.core.Keyword(null,"position","position",1761709211).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var file = cljs.core.nth.call(null,vec__10934,0,null);var result = cljs.core.nth.call(null,vec__10934,1,null);var cur = (all[file]);var vec__10935 = ((((result - 1) < 0))?((((file - 1) < 0))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(all.length - 1),((all[(all.length - 1)]).results.length - 1)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(file - 1),((all[(file - 1)]).results.length - 1)], null)):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file,(result - 1)], null));var file__$1 = cljs.core.nth.call(null,vec__10935,0,null);var result__$1 = cljs.core.nth.call(null,vec__10935,1,null);var neue = (new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))[file__$1]);lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"position","position",1761709211),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [file__$1,result__$1], null)], null));
lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"open-path","open-path",2513940794),neue.file);
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"goto-line","goto-line",2802035088),(neue.results[result__$1]).line);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","prev!","lt.objs.search/prev!",611383121),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__prev_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"prev!","prev!",1120835520),null], null), null));
lt.objs.search.__BEH__on_result = (function __BEH__on_result(this$,result){var total = cljs.core.count.call(null,result.results);var result__$1 = ((true)?(function (){var obj10939 = {"file":result.file,"results":result.results.slice(0,(lt.objs.search.result_threshold - new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))};return obj10939;
})():result);if((new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)) < lt.objs.search.result_threshold))
{lt.util.dom.append.call(null,lt.objs.search.__GT_res.call(null,this$),lt.objs.search.__GT_result_item.call(null,result__$1));
} else
{}
new cljs.core.Keyword(null,"results","results",2111450984).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)).push(result__$1);
return lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"result-count","result-count",4392277713)], null),cljs.core._PLUS_,total);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","on-result","lt.objs.search/on-result",564457174),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__on_result,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"result","result",4374444943),null], null), null));
lt.objs.search.__BEH__focus = (function __BEH__focus(this$){return lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",2278031048),lt.object.__GT_content.call(null,this$)).focus();
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","focus","lt.objs.search/focus",620932027),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.search.__BEH__focus,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"focus!","focus!",4039653819),null,new cljs.core.Keyword(null,"show","show",1017433711),null], null), null));
lt.objs.search.result_count = (function result_count(this$){return cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,(cljs.core.truth_(new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424).cljs$core$IFn$_invoke$arity$1(this$))?cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,"s"),new cljs.core.Keyword("lt.objs.search","time","lt.objs.search/time",714622424).cljs$core$IFn$_invoke$arity$1(this$))," in "):null)),(((new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(this$) > lt.objs.search.result_threshold))?cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,")"),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),lt.objs.search.result_threshold], null))," (showing "):null)),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),new cljs.core.Keyword(null,"result-count","result-count",4392277713).cljs$core$IFn$_invoke$arity$1(this$)," results"], null)),"Found  ");
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.search","workspace-search","lt.objs.search/workspace-search",4343830723),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"searcher","searcher",1902549959),null], null), null),new cljs.core.Keyword(null,"results","results",2111450984),[],new cljs.core.Keyword(null,"name","name",1017277949),"Search results",new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){lt.object.add_tags.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((lt.objs.platform.win_QMARK_.call(null))?new cljs.core.Keyword(null,"searcher.win","searcher.win",1645682229):new cljs.core.Keyword(null,"searcher.unix","searcher.unix",3419097843))], null));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.search-results","div.search-results",980356928),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.res","ul.res",4464738363)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.searcher","div.searcher",3267271812),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),crate.binding.bound.call(null,this$,lt.objs.search.result_count)], null),lt.objs.search.search_box.call(null,this$),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),lt.objs.search.replace_box.call(null,this$),lt.objs.search.replace_all_button.call(null)], null),lt.objs.search.location_box.call(null,this$)], null)], null);
}));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.search","searcher.search",1646738643),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Execute search",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (info){var info__$1 = (function (){var or__3408__auto__ = info;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.search.__GT_search_info.call(null,lt.objs.search.searcher);
}
})();return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"search!","search!",2982232811),info__$1);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.show","searcher.show",3419032680),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Show",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto___10940 = lt.objs.editor.pool.last_active.call(null);if(cljs.core.truth_(temp__4092__auto___10940))
{var e_10941 = temp__4092__auto___10940;var temp__4092__auto___10942__$1 = lt.objs.editor.selection.call(null,e_10941);if(cljs.core.truth_(temp__4092__auto___10942__$1))
{var sel_10943 = temp__4092__auto___10942__$1;if(cljs.core.truth_(clojure.string.blank_QMARK_.call(null,sel_10943)))
{} else
{var search_10944 = lt.util.dom.$.call(null,new cljs.core.Keyword(null,".search",".search",2278031048),lt.object.__GT_content.call(null,lt.objs.search.searcher));lt.util.dom.val.call(null,search_10944,sel_10943);
}
} else
{}
} else
{}
return lt.objs.tabs.add_or_focus_BANG_.call(null,lt.objs.search.searcher);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.next","searcher.next",3418881118),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Next result",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"next!","next!",1118619392));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.prev","searcher.prev",3418952606),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Prev result",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"prev!","prev!",1120835520));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"searcher.replace-all","searcher.replace-all",1613341281),new cljs.core.Keyword(null,"desc","desc",1016984067),"Searcher: Replace all",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.search.searcher,new cljs.core.Keyword(null,"replace!","replace!",583571295));
})], null));
lt.objs.search.searcher = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.search","workspace-search","lt.objs.search/workspace-search",4343830723));
