// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.sidebar.clients');
goog.require('cljs.core');
goog.require('crate.binding');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.context');
goog.require('lt.objs.popup');
goog.require('lt.objs.popup');
goog.require('lt.objs.context');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.clients.ws');
goog.require('lt.objs.command');
goog.require('lt.objs.clients.tcp');
goog.require('lt.objs.clients');
goog.require('lt.objs.clients.tcp');
goog.require('crate.binding');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.clients.ws');
goog.require('lt.objs.clients');
goog.require('lt.objs.editor.pool');
goog.require('lt.objs.command');
lt.objs.sidebar.clients.close_button = (function close_button(i){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button","span.button",4282180040),"disconnect"], null));var seq__11029_11035 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.clients.close_BANG_.call(null,i);
})], null)));var chunk__11030_11036 = null;var count__11031_11037 = 0;var i__11032_11038 = 0;while(true){
if((i__11032_11038 < count__11031_11037))
{var vec__11033_11039 = cljs.core._nth.call(null,chunk__11030_11036,i__11032_11038);var ev__4336__auto___11040 = cljs.core.nth.call(null,vec__11033_11039,0,null);var func__4337__auto___11041 = cljs.core.nth.call(null,vec__11033_11039,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11040,func__4337__auto___11041);
{
var G__11042 = seq__11029_11035;
var G__11043 = chunk__11030_11036;
var G__11044 = count__11031_11037;
var G__11045 = (i__11032_11038 + 1);
seq__11029_11035 = G__11042;
chunk__11030_11036 = G__11043;
count__11031_11037 = G__11044;
i__11032_11038 = G__11045;
continue;
}
} else
{var temp__4092__auto___11046 = cljs.core.seq.call(null,seq__11029_11035);if(temp__4092__auto___11046)
{var seq__11029_11047__$1 = temp__4092__auto___11046;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11029_11047__$1))
{var c__4150__auto___11048 = cljs.core.chunk_first.call(null,seq__11029_11047__$1);{
var G__11049 = cljs.core.chunk_rest.call(null,seq__11029_11047__$1);
var G__11050 = c__4150__auto___11048;
var G__11051 = cljs.core.count.call(null,c__4150__auto___11048);
var G__11052 = 0;
seq__11029_11035 = G__11049;
chunk__11030_11036 = G__11050;
count__11031_11037 = G__11051;
i__11032_11038 = G__11052;
continue;
}
} else
{var vec__11034_11053 = cljs.core.first.call(null,seq__11029_11047__$1);var ev__4336__auto___11054 = cljs.core.nth.call(null,vec__11034_11053,0,null);var func__4337__auto___11055 = cljs.core.nth.call(null,vec__11034_11053,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11054,func__4337__auto___11055);
{
var G__11056 = cljs.core.next.call(null,seq__11029_11047__$1);
var G__11057 = null;
var G__11058 = 0;
var G__11059 = 0;
seq__11029_11035 = G__11056;
chunk__11030_11036 = G__11057;
count__11031_11037 = G__11058;
i__11032_11038 = G__11059;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.unset_button = (function unset_button(i){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button.unset","span.button.unset",4681740547),"unset"], null));var seq__11066_11072 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,lt.objs.sidebar.clients.clients,new cljs.core.Keyword(null,"unset!","unset!",4468628874),i);
})], null)));var chunk__11067_11073 = null;var count__11068_11074 = 0;var i__11069_11075 = 0;while(true){
if((i__11069_11075 < count__11068_11074))
{var vec__11070_11076 = cljs.core._nth.call(null,chunk__11067_11073,i__11069_11075);var ev__4336__auto___11077 = cljs.core.nth.call(null,vec__11070_11076,0,null);var func__4337__auto___11078 = cljs.core.nth.call(null,vec__11070_11076,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11077,func__4337__auto___11078);
{
var G__11079 = seq__11066_11072;
var G__11080 = chunk__11067_11073;
var G__11081 = count__11068_11074;
var G__11082 = (i__11069_11075 + 1);
seq__11066_11072 = G__11079;
chunk__11067_11073 = G__11080;
count__11068_11074 = G__11081;
i__11069_11075 = G__11082;
continue;
}
} else
{var temp__4092__auto___11083 = cljs.core.seq.call(null,seq__11066_11072);if(temp__4092__auto___11083)
{var seq__11066_11084__$1 = temp__4092__auto___11083;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11066_11084__$1))
{var c__4150__auto___11085 = cljs.core.chunk_first.call(null,seq__11066_11084__$1);{
var G__11086 = cljs.core.chunk_rest.call(null,seq__11066_11084__$1);
var G__11087 = c__4150__auto___11085;
var G__11088 = cljs.core.count.call(null,c__4150__auto___11085);
var G__11089 = 0;
seq__11066_11072 = G__11086;
chunk__11067_11073 = G__11087;
count__11068_11074 = G__11088;
i__11069_11075 = G__11089;
continue;
}
} else
{var vec__11071_11090 = cljs.core.first.call(null,seq__11066_11084__$1);var ev__4336__auto___11091 = cljs.core.nth.call(null,vec__11071_11090,0,null);var func__4337__auto___11092 = cljs.core.nth.call(null,vec__11071_11090,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11091,func__4337__auto___11092);
{
var G__11093 = cljs.core.next.call(null,seq__11066_11084__$1);
var G__11094 = null;
var G__11095 = 0;
var G__11096 = 0;
seq__11066_11072 = G__11093;
chunk__11067_11073 = G__11094;
count__11068_11074 = G__11095;
i__11069_11075 = G__11096;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.add_button = (function add_button(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2.toggle.add.button","h2.toggle.add.button",3718387527),"Add Connection"], null));var seq__11103_11109 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selecting!","selecting!",3653545709));
})], null)));var chunk__11104_11110 = null;var count__11105_11111 = 0;var i__11106_11112 = 0;while(true){
if((i__11106_11112 < count__11105_11111))
{var vec__11107_11113 = cljs.core._nth.call(null,chunk__11104_11110,i__11106_11112);var ev__4336__auto___11114 = cljs.core.nth.call(null,vec__11107_11113,0,null);var func__4337__auto___11115 = cljs.core.nth.call(null,vec__11107_11113,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11114,func__4337__auto___11115);
{
var G__11116 = seq__11103_11109;
var G__11117 = chunk__11104_11110;
var G__11118 = count__11105_11111;
var G__11119 = (i__11106_11112 + 1);
seq__11103_11109 = G__11116;
chunk__11104_11110 = G__11117;
count__11105_11111 = G__11118;
i__11106_11112 = G__11119;
continue;
}
} else
{var temp__4092__auto___11120 = cljs.core.seq.call(null,seq__11103_11109);if(temp__4092__auto___11120)
{var seq__11103_11121__$1 = temp__4092__auto___11120;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11103_11121__$1))
{var c__4150__auto___11122 = cljs.core.chunk_first.call(null,seq__11103_11121__$1);{
var G__11123 = cljs.core.chunk_rest.call(null,seq__11103_11121__$1);
var G__11124 = c__4150__auto___11122;
var G__11125 = cljs.core.count.call(null,c__4150__auto___11122);
var G__11126 = 0;
seq__11103_11109 = G__11123;
chunk__11104_11110 = G__11124;
count__11105_11111 = G__11125;
i__11106_11112 = G__11126;
continue;
}
} else
{var vec__11108_11127 = cljs.core.first.call(null,seq__11103_11121__$1);var ev__4336__auto___11128 = cljs.core.nth.call(null,vec__11108_11127,0,null);var func__4337__auto___11129 = cljs.core.nth.call(null,vec__11108_11127,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11128,func__4337__auto___11129);
{
var G__11130 = cljs.core.next.call(null,seq__11103_11121__$1);
var G__11131 = null;
var G__11132 = 0;
var G__11133 = 0;
seq__11103_11109 = G__11130;
chunk__11104_11110 = G__11131;
count__11105_11111 = G__11132;
i__11106_11112 = G__11133;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.choose_cancel = (function choose_cancel(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2.toggle.button","h2.toggle.button",1431469146),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1017440956),"Choose a client type"], null)], null));var seq__11140_11146 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"cancel","cancel",3941147116));
})], null)));var chunk__11141_11147 = null;var count__11142_11148 = 0;var i__11143_11149 = 0;while(true){
if((i__11143_11149 < count__11142_11148))
{var vec__11144_11150 = cljs.core._nth.call(null,chunk__11141_11147,i__11143_11149);var ev__4336__auto___11151 = cljs.core.nth.call(null,vec__11144_11150,0,null);var func__4337__auto___11152 = cljs.core.nth.call(null,vec__11144_11150,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11151,func__4337__auto___11152);
{
var G__11153 = seq__11140_11146;
var G__11154 = chunk__11141_11147;
var G__11155 = count__11142_11148;
var G__11156 = (i__11143_11149 + 1);
seq__11140_11146 = G__11153;
chunk__11141_11147 = G__11154;
count__11142_11148 = G__11155;
i__11143_11149 = G__11156;
continue;
}
} else
{var temp__4092__auto___11157 = cljs.core.seq.call(null,seq__11140_11146);if(temp__4092__auto___11157)
{var seq__11140_11158__$1 = temp__4092__auto___11157;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11140_11158__$1))
{var c__4150__auto___11159 = cljs.core.chunk_first.call(null,seq__11140_11158__$1);{
var G__11160 = cljs.core.chunk_rest.call(null,seq__11140_11158__$1);
var G__11161 = c__4150__auto___11159;
var G__11162 = cljs.core.count.call(null,c__4150__auto___11159);
var G__11163 = 0;
seq__11140_11146 = G__11160;
chunk__11141_11147 = G__11161;
count__11142_11148 = G__11162;
i__11143_11149 = G__11163;
continue;
}
} else
{var vec__11145_11164 = cljs.core.first.call(null,seq__11140_11158__$1);var ev__4336__auto___11165 = cljs.core.nth.call(null,vec__11145_11164,0,null);var func__4337__auto___11166 = cljs.core.nth.call(null,vec__11145_11164,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11165,func__4337__auto___11166);
{
var G__11167 = cljs.core.next.call(null,seq__11140_11158__$1);
var G__11168 = null;
var G__11169 = 0;
var G__11170 = 0;
seq__11140_11146 = G__11167;
chunk__11141_11147 = G__11168;
count__11142_11148 = G__11169;
i__11143_11149 = G__11170;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.__GT_active_QMARK_ = (function __GT_active_QMARK_(cur,clients){var actives = new cljs.core.Keyword(null,"active","active",3885920888).cljs$core$IFn$_invoke$arity$1(clients);var found_QMARK_ = cljs.core.first.call(null,cljs.core.filter.call(null,((function (actives){
return (function (p1__11171_SHARP_){return cljs.core._EQ_.call(null,cur,cljs.core.val.call(null,p1__11171_SHARP_));
});})(actives))
,actives));var connected_QMARK_ = new cljs.core.Keyword(null,"connected","connected",4729661051).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,cur));if(cljs.core.truth_((function (){var and__3396__auto__ = found_QMARK_;if(cljs.core.truth_(and__3396__auto__))
{return connected_QMARK_;
} else
{return and__3396__auto__;
}
})()))
{return [cljs.core.str("active client-"),cljs.core.str(cljs.core.name.call(null,cljs.core.first.call(null,found_QMARK_)))].join('');
} else
{return "";
}
});
lt.objs.sidebar.clients.client_item_STAR_ = (function client_item_STAR_(i){if(cljs.core.truth_(new cljs.core.Keyword(null,"connected","connected",4729661051).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i))))
{return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",1013907516),new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i))], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.details","div.details",4139669847),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"table","table",1124020032),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tr","tr",1013907952),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),"Type"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i))], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tr","tr",1013907952),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),"Commands"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"td","td",1013907938),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),(function (){var iter__4119__auto__ = (function iter__11176(s__11177){return (new cljs.core.LazySeq(null,(function (){var s__11177__$1 = s__11177;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11177__$1);if(temp__4092__auto__)
{var s__11177__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11177__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11177__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11179 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11178 = 0;while(true){
if((i__11178 < size__4118__auto__))
{var c = cljs.core._nth.call(null,c__4117__auto__,i__11178);cljs.core.chunk_append.call(null,b__11179,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),c], null));
{
var G__11180 = (i__11178 + 1);
i__11178 = G__11180;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11179),iter__11176.call(null,cljs.core.chunk_rest.call(null,s__11177__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11179),null);
}
} else
{var c = cljs.core.first.call(null,s__11177__$2);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),c], null),iter__11176.call(null,cljs.core.rest.call(null,s__11177__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,new cljs.core.Keyword(null,"commands","commands",4706336250).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,i)));
})()], null)], null)], null)], null),lt.objs.sidebar.clients.close_button.call(null,i),lt.objs.sidebar.clients.unset_button.call(null,i)], null)], null);
} else
{return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.connecting","div.connecting",1770928039),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.load-wrapper","div.load-wrapper",4672926811),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.img","div.img",2686470232)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),"Connecting.."], null)], null);
}
});
lt.objs.sidebar.clients.connector_QMARK_ = (function connector_QMARK_(clients){return [cljs.core.str("clients "),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"selecting?","selecting?",3653545739).cljs$core$IFn$_invoke$arity$1(clients))?"selecting":"")),cljs.core.str((cljs.core.truth_(lt.util.dom.has_class_QMARK_.call(null,new cljs.core.Keyword(null,"content","content",1965434859).cljs$core$IFn$_invoke$arity$1(clients),new cljs.core.Keyword(null,"active","active",3885920888)))?" active":null))].join('');
});
lt.objs.sidebar.clients.client_item = (function client_item(clients,i){var e__4335__auto__ = crate.core.html.call(null,(function (){var i__$1 = cljs.core.deref.call(null,i);return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,clients,((function (i__$1){
return (function (p1__11181_SHARP_){return lt.objs.sidebar.clients.__GT_active_QMARK_.call(null,i__$1,p1__11181_SHARP_);
});})(i__$1))
)], null),crate.binding.bound.call(null,i__$1,((function (i__$1){
return (function (){return lt.objs.sidebar.clients.client_item_STAR_.call(null,i__$1);
});})(i__$1))
)], null);
})());var seq__11188_11194 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__11189_11195 = null;var count__11190_11196 = 0;var i__11191_11197 = 0;while(true){
if((i__11191_11197 < count__11190_11196))
{var vec__11192_11198 = cljs.core._nth.call(null,chunk__11189_11195,i__11191_11197);var ev__4336__auto___11199 = cljs.core.nth.call(null,vec__11192_11198,0,null);var func__4337__auto___11200 = cljs.core.nth.call(null,vec__11192_11198,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11199,func__4337__auto___11200);
{
var G__11201 = seq__11188_11194;
var G__11202 = chunk__11189_11195;
var G__11203 = count__11190_11196;
var G__11204 = (i__11191_11197 + 1);
seq__11188_11194 = G__11201;
chunk__11189_11195 = G__11202;
count__11190_11196 = G__11203;
i__11191_11197 = G__11204;
continue;
}
} else
{var temp__4092__auto___11205 = cljs.core.seq.call(null,seq__11188_11194);if(temp__4092__auto___11205)
{var seq__11188_11206__$1 = temp__4092__auto___11205;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11188_11206__$1))
{var c__4150__auto___11207 = cljs.core.chunk_first.call(null,seq__11188_11206__$1);{
var G__11208 = cljs.core.chunk_rest.call(null,seq__11188_11206__$1);
var G__11209 = c__4150__auto___11207;
var G__11210 = cljs.core.count.call(null,c__4150__auto___11207);
var G__11211 = 0;
seq__11188_11194 = G__11208;
chunk__11189_11195 = G__11209;
count__11190_11196 = G__11210;
i__11191_11197 = G__11211;
continue;
}
} else
{var vec__11193_11212 = cljs.core.first.call(null,seq__11188_11206__$1);var ev__4336__auto___11213 = cljs.core.nth.call(null,vec__11193_11212,0,null);var func__4337__auto___11214 = cljs.core.nth.call(null,vec__11193_11212,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11213,func__4337__auto___11214);
{
var G__11215 = cljs.core.next.call(null,seq__11188_11206__$1);
var G__11216 = null;
var G__11217 = 0;
var G__11218 = 0;
seq__11188_11194 = G__11215;
chunk__11189_11195 = G__11216;
count__11190_11196 = G__11217;
i__11191_11197 = G__11218;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.connection_type = (function connection_type(this$,i){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",1013907516),i.call(null,new cljs.core.Keyword(null,"name","name",1017277949))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),i.call(null,new cljs.core.Keyword(null,"desc","desc",1016984067))], null)], null));var seq__11225_11231 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"selected","selected",2205476365));
return new cljs.core.Keyword(null,"connect","connect",1965255772).cljs$core$IFn$_invoke$arity$1(i).call(null);
})], null)));var chunk__11226_11232 = null;var count__11227_11233 = 0;var i__11228_11234 = 0;while(true){
if((i__11228_11234 < count__11227_11233))
{var vec__11229_11235 = cljs.core._nth.call(null,chunk__11226_11232,i__11228_11234);var ev__4336__auto___11236 = cljs.core.nth.call(null,vec__11229_11235,0,null);var func__4337__auto___11237 = cljs.core.nth.call(null,vec__11229_11235,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11236,func__4337__auto___11237);
{
var G__11238 = seq__11225_11231;
var G__11239 = chunk__11226_11232;
var G__11240 = count__11227_11233;
var G__11241 = (i__11228_11234 + 1);
seq__11225_11231 = G__11238;
chunk__11226_11232 = G__11239;
count__11227_11233 = G__11240;
i__11228_11234 = G__11241;
continue;
}
} else
{var temp__4092__auto___11242 = cljs.core.seq.call(null,seq__11225_11231);if(temp__4092__auto___11242)
{var seq__11225_11243__$1 = temp__4092__auto___11242;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11225_11243__$1))
{var c__4150__auto___11244 = cljs.core.chunk_first.call(null,seq__11225_11243__$1);{
var G__11245 = cljs.core.chunk_rest.call(null,seq__11225_11243__$1);
var G__11246 = c__4150__auto___11244;
var G__11247 = cljs.core.count.call(null,c__4150__auto___11244);
var G__11248 = 0;
seq__11225_11231 = G__11245;
chunk__11226_11232 = G__11246;
count__11227_11233 = G__11247;
i__11228_11234 = G__11248;
continue;
}
} else
{var vec__11230_11249 = cljs.core.first.call(null,seq__11225_11243__$1);var ev__4336__auto___11250 = cljs.core.nth.call(null,vec__11230_11249,0,null);var func__4337__auto___11251 = cljs.core.nth.call(null,vec__11230_11249,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11250,func__4337__auto___11251);
{
var G__11252 = cljs.core.next.call(null,seq__11225_11243__$1);
var G__11253 = null;
var G__11254 = 0;
var G__11255 = 0;
seq__11225_11231 = G__11252;
chunk__11226_11232 = G__11253;
count__11227_11233 = G__11254;
i__11228_11234 = G__11255;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.connect_ui = (function connect_ui(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,lt.objs.sidebar.clients.connector_QMARK_),new cljs.core.Keyword(null,"tabindex","tabindex",4410954191),-1], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.list","div.list",1323928397),lt.objs.sidebar.clients.add_button.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),crate.binding.map_bound.call(null,cljs.core.partial.call(null,lt.objs.sidebar.clients.client_item,this$),lt.objs.clients.cs)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.connector","div.connector",4086365858),lt.objs.sidebar.clients.choose_cancel.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),crate.binding.bound.call(null,crate.binding.subatom.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"connectors","connectors",4533225784)], null)),cljs.core.partial.call(null,lt.objs.sidebar.clients.connectors,this$))], null)], null)], null));var seq__11262_11268 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"sidebar.clients","sidebar.clients",3856103656),this$);
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"sidebar.clients","sidebar.clients",3856103656),this$);
})], null)));var chunk__11263_11269 = null;var count__11264_11270 = 0;var i__11265_11271 = 0;while(true){
if((i__11265_11271 < count__11264_11270))
{var vec__11266_11272 = cljs.core._nth.call(null,chunk__11263_11269,i__11265_11271);var ev__4336__auto___11273 = cljs.core.nth.call(null,vec__11266_11272,0,null);var func__4337__auto___11274 = cljs.core.nth.call(null,vec__11266_11272,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11273,func__4337__auto___11274);
{
var G__11275 = seq__11262_11268;
var G__11276 = chunk__11263_11269;
var G__11277 = count__11264_11270;
var G__11278 = (i__11265_11271 + 1);
seq__11262_11268 = G__11275;
chunk__11263_11269 = G__11276;
count__11264_11270 = G__11277;
i__11265_11271 = G__11278;
continue;
}
} else
{var temp__4092__auto___11279 = cljs.core.seq.call(null,seq__11262_11268);if(temp__4092__auto___11279)
{var seq__11262_11280__$1 = temp__4092__auto___11279;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11262_11280__$1))
{var c__4150__auto___11281 = cljs.core.chunk_first.call(null,seq__11262_11280__$1);{
var G__11282 = cljs.core.chunk_rest.call(null,seq__11262_11280__$1);
var G__11283 = c__4150__auto___11281;
var G__11284 = cljs.core.count.call(null,c__4150__auto___11281);
var G__11285 = 0;
seq__11262_11268 = G__11282;
chunk__11263_11269 = G__11283;
count__11264_11270 = G__11284;
i__11265_11271 = G__11285;
continue;
}
} else
{var vec__11267_11286 = cljs.core.first.call(null,seq__11262_11280__$1);var ev__4336__auto___11287 = cljs.core.nth.call(null,vec__11267_11286,0,null);var func__4337__auto___11288 = cljs.core.nth.call(null,vec__11267_11286,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11287,func__4337__auto___11288);
{
var G__11289 = cljs.core.next.call(null,seq__11262_11280__$1);
var G__11290 = null;
var G__11291 = 0;
var G__11292 = 0;
seq__11262_11268 = G__11289;
chunk__11263_11269 = G__11290;
count__11264_11270 = G__11291;
i__11265_11271 = G__11292;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.clients.__BEH__track_active_client = (function __BEH__track_active_client(ed){return lt.object.merge_BANG_.call(null,lt.objs.sidebar.clients.clients,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"active","active",3885920888),new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed))], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","track-active-client","lt.objs.sidebar.clients/track-active-client",667432058),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__track_active_client,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"set-client","set-client",2248164104),null,new cljs.core.Keyword(null,"active","active",3885920888),null], null), null));
lt.objs.sidebar.clients.__BEH__unset_client = (function __BEH__unset_client(this$,cur){var ed = lt.objs.editor.pool.last_active.call(null);var actives = new cljs.core.Keyword(null,"client","client",3951159101).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ed));var found_QMARK_ = cljs.core.first.call(null,cljs.core.filter.call(null,((function (ed,actives){
return (function (p1__11293_SHARP_){return cljs.core._EQ_.call(null,cur,cljs.core.val.call(null,p1__11293_SHARP_));
});})(ed,actives))
,actives));if(cljs.core.truth_(found_QMARK_))
{lt.object.update_BANG_.call(null,ed,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"client","client",3951159101)], null),cljs.core.dissoc,cljs.core.first.call(null,found_QMARK_));
} else
{}
return lt.objs.editor.pool.focus_last.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","unset-client","lt.objs.sidebar.clients/unset-client",3530183417),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__unset_client,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"unset!","unset!",4468628874),null], null), null));
lt.objs.sidebar.clients.__BEH__selecting_BANG_ = (function __BEH__selecting_BANG_(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selecting?","selecting?",3653545739),true], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","selecting!","lt.objs.sidebar.clients/selecting!",2845524117),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__selecting_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selecting!","selecting!",3653545709),null], null), null));
lt.objs.sidebar.clients.__BEH__done_selecting = (function __BEH__done_selecting(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selecting?","selecting?",3653545739),false], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","done-selecting","lt.objs.sidebar.clients/done-selecting",1238663413),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__done_selecting,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"cancel","cancel",3941147116),null,new cljs.core.Keyword(null,"selected","selected",2205476365),null], null), null));
lt.objs.sidebar.clients.__BEH__hide_on_select = (function __BEH__hide_on_select(this$){return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"close!","close!",3951350939));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","hide-on-select","lt.objs.sidebar.clients/hide-on-select",1437883881),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__hide_on_select,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"selected","selected",2205476365),null], null), null));
lt.objs.sidebar.clients.__BEH__focus_BANG_ = (function __BEH__focus_BANG_(this$){return lt.util.dom.focus.call(null,lt.object.__GT_content.call(null,this$));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","focus!","lt.objs.sidebar.clients/focus!",3198076775),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.clients.__BEH__focus_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"focus!","focus!",4039653819),null], null), null));
lt.objs.sidebar.clients.connectors = (function connectors(this$,connectors__$1){var iter__4119__auto__ = (function iter__11302(s__11303){return (new cljs.core.LazySeq(null,(function (){var s__11303__$1 = s__11303;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11303__$1);if(temp__4092__auto__)
{var s__11303__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11303__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11303__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11305 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11304 = 0;while(true){
if((i__11304 < size__4118__auto__))
{var vec__11308 = cljs.core._nth.call(null,c__4117__auto__,i__11304);var k = cljs.core.nth.call(null,vec__11308,0,null);var c = cljs.core.nth.call(null,vec__11308,1,null);cljs.core.chunk_append.call(null,b__11305,lt.objs.sidebar.clients.connection_type.call(null,this$,c));
{
var G__11310 = (i__11304 + 1);
i__11304 = G__11310;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11305),iter__11302.call(null,cljs.core.chunk_rest.call(null,s__11303__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11305),null);
}
} else
{var vec__11309 = cljs.core.first.call(null,s__11303__$2);var k = cljs.core.nth.call(null,vec__11309,0,null);var c = cljs.core.nth.call(null,vec__11309,1,null);return cljs.core.cons.call(null,lt.objs.sidebar.clients.connection_type.call(null,this$,c),iter__11302.call(null,cljs.core.rest.call(null,s__11303__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,connectors__$1);
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","sidebar.clients","lt.objs.sidebar.clients/sidebar.clients",3045557908),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar.clients","sidebar.clients",3856103656),null], null), null),new cljs.core.Keyword(null,"label","label",1116631654),"connect",new cljs.core.Keyword(null,"connectors","connectors",4533225784),cljs.core.sorted_map.call(null),new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return lt.objs.sidebar.clients.connect_ui.call(null,this$);
}));
lt.objs.sidebar.clients.clients = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.clients","sidebar.clients","lt.objs.sidebar.clients/sidebar.clients",3045557908));
lt.objs.sidebar.add_item.call(null,lt.objs.sidebar.rightbar,lt.objs.sidebar.clients.clients);
lt.objs.sidebar.clients.add_connector = (function add_connector(c){return lt.object.update_BANG_.call(null,lt.objs.sidebar.clients.clients,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"connectors","connectors",4533225784)], null),cljs.core.assoc,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(c),c);
});
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"show-connect","show-connect",2165693836),new cljs.core.Keyword(null,"desc","desc",1016984067),"Connect: Show connect bar",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"toggle","toggle",4440567494),lt.objs.sidebar.clients.clients);
return lt.object.raise.call(null,lt.objs.sidebar.clients.clients,new cljs.core.Keyword(null,"focus!","focus!",4039653819));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"hide-connect","hide-connect",3579890385),new cljs.core.Keyword(null,"desc","desc",1016984067),"Connect: hide connect bar",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"close!","close!",3951350939));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"show-add-connection","show-add-connection",3671605196),new cljs.core.Keyword(null,"desc","desc",1016984067),"Connect: Add Connection",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.object.raise.call(null,lt.objs.sidebar.rightbar,new cljs.core.Keyword(null,"toggle","toggle",4440567494),lt.objs.sidebar.clients.clients,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"force?","force?",4040082982),true,new cljs.core.Keyword(null,"transient?","transient?",3584270951),false], null));
return lt.object.raise.call(null,lt.objs.sidebar.clients.clients,new cljs.core.Keyword(null,"selecting!","selecting!",3653545709));
})], null));
lt.objs.sidebar.clients.add_connector.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"name","name",1017277949),"Ports",new cljs.core.Keyword(null,"desc","desc",1016984067),"Get the ports for the local TCP and Websocket servers",new cljs.core.Keyword(null,"connect","connect",1965255772),(function (){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Ports",new cljs.core.Keyword(null,"body","body",1016933652),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dl#ports","dl#ports",1671270345),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",1013907458),"TCP: "], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",1013907442),[cljs.core.str(lt.objs.clients.tcp.port)].join('')], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dt","dt",1013907458),"WebSocket: "], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dd","dd",1013907442),[cljs.core.str(lt.objs.clients.ws.port)].join('')], null)], null),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"label","label",1116631654),"ok"], null)], null)], null));
})], null));
