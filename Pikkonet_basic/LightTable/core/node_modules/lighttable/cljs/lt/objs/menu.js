// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.menu');
goog.require('cljs.core');
goog.require('lt.objs.app');
goog.require('lt.util.dom');
goog.require('lt.objs.platform');
goog.require('lt.util.dom');
goog.require('clojure.string');
goog.require('lt.objs.command');
goog.require('lt.objs.platform');
goog.require('lt.objs.app');
goog.require('clojure.string');
goog.require('lt.objs.keyboard');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.command');
goog.require('lt.objs.keyboard');
lt.objs.menu.gui = require("nw.gui");
lt.objs.menu.create_menu = (function create_menu(type){var m = lt.objs.menu.gui.Menu;if(cljs.core.truth_(type))
{return (new m((function (){var obj9691 = {"type":type};return obj9691;
})()));
} else
{return (new m());
}
});
lt.objs.menu.menu_instance = lt.objs.menu.create_menu.call(null);
lt.objs.menu.submenu = (function submenu(items){var menu = lt.objs.menu.create_menu.call(null,null);var seq__9698_9704 = cljs.core.seq.call(null,items);var chunk__9700_9705 = null;var count__9701_9706 = 0;var i__9702_9707 = 0;while(true){
if((i__9702_9707 < count__9701_9706))
{var i_9708 = cljs.core._nth.call(null,chunk__9700_9705,i__9702_9707);if(cljs.core.truth_(i_9708))
{menu.append(lt.objs.menu.menu_item.call(null,i_9708));
{
var G__9709 = seq__9698_9704;
var G__9710 = chunk__9700_9705;
var G__9711 = count__9701_9706;
var G__9712 = (i__9702_9707 + 1);
seq__9698_9704 = G__9709;
chunk__9700_9705 = G__9710;
count__9701_9706 = G__9711;
i__9702_9707 = G__9712;
continue;
}
} else
{{
var G__9713 = seq__9698_9704;
var G__9714 = chunk__9700_9705;
var G__9715 = count__9701_9706;
var G__9716 = (i__9702_9707 + 1);
seq__9698_9704 = G__9713;
chunk__9700_9705 = G__9714;
count__9701_9706 = G__9715;
i__9702_9707 = G__9716;
continue;
}
}
} else
{var temp__4092__auto___9717 = cljs.core.seq.call(null,seq__9698_9704);if(temp__4092__auto___9717)
{var seq__9698_9718__$1 = temp__4092__auto___9717;if(cljs.core.chunked_seq_QMARK_.call(null,seq__9698_9718__$1))
{var c__4150__auto___9719 = cljs.core.chunk_first.call(null,seq__9698_9718__$1);{
var G__9720 = cljs.core.chunk_rest.call(null,seq__9698_9718__$1);
var G__9721 = c__4150__auto___9719;
var G__9722 = cljs.core.count.call(null,c__4150__auto___9719);
var G__9723 = 0;
seq__9698_9704 = G__9720;
chunk__9700_9705 = G__9721;
count__9701_9706 = G__9722;
i__9702_9707 = G__9723;
continue;
}
} else
{var i_9724 = cljs.core.first.call(null,seq__9698_9718__$1);if(cljs.core.truth_(i_9724))
{menu.append(lt.objs.menu.menu_item.call(null,i_9724));
{
var G__9725 = cljs.core.next.call(null,seq__9698_9718__$1);
var G__9726 = null;
var G__9727 = 0;
var G__9728 = 0;
seq__9698_9704 = G__9725;
chunk__9700_9705 = G__9726;
count__9701_9706 = G__9727;
i__9702_9707 = G__9728;
continue;
}
} else
{{
var G__9729 = cljs.core.next.call(null,seq__9698_9718__$1);
var G__9730 = null;
var G__9731 = 0;
var G__9732 = 0;
seq__9698_9704 = G__9729;
chunk__9700_9705 = G__9730;
count__9701_9706 = G__9731;
i__9702_9707 = G__9732;
continue;
}
}
}
} else
{}
}
break;
}
return menu;
});
lt.objs.menu.menu_item = (function menu_item(opts){var mi = lt.objs.menu.gui.MenuItem;var opts__$1 = ((cljs.core.not.call(null,new cljs.core.Keyword(null,"submenu","submenu",3441075985).cljs$core$IFn$_invoke$arity$1(opts)))?opts:cljs.core.assoc.call(null,opts,new cljs.core.Keyword(null,"submenu","submenu",3441075985),lt.objs.menu.submenu.call(null,new cljs.core.Keyword(null,"submenu","submenu",3441075985).cljs$core$IFn$_invoke$arity$1(opts))));var opts2 = (cljs.core.truth_(new cljs.core.Keyword(null,"click","click",1108654330).cljs$core$IFn$_invoke$arity$1(opts__$1))?cljs.core.assoc.call(null,opts__$1,new cljs.core.Keyword(null,"click","click",1108654330),((function (mi,opts__$1){
return (function (){try{var temp__4092__auto__ = new cljs.core.Keyword(null,"click","click",1108654330).cljs$core$IFn$_invoke$arity$1(opts__$1);if(cljs.core.truth_(temp__4092__auto__))
{var func = temp__4092__auto__;return func.call(null);
} else
{return null;
}
}catch (e9734){if((e9734 instanceof Error))
{var e = e9734;return console.error(e);
} else
{if((e9734 instanceof global.Error))
{var e = e9734;return console.error(e);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e9734;
} else
{return null;
}
}
}
}});})(mi,opts__$1))
):opts__$1);return (new mi(cljs.core.clj__GT_js.call(null,opts__$1)));
});
lt.objs.menu.clear_BANG_ = (function clear_BANG_(menu){var n__4250__auto__ = (function (){var or__3408__auto__ = menu;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.menu.menu_instance;
}
})().items.length;var i = 0;while(true){
if((i < n__4250__auto__))
{(function (){var or__3408__auto__ = menu;if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.objs.menu.menu_instance;
}
})().removeAt(0);
{
var G__9735 = (i + 1);
i = G__9735;
continue;
}
} else
{return null;
}
break;
}
});
lt.objs.menu.menu = (function menu(items){lt.objs.menu.clear_BANG_.call(null);
var seq__9740_9744 = cljs.core.seq.call(null,items);var chunk__9741_9745 = null;var count__9742_9746 = 0;var i__9743_9747 = 0;while(true){
if((i__9743_9747 < count__9742_9746))
{var i_9748 = cljs.core._nth.call(null,chunk__9741_9745,i__9743_9747);lt.objs.menu.menu_instance.append(lt.objs.menu.menu_item.call(null,i_9748));
{
var G__9749 = seq__9740_9744;
var G__9750 = chunk__9741_9745;
var G__9751 = count__9742_9746;
var G__9752 = (i__9743_9747 + 1);
seq__9740_9744 = G__9749;
chunk__9741_9745 = G__9750;
count__9742_9746 = G__9751;
i__9743_9747 = G__9752;
continue;
}
} else
{var temp__4092__auto___9753 = cljs.core.seq.call(null,seq__9740_9744);if(temp__4092__auto___9753)
{var seq__9740_9754__$1 = temp__4092__auto___9753;if(cljs.core.chunked_seq_QMARK_.call(null,seq__9740_9754__$1))
{var c__4150__auto___9755 = cljs.core.chunk_first.call(null,seq__9740_9754__$1);{
var G__9756 = cljs.core.chunk_rest.call(null,seq__9740_9754__$1);
var G__9757 = c__4150__auto___9755;
var G__9758 = cljs.core.count.call(null,c__4150__auto___9755);
var G__9759 = 0;
seq__9740_9744 = G__9756;
chunk__9741_9745 = G__9757;
count__9742_9746 = G__9758;
i__9743_9747 = G__9759;
continue;
}
} else
{var i_9760 = cljs.core.first.call(null,seq__9740_9754__$1);lt.objs.menu.menu_instance.append(lt.objs.menu.menu_item.call(null,i_9760));
{
var G__9761 = cljs.core.next.call(null,seq__9740_9754__$1);
var G__9762 = null;
var G__9763 = 0;
var G__9764 = 0;
seq__9740_9744 = G__9761;
chunk__9741_9745 = G__9762;
count__9742_9746 = G__9763;
i__9743_9747 = G__9764;
continue;
}
}
} else
{}
}
break;
}
return lt.objs.menu.menu_instance;
});
lt.objs.menu.zoom_adjust = (function zoom_adjust(zoom,v){if(cljs.core._EQ_.call(null,0,zoom))
{return v;
} else
{if((zoom > 0))
{return ((v * (1 + (zoom * 0.2))) | 0);
} else
{if((zoom < 0))
{return ((v * (-1 / (-1 + (zoom * 0.27)))) | 0);
} else
{return null;
}
}
}
});
lt.objs.menu.show_menu = (function show_menu(m,x,y){var vec__9766 = (function (){var temp__4090__auto__ = lt.objs.app.zoom_level.call(null);if(cljs.core.truth_(temp__4090__auto__))
{var zoom = temp__4090__auto__;return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.zoom_adjust.call(null,zoom,x),lt.objs.menu.zoom_adjust.call(null,zoom,y)], null);
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null);
}
})();var x__$1 = cljs.core.nth.call(null,vec__9766,0,null);var y__$1 = cljs.core.nth.call(null,vec__9766,1,null);return m.popup(x__$1,y__$1);
});
lt.util.dom.on.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"body","body",1016933652)),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.util.dom.prevent.call(null,e);
lt.util.dom.stop_propagation.call(null,e);
return false;
}));
lt.objs.menu.menubar = lt.objs.menu.create_menu.call(null,"menubar");
lt.objs.menu.set_menubar = (function set_menubar(items){lt.objs.menu.clear_BANG_.call(null,lt.objs.menu.menubar);
var seq__9773_9779 = cljs.core.seq.call(null,items);var chunk__9775_9780 = null;var count__9776_9781 = 0;var i__9777_9782 = 0;while(true){
if((i__9777_9782 < count__9776_9781))
{var i_9783 = cljs.core._nth.call(null,chunk__9775_9780,i__9777_9782);if(cljs.core.truth_(i_9783))
{lt.objs.menu.menubar.append(lt.objs.menu.menu_item.call(null,i_9783));
{
var G__9784 = seq__9773_9779;
var G__9785 = chunk__9775_9780;
var G__9786 = count__9776_9781;
var G__9787 = (i__9777_9782 + 1);
seq__9773_9779 = G__9784;
chunk__9775_9780 = G__9785;
count__9776_9781 = G__9786;
i__9777_9782 = G__9787;
continue;
}
} else
{{
var G__9788 = seq__9773_9779;
var G__9789 = chunk__9775_9780;
var G__9790 = count__9776_9781;
var G__9791 = (i__9777_9782 + 1);
seq__9773_9779 = G__9788;
chunk__9775_9780 = G__9789;
count__9776_9781 = G__9790;
i__9777_9782 = G__9791;
continue;
}
}
} else
{var temp__4092__auto___9792 = cljs.core.seq.call(null,seq__9773_9779);if(temp__4092__auto___9792)
{var seq__9773_9793__$1 = temp__4092__auto___9792;if(cljs.core.chunked_seq_QMARK_.call(null,seq__9773_9793__$1))
{var c__4150__auto___9794 = cljs.core.chunk_first.call(null,seq__9773_9793__$1);{
var G__9795 = cljs.core.chunk_rest.call(null,seq__9773_9793__$1);
var G__9796 = c__4150__auto___9794;
var G__9797 = cljs.core.count.call(null,c__4150__auto___9794);
var G__9798 = 0;
seq__9773_9779 = G__9795;
chunk__9775_9780 = G__9796;
count__9776_9781 = G__9797;
i__9777_9782 = G__9798;
continue;
}
} else
{var i_9799 = cljs.core.first.call(null,seq__9773_9793__$1);if(cljs.core.truth_(i_9799))
{lt.objs.menu.menubar.append(lt.objs.menu.menu_item.call(null,i_9799));
{
var G__9800 = cljs.core.next.call(null,seq__9773_9793__$1);
var G__9801 = null;
var G__9802 = 0;
var G__9803 = 0;
seq__9773_9779 = G__9800;
chunk__9775_9780 = G__9801;
count__9776_9781 = G__9802;
i__9777_9782 = G__9803;
continue;
}
} else
{{
var G__9804 = cljs.core.next.call(null,seq__9773_9793__$1);
var G__9805 = null;
var G__9806 = 0;
var G__9807 = 0;
seq__9773_9779 = G__9804;
chunk__9775_9780 = G__9805;
count__9776_9781 = G__9806;
i__9777_9782 = G__9807;
continue;
}
}
}
} else
{}
}
break;
}
if(cljs.core.truth_(lt.objs.app.win.menu))
{return null;
} else
{return lt.objs.app.win.menu = lt.objs.menu.menubar;
}
});
lt.objs.menu.command__GT_menu_binding = (function command__GT_menu_binding(cmd){var ks = cljs.core.first.call(null,lt.objs.keyboard.cmd__GT_current_binding.call(null,cmd));var multi_part_QMARK_ = cljs.core.next.call(null,clojure.string.split.call(null,ks," "));var ks__$1 = clojure.string.split.call(null,ks,"-");if((cljs.core.seq.call(null,ks__$1)) && (cljs.core.not.call(null,multi_part_QMARK_)))
{return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),((cljs.core._EQ_.call(null,"space",cljs.core.last.call(null,ks__$1)))?" ":cljs.core.last.call(null,ks__$1)),new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),(((cljs.core.count.call(null,ks__$1) > 1))?clojure.string.join.call(null,"-",cljs.core.butlast.call(null,ks__$1)):null)], null);
} else
{return null;
}
});
lt.objs.menu.cmd_item = (function() {
var cmd_item = null;
var cmd_item__2 = (function (label,cmd){return cmd_item.call(null,label,cmd,cljs.core.PersistentArrayMap.EMPTY);
});
var cmd_item__3 = (function (label,cmd,opts){return cljs.core.merge.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),label,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,cmd);
})], null),opts,lt.objs.menu.command__GT_menu_binding.call(null,cmd,opts));
});
cmd_item = function(label,cmd,opts){
switch(arguments.length){
case 2:
return cmd_item__2.call(this,label,cmd);
case 3:
return cmd_item__3.call(this,label,cmd,opts);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
cmd_item.cljs$core$IFn$_invoke$arity$2 = cmd_item__2;
cmd_item.cljs$core$IFn$_invoke$arity$3 = cmd_item__3;
return cmd_item;
})()
;
lt.objs.menu.main_menu = (function main_menu(){return lt.objs.menu.set_menubar.call(null,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [((lt.objs.platform.mac_QMARK_.call(null))?new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"About Light Table",new cljs.core.Keyword(null,"version","version",1365512266)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Hide Light Table",new cljs.core.Keyword(null,"key","key",1014010321),"h",new cljs.core.Keyword(null,"selector","selector",2205476689),"hide:"], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"label","label",1116631654),"Hide Others",new cljs.core.Keyword(null,"key","key",1014010321),"h",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-alt",new cljs.core.Keyword(null,"selector","selector",2205476689),"hideOtherApplications:"], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Quit Light Table",new cljs.core.Keyword(null,"quit","quit",1017386433),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"q"], null))], null)], null):null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"File",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 11, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"New file",new cljs.core.Keyword(null,"new-file","new-file",2344641787),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"n"], null)),lt.objs.menu.cmd_item.call(null,"Open file",new cljs.core.Keyword(null,"open-file","open-file",2513650321),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"o",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Open folder",new cljs.core.Keyword(null,"click","click",1108654330),(function (){lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592),new cljs.core.Keyword(null,"force","force",1111522909));
return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.add-folder","workspace.add-folder",2772643205));
})], null),lt.objs.menu.cmd_item.call(null,"Open recent workspace",new cljs.core.Keyword(null,"workspace.show-recents","workspace.show-recents",1806500563),cljs.core.PersistentArrayMap.EMPTY),lt.objs.menu.cmd_item.call(null,"Save file",new cljs.core.Keyword(null,"save","save",1017427183),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"s"], null)),lt.objs.menu.cmd_item.call(null,"Save file as..",new cljs.core.Keyword(null,"save-as","save-as",2886670836),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"s",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"New window",new cljs.core.Keyword(null,"window.new","window.new",2875320852),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"n",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),lt.objs.menu.cmd_item.call(null,"Close window",new cljs.core.Keyword(null,"window.close","window.close",3118917100),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"key","key",1014010321),"w",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Close file",new cljs.core.Keyword(null,"tabs.close","tabs.close",4150844154),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"key","key",1014010321),"w"], null))], null)], null),((lt.objs.platform.mac_QMARK_.call(null))?new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Edit",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Undo",new cljs.core.Keyword(null,"editor.undo","editor.undo",4270768183),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"undo:",new cljs.core.Keyword(null,"key","key",1014010321),"z"], null)),lt.objs.menu.cmd_item.call(null,"Redo",new cljs.core.Keyword(null,"editor.redo","editor.redo",4270670161),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"selector","selector",2205476689),"redo:",new cljs.core.Keyword(null,"key","key",1014010321),"z",new cljs.core.Keyword(null,"modifiers","modifiers",3407825902),"cmd-shift"], null)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Cut",new cljs.core.Keyword(null,"editor.cut","editor.cut",3751346611),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"cut:",new cljs.core.Keyword(null,"key","key",1014010321),"x"], null)),lt.objs.menu.cmd_item.call(null,"Copy",new cljs.core.Keyword(null,"editor.copy","editor.copy",4270233288),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"copy:",new cljs.core.Keyword(null,"key","key",1014010321),"c"], null)),lt.objs.menu.cmd_item.call(null,"Paste",new cljs.core.Keyword(null,"editor.paste","editor.paste",3187448388),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"paste:",new cljs.core.Keyword(null,"key","key",1014010321),"v"], null)),lt.objs.menu.cmd_item.call(null,"Select All",new cljs.core.Keyword(null,"editor.select-all","editor.select-all",2519334883),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"selector","selector",2205476689),"selectAll:",new cljs.core.Keyword(null,"key","key",1014010321),"a"], null))], null)], null):new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Edit",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Undo",new cljs.core.Keyword(null,"editor.undo","editor.undo",4270768183)),lt.objs.menu.cmd_item.call(null,"Redo",new cljs.core.Keyword(null,"editor.redo","editor.redo",4270670161)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Cut",new cljs.core.Keyword(null,"editor.cut","editor.cut",3751346611)),lt.objs.menu.cmd_item.call(null,"Copy",new cljs.core.Keyword(null,"editor.copy","editor.copy",4270233288)),lt.objs.menu.cmd_item.call(null,"Paste",new cljs.core.Keyword(null,"editor.paste","editor.paste",3187448388)),lt.objs.menu.cmd_item.call(null,"Select All",new cljs.core.Keyword(null,"editor.select-all","editor.select-all",2519334883))], null)], null)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"View",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Workspace",new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592)),lt.objs.menu.cmd_item.call(null,"Connections",new cljs.core.Keyword(null,"show-connect","show-connect",2165693836)),lt.objs.menu.cmd_item.call(null,"Navigator",new cljs.core.Keyword(null,"navigate-workspace-transient","navigate-workspace-transient",615022696)),lt.objs.menu.cmd_item.call(null,"Commands",new cljs.core.Keyword(null,"show-commandbar-transient","show-commandbar-transient",3110127655)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Language docs",new cljs.core.Keyword(null,"docs.search.show","docs.search.show",4500636610)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),lt.objs.menu.cmd_item.call(null,"Console",new cljs.core.Keyword(null,"toggle-console","toggle-console",4454540112))], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Window",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Minimize",new cljs.core.Keyword(null,"window.minimize","window.minimize",2477637198)),lt.objs.menu.cmd_item.call(null,"Maximize",new cljs.core.Keyword(null,"window.maximize","window.maximize",4253833852)),lt.objs.menu.cmd_item.call(null,"Fullscreen",new cljs.core.Keyword(null,"window.fullscreen","window.fullscreen",3710835691))], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Help",new cljs.core.Keyword(null,"submenu","submenu",3441075985),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [lt.objs.menu.cmd_item.call(null,"Documentation",new cljs.core.Keyword(null,"show-docs","show-docs",3358896765)),((lt.objs.platform.mac_QMARK_.call(null))?null:lt.objs.menu.cmd_item.call(null,"About Light Table",new cljs.core.Keyword(null,"version","version",1365512266)))], null)], null)], null));
});
lt.objs.menu.__BEH__create_menu = (function __BEH__create_menu(this$){return lt.objs.menu.main_menu.call(null);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","create-menu","lt.objs.menu/create-menu",1707993513),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__create_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null));
lt.objs.menu.__BEH__recreate_menu = (function __BEH__recreate_menu(app){if(lt.objs.platform.mac_QMARK_.call(null))
{return lt.objs.menu.main_menu.call(null);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","recreate-menu","lt.objs.menu/recreate-menu",912131484),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__recreate_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"init","init",1017141378),null,new cljs.core.Keyword(null,"app.keys.load","app.keys.load",3209213061),null], null), null),new cljs.core.Keyword(null,"debounce","debounce",1556599227),20);
lt.objs.menu.__BEH__set_menu = (function __BEH__set_menu(this$){if((lt.objs.platform.mac_QMARK_.call(null)) || (cljs.core.not.call(null,lt.objs.app.win.menu)))
{return lt.objs.app.win.menu = lt.objs.menu.menubar;
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","set-menu","lt.objs.menu/set-menu",4093310231),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__set_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"init","init",1017141378),null,new cljs.core.Keyword(null,"focus","focus",1111509066),null], null), null));
lt.objs.menu.__BEH__remove_menu_close = (function __BEH__remove_menu_close(this$){if(lt.objs.platform.mac_QMARK_.call(null))
{return lt.objs.app.win.menu = null;
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","remove-menu-close","lt.objs.menu/remove-menu-close",1602484750),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__remove_menu_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"blur","blur",1016931289),null,new cljs.core.Keyword(null,"closed","closed",3951351006),null], null), null));
lt.objs.menu.__BEH__menu_BANG_ = (function __BEH__menu_BANG_(this$,e){var items_9808 = cljs.core.sort_by.call(null,new cljs.core.Keyword(null,"order","order",1119910592),cljs.core.filter.call(null,cljs.core.identity,lt.object.raise_reduce.call(null,this$,new cljs.core.Keyword(null,"menu+","menu+",1117686302),cljs.core.PersistentVector.EMPTY)));lt.objs.menu.show_menu.call(null,lt.objs.menu.menu.call(null,items_9808),e.clientX,e.clientY);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.menu","menu!","lt.objs.menu/menu!",2137957439),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.menu.__BEH__menu_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu!","menu!",1117686292),null], null), null));
