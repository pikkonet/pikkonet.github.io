// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.context');
goog.require('cljs.core');
goog.require('lt.object');
goog.require('lt.object');
lt.objs.context.contexts = cljs.core.atom.call(null,cljs.core.PersistentHashSet.EMPTY);
lt.objs.context.groups = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
lt.objs.context.ctx__GT_obj = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
lt.objs.context.ctx__GT_group = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
lt.objs.context.group__GT_ctxs = cljs.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
lt.objs.context.ctx_obj = null;
lt.objs.context.append_group = (function append_group(group,name){return cljs.core.swap_BANG_.call(null,lt.objs.context.groups,(function (all){if(cljs.core.truth_(all.call(null,group)))
{return cljs.core.update_in.call(null,all,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [group], null),cljs.core.conj,name);
} else
{return cljs.core.assoc.call(null,all,group,cljs.core.PersistentHashSet.fromArray([name], true));
}
}));
});
lt.objs.context.in_QMARK_ = (function in_QMARK_(k){return cljs.core.deref.call(null,lt.objs.context.contexts).call(null,k);
});
lt.objs.context.out_BANG_ = (function out_BANG_(ctxs){var ctxs__$1 = ((cljs.core.coll_QMARK_.call(null,ctxs))?ctxs:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [ctxs], null));cljs.core.swap_BANG_.call(null,lt.objs.context.contexts,(function (p1__7780_SHARP_){return cljs.core.apply.call(null,cljs.core.disj,p1__7780_SHARP_,ctxs__$1);
}));
cljs.core.swap_BANG_.call(null,lt.objs.context.ctx__GT_obj,(function (p1__7781_SHARP_){return cljs.core.apply.call(null,cljs.core.dissoc,p1__7781_SHARP_,ctxs__$1);
}));
lt.object.raise.call(null,lt.objs.context.ctx_obj,new cljs.core.Keyword(null,"out!","out!",1017327109),ctxs__$1);
var seq__7788 = cljs.core.seq.call(null,ctxs__$1);var chunk__7790 = null;var count__7791 = 0;var i__7792 = 0;while(true){
if((i__7792 < count__7791))
{var c = cljs.core._nth.call(null,chunk__7790,i__7792);if(cljs.core.truth_(lt.objs.context.in_QMARK_.call(null,c)))
{lt.object.raise.call(null,lt.objs.context.ctx_obj,cljs.core.keyword.call(null,[cljs.core.str("out!"),cljs.core.str(cljs.core.name.call(null,c))].join('')));
{
var G__7794 = seq__7788;
var G__7795 = chunk__7790;
var G__7796 = count__7791;
var G__7797 = (i__7792 + 1);
seq__7788 = G__7794;
chunk__7790 = G__7795;
count__7791 = G__7796;
i__7792 = G__7797;
continue;
}
} else
{{
var G__7798 = seq__7788;
var G__7799 = chunk__7790;
var G__7800 = count__7791;
var G__7801 = (i__7792 + 1);
seq__7788 = G__7798;
chunk__7790 = G__7799;
count__7791 = G__7800;
i__7792 = G__7801;
continue;
}
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__7788);if(temp__4092__auto__)
{var seq__7788__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__7788__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__7788__$1);{
var G__7802 = cljs.core.chunk_rest.call(null,seq__7788__$1);
var G__7803 = c__4150__auto__;
var G__7804 = cljs.core.count.call(null,c__4150__auto__);
var G__7805 = 0;
seq__7788 = G__7802;
chunk__7790 = G__7803;
count__7791 = G__7804;
i__7792 = G__7805;
continue;
}
} else
{var c = cljs.core.first.call(null,seq__7788__$1);if(cljs.core.truth_(lt.objs.context.in_QMARK_.call(null,c)))
{lt.object.raise.call(null,lt.objs.context.ctx_obj,cljs.core.keyword.call(null,[cljs.core.str("out!"),cljs.core.str(cljs.core.name.call(null,c))].join('')));
{
var G__7806 = cljs.core.next.call(null,seq__7788__$1);
var G__7807 = null;
var G__7808 = 0;
var G__7809 = 0;
seq__7788 = G__7806;
chunk__7790 = G__7807;
count__7791 = G__7808;
i__7792 = G__7809;
continue;
}
} else
{{
var G__7810 = cljs.core.next.call(null,seq__7788__$1);
var G__7811 = null;
var G__7812 = 0;
var G__7813 = 0;
seq__7788 = G__7810;
chunk__7790 = G__7811;
count__7791 = G__7812;
i__7792 = G__7813;
continue;
}
}
}
} else
{return null;
}
}
break;
}
});
/**
* @param {...*} var_args
*/
lt.objs.context.in_BANG_ = (function() { 
var in_BANG___delegate = function (ctxs,p__7816){var vec__7822 = p__7816;var obj = cljs.core.nth.call(null,vec__7822,0,null);var ctxs__$1 = ((cljs.core.coll_QMARK_.call(null,ctxs))?ctxs:new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [ctxs], null));cljs.core.swap_BANG_.call(null,lt.objs.context.contexts,(function (p1__7814_SHARP_){return cljs.core.apply.call(null,cljs.core.conj,p1__7814_SHARP_,ctxs__$1);
}));
cljs.core.swap_BANG_.call(null,lt.objs.context.ctx__GT_obj,(function (p1__7815_SHARP_){return cljs.core.merge.call(null,p1__7815_SHARP_,cljs.core.zipmap.call(null,ctxs__$1,cljs.core.repeat.call(null,obj)));
}));
lt.object.raise.call(null,lt.objs.context.ctx_obj,new cljs.core.Keyword(null,"in!","in!",1014008590),ctxs__$1);
var seq__7823 = cljs.core.seq.call(null,ctxs__$1);var chunk__7824 = null;var count__7825 = 0;var i__7826 = 0;while(true){
if((i__7826 < count__7825))
{var c = cljs.core._nth.call(null,chunk__7824,i__7826);var temp__4092__auto___7827 = cljs.core.deref.call(null,lt.objs.context.group__GT_ctxs).call(null,cljs.core.deref.call(null,lt.objs.context.ctx__GT_group).call(null,c));if(cljs.core.truth_(temp__4092__auto___7827))
{var group_7828 = temp__4092__auto___7827;lt.objs.context.out_BANG_.call(null,group_7828);
} else
{}
lt.object.raise.call(null,lt.objs.context.ctx_obj,cljs.core.keyword.call(null,[cljs.core.str("in!"),cljs.core.str(cljs.core.name.call(null,c))].join('')));
{
var G__7829 = seq__7823;
var G__7830 = chunk__7824;
var G__7831 = count__7825;
var G__7832 = (i__7826 + 1);
seq__7823 = G__7829;
chunk__7824 = G__7830;
count__7825 = G__7831;
i__7826 = G__7832;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__7823);if(temp__4092__auto__)
{var seq__7823__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__7823__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__7823__$1);{
var G__7833 = cljs.core.chunk_rest.call(null,seq__7823__$1);
var G__7834 = c__4150__auto__;
var G__7835 = cljs.core.count.call(null,c__4150__auto__);
var G__7836 = 0;
seq__7823 = G__7833;
chunk__7824 = G__7834;
count__7825 = G__7835;
i__7826 = G__7836;
continue;
}
} else
{var c = cljs.core.first.call(null,seq__7823__$1);var temp__4092__auto___7837__$1 = cljs.core.deref.call(null,lt.objs.context.group__GT_ctxs).call(null,cljs.core.deref.call(null,lt.objs.context.ctx__GT_group).call(null,c));if(cljs.core.truth_(temp__4092__auto___7837__$1))
{var group_7838 = temp__4092__auto___7837__$1;lt.objs.context.out_BANG_.call(null,group_7838);
} else
{}
lt.object.raise.call(null,lt.objs.context.ctx_obj,cljs.core.keyword.call(null,[cljs.core.str("in!"),cljs.core.str(cljs.core.name.call(null,c))].join('')));
{
var G__7839 = cljs.core.next.call(null,seq__7823__$1);
var G__7840 = null;
var G__7841 = 0;
var G__7842 = 0;
seq__7823 = G__7839;
chunk__7824 = G__7840;
count__7825 = G__7841;
i__7826 = G__7842;
continue;
}
}
} else
{return null;
}
}
break;
}
};
var in_BANG_ = function (ctxs,var_args){
var p__7816 = null;if (arguments.length > 1) {
  p__7816 = cljs.core.array_seq(Array.prototype.slice.call(arguments, 1),0);} 
return in_BANG___delegate.call(this,ctxs,p__7816);};
in_BANG_.cljs$lang$maxFixedArity = 1;
in_BANG_.cljs$lang$applyTo = (function (arglist__7843){
var ctxs = cljs.core.first(arglist__7843);
var p__7816 = cljs.core.rest(arglist__7843);
return in_BANG___delegate(ctxs,p__7816);
});
in_BANG_.cljs$core$IFn$_invoke$arity$variadic = in_BANG___delegate;
return in_BANG_;
})()
;
/**
* @param {...*} var_args
*/
lt.objs.context.toggle_BANG_ = (function() { 
var toggle_BANG___delegate = function (ctxs,p__7844){var vec__7850 = p__7844;var obj = cljs.core.nth.call(null,vec__7850,0,null);var seq__7851 = cljs.core.seq.call(null,ctxs);var chunk__7852 = null;var count__7853 = 0;var i__7854 = 0;while(true){
if((i__7854 < count__7853))
{var c = cljs.core._nth.call(null,chunk__7852,i__7854);if(cljs.core.truth_(lt.objs.context.in_QMARK_.call(null,c)))
{lt.objs.context.out_BANG_.call(null,c);
} else
{lt.objs.context.in_BANG_.call(null,c,obj);
}
{
var G__7855 = seq__7851;
var G__7856 = chunk__7852;
var G__7857 = count__7853;
var G__7858 = (i__7854 + 1);
seq__7851 = G__7855;
chunk__7852 = G__7856;
count__7853 = G__7857;
i__7854 = G__7858;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__7851);if(temp__4092__auto__)
{var seq__7851__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__7851__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__7851__$1);{
var G__7859 = cljs.core.chunk_rest.call(null,seq__7851__$1);
var G__7860 = c__4150__auto__;
var G__7861 = cljs.core.count.call(null,c__4150__auto__);
var G__7862 = 0;
seq__7851 = G__7859;
chunk__7852 = G__7860;
count__7853 = G__7861;
i__7854 = G__7862;
continue;
}
} else
{var c = cljs.core.first.call(null,seq__7851__$1);if(cljs.core.truth_(lt.objs.context.in_QMARK_.call(null,c)))
{lt.objs.context.out_BANG_.call(null,c);
} else
{lt.objs.context.in_BANG_.call(null,c,obj);
}
{
var G__7863 = cljs.core.next.call(null,seq__7851__$1);
var G__7864 = null;
var G__7865 = 0;
var G__7866 = 0;
seq__7851 = G__7863;
chunk__7852 = G__7864;
count__7853 = G__7865;
i__7854 = G__7866;
continue;
}
}
} else
{return null;
}
}
break;
}
};
var toggle_BANG_ = function (ctxs,var_args){
var p__7844 = null;if (arguments.length > 1) {
  p__7844 = cljs.core.array_seq(Array.prototype.slice.call(arguments, 1),0);} 
return toggle_BANG___delegate.call(this,ctxs,p__7844);};
toggle_BANG_.cljs$lang$maxFixedArity = 1;
toggle_BANG_.cljs$lang$applyTo = (function (arglist__7867){
var ctxs = cljs.core.first(arglist__7867);
var p__7844 = cljs.core.rest(arglist__7867);
return toggle_BANG___delegate(ctxs,p__7844);
});
toggle_BANG_.cljs$core$IFn$_invoke$arity$variadic = toggle_BANG___delegate;
return toggle_BANG_;
})()
;
lt.objs.context.current = (function current(){return cljs.core.deref.call(null,lt.objs.context.contexts);
});
lt.objs.context.group_BANG_ = (function group_BANG_(ctx,group){cljs.core.swap_BANG_.call(null,lt.objs.context.ctx__GT_group,cljs.core.assoc,ctx,group);
return cljs.core.swap_BANG_.call(null,lt.objs.context.group__GT_ctx,cljs.core.update_in,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [group], null),cljs.core.conj,ctx);
});
lt.objs.context.__GT_obj = (function __GT_obj(ctx){return cljs.core.deref.call(null,lt.objs.context.ctx__GT_obj).call(null,ctx);
});
lt.objs.context.__BEH__log_on_in = (function __BEH__log_on_in(obj,ctxs){return lt.objs.context.log.call(null,new cljs.core.Keyword(null,"context-in","context-in",1287643509),ctxs);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.context","log-on-in","lt.objs.context/log-on-in",4285205673),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.context.__BEH__log_on_in,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"in!","in!",1014008590),null], null), null));
lt.objs.context.__BEH__log_on_out = (function __BEH__log_on_out(obj,ctxs){return lt.objs.context.log.call(null,new cljs.core.Keyword(null,"context-out","context-out",909893026),ctxs);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.context","log-on-out","lt.objs.context/log-on-out",4504071594),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.context.__BEH__log_on_out,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"out!","out!",1017327109),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.context","context","lt.objs.context/context",4461036756),new cljs.core.Keyword(null,"init","init",1017141378),(function (){return null;
}));
lt.objs.context.ctx_obj = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.context","context","lt.objs.context/context",4461036756));
