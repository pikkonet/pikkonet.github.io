// Compiled by ClojureScript 0.0-2138
goog.provide('lt.objs.sidebar.workspace');
goog.require('cljs.core');
goog.require('lt.util.cljs');
goog.require('crate.binding');
goog.require('lt.objs.files');
goog.require('lt.objs.opener');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('lt.objs.context');
goog.require('lt.objs.popup');
goog.require('lt.objs.popup');
goog.require('lt.objs.workspace');
goog.require('lt.objs.context');
goog.require('lt.objs.workspace');
goog.require('lt.util.dom');
goog.require('lt.objs.sidebar');
goog.require('clojure.string');
goog.require('lt.util.cljs');
goog.require('lt.objs.command');
goog.require('lt.objs.files');
goog.require('lt.objs.opener');
goog.require('clojure.string');
goog.require('crate.binding');
goog.require('lt.object');
goog.require('lt.object');
goog.require('lt.objs.command');
lt.objs.sidebar.workspace.active_dialog = null;
lt.objs.sidebar.workspace.gui = require("nw.gui");
lt.objs.sidebar.workspace.menu_item = (function menu_item(opts){var mi = lt.objs.sidebar.workspace.gui.MenuItem;return (new mi(cljs.core.clj__GT_js.call(null,opts)));
});
lt.objs.sidebar.workspace.menu = (function menu(items){var m = lt.objs.sidebar.workspace.gui.Menu;var menu__$1 = (new m());var seq__11598_11602 = cljs.core.seq.call(null,items);var chunk__11599_11603 = null;var count__11600_11604 = 0;var i__11601_11605 = 0;while(true){
if((i__11601_11605 < count__11600_11604))
{var i_11606 = cljs.core._nth.call(null,chunk__11599_11603,i__11601_11605);menu__$1.append(lt.objs.sidebar.workspace.menu_item.call(null,i_11606));
{
var G__11607 = seq__11598_11602;
var G__11608 = chunk__11599_11603;
var G__11609 = count__11600_11604;
var G__11610 = (i__11601_11605 + 1);
seq__11598_11602 = G__11607;
chunk__11599_11603 = G__11608;
count__11600_11604 = G__11609;
i__11601_11605 = G__11610;
continue;
}
} else
{var temp__4092__auto___11611 = cljs.core.seq.call(null,seq__11598_11602);if(temp__4092__auto___11611)
{var seq__11598_11612__$1 = temp__4092__auto___11611;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11598_11612__$1))
{var c__4150__auto___11613 = cljs.core.chunk_first.call(null,seq__11598_11612__$1);{
var G__11614 = cljs.core.chunk_rest.call(null,seq__11598_11612__$1);
var G__11615 = c__4150__auto___11613;
var G__11616 = cljs.core.count.call(null,c__4150__auto___11613);
var G__11617 = 0;
seq__11598_11602 = G__11614;
chunk__11599_11603 = G__11615;
count__11600_11604 = G__11616;
i__11601_11605 = G__11617;
continue;
}
} else
{var i_11618 = cljs.core.first.call(null,seq__11598_11612__$1);menu__$1.append(lt.objs.sidebar.workspace.menu_item.call(null,i_11618));
{
var G__11619 = cljs.core.next.call(null,seq__11598_11612__$1);
var G__11620 = null;
var G__11621 = 0;
var G__11622 = 0;
seq__11598_11602 = G__11619;
chunk__11599_11603 = G__11620;
count__11600_11604 = G__11621;
i__11601_11605 = G__11622;
continue;
}
}
} else
{}
}
break;
}
return menu__$1;
});
lt.objs.sidebar.workspace.show_menu = (function show_menu(m,x,y){return m.popup(x,y);
});
lt.objs.sidebar.workspace.files_and_folders = (function files_and_folders(path){var fs = lt.objs.workspace.files_and_folders.call(null,path);return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.mapv.call(null,(function (p1__11623_SHARP_){return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),p1__11623_SHARP_);
}),new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(fs)),new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.mapv.call(null,(function (p1__11624_SHARP_){return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),p1__11624_SHARP_);
}),new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(fs))], null);
});
lt.objs.sidebar.workspace.root_folder = (function root_folder(path){return lt.object.add_tags.call(null,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),path),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"workspace.folder.root","workspace.folder.root",4665807355)], null));
});
lt.objs.sidebar.workspace.root_file = (function root_file(path){return lt.object.add_tags.call(null,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),path),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"workspace.file.root","workspace.file.root",532025197)], null));
});
lt.objs.sidebar.workspace.remove_child = (function remove_child(p,child){if(cljs.core.truth_(lt.object.has_tag_QMARK_.call(null,child,new cljs.core.Keyword(null,"workspace.file","workspace.file",1768213159))))
{return lt.object.update_BANG_.call(null,p,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([child], true),cur));
}));
} else
{return lt.object.update_BANG_.call(null,p,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([child], true),cur));
}));
}
});
lt.objs.sidebar.workspace.__BEH__add_ws_folder = (function __BEH__add_ws_folder(this$,path){return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.folder!","add.folder!",2151595160),path);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","add-ws-folder","lt.objs.sidebar.workspace/add-ws-folder",3077183263),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__add_ws_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"workspace.add.folder!","workspace.add.folder!",1443047615),null], null), null));
lt.objs.sidebar.workspace.__BEH__add_ws_file = (function __BEH__add_ws_file(this$,path){lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.file!","add.file!",4237252106),path);
return lt.object.raise.call(null,cljs.core.first.call(null,lt.object.by_tag.call(null,new cljs.core.Keyword(null,"opener","opener",4298292201))),new cljs.core.Keyword(null,"open!","open!",1119852169),path);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","add-ws-file","lt.objs.sidebar.workspace/add-ws-file",3890882145),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__add_ws_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"workspace.add.file!","workspace.add.file!",821993457),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_open_ls = (function __BEH__on_open_ls(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),true], null));
if(cljs.core.truth_(new cljs.core.Keyword(null,"realized?","realized?",4433874243).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))
{return null;
} else
{lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"realized?","realized?",4433874243),true], null));
return lt.object.merge_BANG_.call(null,this$,lt.objs.sidebar.workspace.files_and_folders.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-open-ls","lt.objs.sidebar.workspace/on-open-ls",636886726),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_open_ls,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1119852169),null], null), null));
lt.objs.sidebar.workspace.__BEH__refresh = (function __BEH__refresh(this$){var seq__11629_11633 = cljs.core.seq.call(null,cljs.core.concat.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));var chunk__11630_11634 = null;var count__11631_11635 = 0;var i__11632_11636 = 0;while(true){
if((i__11632_11636 < count__11631_11635))
{var f_11637 = cljs.core._nth.call(null,chunk__11630_11634,i__11632_11636);lt.object.destroy_BANG_.call(null,f_11637);
{
var G__11638 = seq__11629_11633;
var G__11639 = chunk__11630_11634;
var G__11640 = count__11631_11635;
var G__11641 = (i__11632_11636 + 1);
seq__11629_11633 = G__11638;
chunk__11630_11634 = G__11639;
count__11631_11635 = G__11640;
i__11632_11636 = G__11641;
continue;
}
} else
{var temp__4092__auto___11642 = cljs.core.seq.call(null,seq__11629_11633);if(temp__4092__auto___11642)
{var seq__11629_11643__$1 = temp__4092__auto___11642;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11629_11643__$1))
{var c__4150__auto___11644 = cljs.core.chunk_first.call(null,seq__11629_11643__$1);{
var G__11645 = cljs.core.chunk_rest.call(null,seq__11629_11643__$1);
var G__11646 = c__4150__auto___11644;
var G__11647 = cljs.core.count.call(null,c__4150__auto___11644);
var G__11648 = 0;
seq__11629_11633 = G__11645;
chunk__11630_11634 = G__11646;
count__11631_11635 = G__11647;
i__11632_11636 = G__11648;
continue;
}
} else
{var f_11649 = cljs.core.first.call(null,seq__11629_11643__$1);lt.object.destroy_BANG_.call(null,f_11649);
{
var G__11650 = cljs.core.next.call(null,seq__11629_11643__$1);
var G__11651 = null;
var G__11652 = 0;
var G__11653 = 0;
seq__11629_11633 = G__11650;
chunk__11630_11634 = G__11651;
count__11631_11635 = G__11652;
i__11632_11636 = G__11653;
continue;
}
}
} else
{}
}
break;
}
lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"refresh","refresh",2099349069),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.merge_BANG_.call(null,this$,lt.objs.sidebar.workspace.files_and_folders.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","refresh","lt.objs.sidebar.workspace/refresh",4526611623),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__refresh,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"refresh!","refresh!",4597922840),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_close = (function __BEH__on_close(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),false], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-close","lt.objs.sidebar.workspace/on-close",2768332408),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_close,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close!","close!",3951350939),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_open_file = (function __BEH__on_open_file(this$){return lt.object.raise.call(null,lt.objs.opener.opener,new cljs.core.Keyword(null,"open!","open!",1119852169),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-open-file","lt.objs.sidebar.workspace/on-open-file",535182993),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_open_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1119852169),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_remove = (function __BEH__on_remove(this$,item){if(cljs.core.truth_(lt.object.has_tag_QMARK_.call(null,item,new cljs.core.Keyword(null,"workspace.folder","workspace.folder",4355811161))))
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"remove.folder!","remove.folder!",1531423099),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,item)));
} else
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"remove.file!","remove.file!",3382976429),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,item)));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-remove","lt.objs.sidebar.workspace/on-remove",3327022336),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_remove,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"remove!","remove!",2105740175),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_clear = (function __BEH__on_clear(this$){return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-clear","lt.objs.sidebar.workspace/on-clear",2768322211),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_clear,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"clear!","clear!",3951036134),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_ws_add = (function __BEH__on_ws_add(ws,f){if(cljs.core.truth_(lt.objs.files.file_QMARK_.call(null,f)))
{return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),cljs.core.conj,lt.objs.sidebar.workspace.root_file.call(null,f));
} else
{return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),cljs.core.conj,lt.objs.sidebar.workspace.root_folder.call(null,f));
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-ws-add","lt.objs.sidebar.workspace/on-ws-add",2946370468),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_ws_add,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"add","add",1014000659),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_ws_remove = (function __BEH__on_ws_remove(ws,f){var item = lt.objs.sidebar.workspace.find_by_path.call(null,f);if(cljs.core.truth_(lt.objs.files.file_QMARK_.call(null,f)))
{lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([item], true),cur));
}));
} else
{lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),(function (cur){return cljs.core.vec.call(null,cljs.core.remove.call(null,cljs.core.PersistentHashSet.fromArray([item], true),cur));
}));
}
return lt.object.destroy_BANG_.call(null,item);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-ws-remove","lt.objs.sidebar.workspace/on-ws-remove",3507655435),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_ws_remove,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"remove","remove",4374260726),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_ws_set = (function __BEH__on_ws_set(ws){var map__11655 = cljs.core.deref.call(null,ws);var map__11655__$1 = ((cljs.core.seq_QMARK_.call(null,map__11655))?cljs.core.apply.call(null,cljs.core.hash_map,map__11655):map__11655);var files = cljs.core.get.call(null,map__11655__$1,new cljs.core.Keyword(null,"files","files",1111338473));var folders = cljs.core.get.call(null,map__11655__$1,new cljs.core.Keyword(null,"folders","folders",4625622327));return lt.object.merge_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.mapv.call(null,lt.objs.sidebar.workspace.root_file,files),new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.mapv.call(null,lt.objs.sidebar.workspace.root_folder,folders),new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939),cljs.core.PersistentHashSet.EMPTY], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-ws-set","lt.objs.sidebar.workspace/on-ws-set",2946355043),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_ws_set,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"set","set",1014018004),null], null), null));
lt.objs.sidebar.workspace.__BEH__track_and_watch_open_dirs = (function __BEH__track_and_watch_open_dirs(this$){lt.objs.workspace.watch_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939)], null),cljs.core.conj,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","track-and-watch-open-dirs","lt.objs.sidebar.workspace/track-and-watch-open-dirs",3304823039),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__track_and_watch_open_dirs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open!","open!",1119852169),null], null), null));
lt.objs.sidebar.workspace.__BEH__untrack_closed_dirs = (function __BEH__untrack_closed_dirs(this$){return lt.object.update_BANG_.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939)], null),cljs.core.disj,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","untrack-closed-dirs","lt.objs.sidebar.workspace/untrack-closed-dirs",3049036598),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__untrack_closed_dirs,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"close!","close!",3951350939),null], null), null));
lt.objs.sidebar.workspace.__BEH__watch_open_dirs_paths = (function __BEH__watch_open_dirs_paths(this$,cur){return cljs.core.concat.call(null,cur,new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.sidebar.workspace.tree)));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","watch-open-dirs-paths","lt.objs.sidebar.workspace/watch-open-dirs-paths",4677839158),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__watch_open_dirs_paths,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watch-paths+","watch-paths+",2265407277),null], null), null));
lt.objs.sidebar.workspace.find_by_path = (function find_by_path(path){return cljs.core.first.call(null,cljs.core.filter.call(null,(function (p1__11656_SHARP_){return cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,p1__11656_SHARP_)),path);
}),lt.object.by_tag.call(null,new cljs.core.Keyword(null,"tree-item","tree-item",999403348))));
});
lt.objs.sidebar.workspace.__BEH__watched__DOT__delete = (function __BEH__watched__DOT__delete(ws,path){var temp__4092__auto__ = lt.objs.sidebar.workspace.find_by_path.call(null,path);if(cljs.core.truth_(temp__4092__auto__))
{var child = temp__4092__auto__;var temp__4092__auto___11657__$1 = lt.objs.sidebar.workspace.find_by_path.call(null,lt.objs.files.parent.call(null,path));if(cljs.core.truth_(temp__4092__auto___11657__$1))
{var p_11658 = temp__4092__auto___11657__$1;lt.objs.sidebar.workspace.remove_child.call(null,p_11658,child);
} else
{}
return lt.object.destroy_BANG_.call(null,child);
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","watched.delete","lt.objs.sidebar.workspace/watched.delete",3594533591),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__watched__DOT__delete,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watched.delete","watched.delete",766354781),null], null), null));
lt.objs.sidebar.workspace.__BEH__watched__DOT__create = (function __BEH__watched__DOT__create(ws,path){if(cljs.core.truth_((function (){var and__3396__auto__ = lt.objs.sidebar.workspace.find_by_path.call(null,path);if(cljs.core.truth_(and__3396__auto__))
{return cljs.core.not.call(null,cljs.core.re_seq.call(null,lt.objs.files.ignore_pattern,lt.objs.files.basename.call(null,path)));
} else
{return and__3396__auto__;
}
})()))
{return null;
} else
{var temp__4092__auto__ = lt.objs.sidebar.workspace.find_by_path.call(null,lt.objs.files.parent.call(null,path));if(cljs.core.truth_(temp__4092__auto__))
{var parent = temp__4092__auto__;if(cljs.core.truth_(new cljs.core.Keyword(null,"realized?","realized?",4433874243).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,parent))))
{if(cljs.core.truth_(lt.objs.files.dir_QMARK_.call(null,path)))
{return lt.object.update_BANG_.call(null,parent,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),cljs.core.conj,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),path));
} else
{return lt.object.update_BANG_.call(null,parent,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),cljs.core.conj,lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),path));
}
} else
{return null;
}
} else
{return null;
}
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","watched.create","lt.objs.sidebar.workspace/watched.create",3712177670),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__watched__DOT__create,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watched.create","watched.create",749519022),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_drop = (function __BEH__on_drop(this$,e){try{var size = e.dataTransfer.files.length;var i = 0;while(true){
if((i < size))
{var path_11661 = (e.dataTransfer.files[i]).path;if(cljs.core.truth_(lt.objs.files.dir_QMARK_.call(null,path_11661)))
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.folder!","add.folder!",2151595160),path_11661);
} else
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"add.file!","add.file!",4237252106),path_11661);
}
{
var G__11662 = (i + 1);
i = G__11662;
continue;
}
} else
{return null;
}
break;
}
}catch (e11660){if((e11660 instanceof Error))
{var e__$1 = e11660;return cljs.core.println.call(null,e__$1);
} else
{if(new cljs.core.Keyword(null,"else","else",1017020587))
{throw e11660;
} else
{return null;
}
}
}});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-drop","lt.objs.sidebar.workspace/on-drop",2605653733),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_drop,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"drop","drop",1016996449),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_menu = (function __BEH__on_menu(this$,e){var items = cljs.core.sort_by.call(null,new cljs.core.Keyword(null,"order","order",1119910592),lt.object.raise_reduce.call(null,this$,new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),cljs.core.PersistentVector.EMPTY));return lt.objs.sidebar.workspace.show_menu.call(null,lt.objs.sidebar.workspace.menu.call(null,items),e.clientX,e.clientY);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-menu","lt.objs.sidebar.workspace/on-menu",2605385333),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu!","menu!",1117686292),null], null), null));
lt.objs.sidebar.workspace.__BEH__on_root_menu = (function __BEH__on_root_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"separator",new cljs.core.Keyword(null,"order","order",1119910592),9], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Remove from workspace",new cljs.core.Keyword(null,"order","order",1119910592),10,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.Keyword(null,"remove!","remove!",2105740175),this$);
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","on-root-menu","lt.objs.sidebar.workspace/on-root-menu",2948325830),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__on_root_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__subfile_menu = (function __BEH__subfile_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Rename",new cljs.core.Keyword(null,"order","order",1119910592),1,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete",new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"delete!","delete!",2564367176));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","subfile-menu","lt.objs.sidebar.workspace/subfile-menu",2571608754),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__subfile_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__subfolder_menu = (function __BEH__subfolder_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"New file",new cljs.core.Keyword(null,"order","order",1119910592),0,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"new-file!","new-file!",3612062506));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Rename",new cljs.core.Keyword(null,"order","order",1119910592),2,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"separator",new cljs.core.Keyword(null,"order","order",1119910592),3], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"New folder",new cljs.core.Keyword(null,"order","order",1119910592),4,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"new-folder!","new-folder!",2639811000));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete folder",new cljs.core.Keyword(null,"order","order",1119910592),5,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"delete!","delete!",2564367176));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"label","label",1116631654),"Refresh folder",new cljs.core.Keyword(null,"order","order",1119910592),6,new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"refresh!","refresh!",4597922840));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","subfolder-menu","lt.objs.sidebar.workspace/subfolder-menu",1537446372),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__subfolder_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__force_delete_file = (function __BEH__force_delete_file(this$){lt.objs.files.delete_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
lt.util.dom.remove.call(null,lt.object.__GT_content.call(null,this$));
lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.delete","watched.delete",766354781),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.destroy_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","force-delete-file","lt.objs.sidebar.workspace/force-delete-file",1104151110),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__force_delete_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342),null], null), null));
lt.objs.sidebar.workspace.__BEH__delete_file = (function __BEH__delete_file(this$){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Delete this file?",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("This will delete "),cljs.core.str(new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" from disk and cannot be undone.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete file",new cljs.core.Keyword(null,"action","action",3885920680),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342));
})], null),lt.objs.popup.cancel_button], null)], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","delete-file","lt.objs.sidebar.workspace/delete-file",2141449508),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__delete_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"delete!","delete!",2564367176),null], null), null));
lt.objs.sidebar.workspace.__BEH__force_delete_folder = (function __BEH__force_delete_folder(this$){lt.objs.files.delete_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
lt.util.dom.remove.call(null,lt.object.__GT_content.call(null,this$));
lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.delete","watched.delete",766354781),new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.destroy_BANG_.call(null,this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","force-delete-folder","lt.objs.sidebar.workspace/force-delete-folder",3126323540),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__force_delete_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342),null], null), null));
lt.objs.sidebar.workspace.__BEH__delete_folder = (function __BEH__delete_folder(this$){return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Delete this folder?",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("This will delete "),cljs.core.str(new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))),cljs.core.str(" from disk and cannot be undone.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete folder",new cljs.core.Keyword(null,"action","action",3885920680),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"force-delete!","force-delete!",2129098342));
})], null),lt.objs.popup.cancel_button], null)], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","delete-folder","lt.objs.sidebar.workspace/delete-folder",915989682),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__delete_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"delete!","delete!",2564367176),null], null), null));
lt.objs.sidebar.workspace.__BEH__new_file_BANG_ = (function __BEH__new_file_BANG_(this$){var ext = (function (){var temp__4090__auto__ = cljs.core.first.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));if(cljs.core.truth_(temp__4090__auto__))
{var ffile = temp__4090__auto__;var temp__4092__auto__ = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,ffile));if(cljs.core.truth_(temp__4092__auto__))
{var path = temp__4092__auto__;return lt.objs.files.ext.call(null,path);
} else
{return null;
}
} else
{return "txt";
}
})();var path = lt.objs.files.join.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),[cljs.core.str("untitled."),cljs.core.str(ext)].join(''));var final_path = lt.objs.files.next_available_name.call(null,path);var folder = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),final_path);lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"files","files",1111338473)], null),cljs.core.conj,folder);
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),true], null));
lt.objs.files.save.call(null,final_path,"");
lt.object.raise.call(null,lt.objs.opener.opener,new cljs.core.Keyword(null,"open!","open!",1119852169),final_path);
return lt.object.raise.call(null,folder,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","new-file!","lt.objs.sidebar.workspace/new-file!",539117946),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__new_file_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"new-file!","new-file!",3612062506),null], null), null));
lt.objs.sidebar.workspace.__BEH__new_folder_BANG_ = (function __BEH__new_folder_BANG_(this$){var path = lt.objs.files.join.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),"NewFolder");var final_path = lt.objs.files.next_available_name.call(null,path);var folder = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),final_path);lt.object.update_BANG_.call(null,this$,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"folders","folders",4625622327)], null),cljs.core.conj,folder);
lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"open?","open?",1119852199),true], null));
lt.objs.files.mkdir.call(null,final_path);
return lt.object.raise.call(null,folder,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","new-folder!","lt.objs.sidebar.workspace/new-folder!",3994412844),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__new_folder_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"new-folder!","new-folder!",2639811000),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_folder = (function __BEH__rename_folder(this$,n){var path = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var neue = lt.objs.files.join.call(null,lt.objs.files.parent.call(null,path),n);if(cljs.core._EQ_.call(null,path,neue))
{return null;
} else
{if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,neue)))
{return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"Folder already exists.",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("The folder "),cljs.core.str(neue),cljs.core.str(" already exists, you'll have to pick a different name.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"ok",new cljs.core.Keyword(null,"post-action","post-action",4039331701),(function (){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.cancel","rename.cancel",1388940956));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null)], null)], null));
} else
{var root_QMARK_ = lt.object.has_tag_QMARK_.call(null,this$,new cljs.core.Keyword(null,"workspace.folder.root","workspace.folder.root",4665807355));lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"path","path",1017337751),neue,new cljs.core.Keyword(null,"realized?","realized?",4433874243),false], null));
lt.objs.files.move_BANG_.call(null,path,neue);
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"refresh!","refresh!",4597922840));
if(cljs.core.truth_(root_QMARK_))
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"rename!","rename!",2106237973),path,neue);
} else
{return lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.rename","watched.rename",1167218416),path,neue);
}
}
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-folder","lt.objs.sidebar.workspace/rename-folder",3567769509),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_folder,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename","rename",4374276784),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_file = (function __BEH__rename_file(this$,n){var path = new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$));var neue = lt.objs.files.join.call(null,lt.objs.files.parent.call(null,path),n);if(cljs.core._EQ_.call(null,path,neue))
{return null;
} else
{if(cljs.core.truth_(lt.objs.files.exists_QMARK_.call(null,neue)))
{return lt.objs.popup.popup_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"header","header",4087600639),"File already exists.",new cljs.core.Keyword(null,"body","body",1016933652),[cljs.core.str("The file"),cljs.core.str(neue),cljs.core.str(" already exists, you'll have to pick a different name.")].join(''),new cljs.core.Keyword(null,"buttons","buttons",1255256819),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"ok",new cljs.core.Keyword(null,"post-action","post-action",4039331701),(function (){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.cancel","rename.cancel",1388940956));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522));
})], null)], null)], null));
} else
{if(cljs.core.truth_((function (){var or__3408__auto__ = lt.object.has_tag_QMARK_.call(null,this$,new cljs.core.Keyword(null,"workspace.folder.root","workspace.folder.root",4665807355));if(cljs.core.truth_(or__3408__auto__))
{return or__3408__auto__;
} else
{return lt.object.has_tag_QMARK_.call(null,this$,new cljs.core.Keyword(null,"workspace.file.root","workspace.file.root",532025197));
}
})()))
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"rename!","rename!",2106237973),path,neue);
} else
{lt.object.raise.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"watched.rename","watched.rename",1167218416),path,neue);
}
lt.objs.files.move_BANG_.call(null,path,neue);
return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),neue], null));
}
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-file","lt.objs.sidebar.workspace/rename-file",3270197399),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_file,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename","rename",4374276784),null], null), null));
lt.objs.sidebar.workspace.__BEH__start_rename = (function __BEH__start_rename(this$){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"renaming?","renaming?",2774795926),true], null));
var input = lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",1114262332),lt.object.__GT_content.call(null,this$));var len = cljs.core.count.call(null,lt.objs.files.without_ext.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))));lt.util.dom.focus.call(null,input);
return lt.util.dom.selection.call(null,input,0,len,"forward");
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","start-rename","lt.objs.sidebar.workspace/start-rename",2390201321),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__start_rename,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"start-rename!","start-rename!",3285764522),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_focus = (function __BEH__rename_focus(this$){return lt.objs.context.in_BANG_.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288),this$);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-focus","lt.objs.sidebar.workspace/rename-focus",2321367913),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_focus,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.focus","rename.focus",4215768474),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_submit = (function __BEH__rename_submit(this$){var val = lt.util.dom.val.call(null,lt.util.dom.$.call(null,new cljs.core.Keyword(null,"input","input",1114262332),lt.object.__GT_content.call(null,this$)));lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"renaming?","renaming?",2774795926),false], null));
return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename","rename",4374276784),val);
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-submit","lt.objs.sidebar.workspace/rename-submit",3408558955),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_submit,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.submit!","rename.submit!",1632100299),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_blur = (function __BEH__rename_blur(this$){lt.objs.context.out_BANG_.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288));
if(cljs.core.truth_(new cljs.core.Keyword(null,"renaming?","renaming?",2774795926).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.submit!","rename.submit!",1632100299));
} else
{return null;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-blur","lt.objs.sidebar.workspace/rename-blur",3270310748),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_blur,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.blur","rename.blur",839974025),null], null), null));
lt.objs.sidebar.workspace.__BEH__rename_cancel = (function __BEH__rename_cancel(this$){return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"renaming?","renaming?",2774795926),false], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","rename-cancel","lt.objs.sidebar.workspace/rename-cancel",1720510665),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__rename_cancel,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"rename.cancel!","rename.cancel!",4050107817),null], null), null));
lt.objs.sidebar.workspace.__BEH__destroy_sub_tree = (function __BEH__destroy_sub_tree(this$){var seq__11667 = cljs.core.seq.call(null,cljs.core.concat.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)),new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))));var chunk__11668 = null;var count__11669 = 0;var i__11670 = 0;while(true){
if((i__11670 < count__11669))
{var f = cljs.core._nth.call(null,chunk__11668,i__11670);lt.object.destroy_BANG_.call(null,f);
{
var G__11671 = seq__11667;
var G__11672 = chunk__11668;
var G__11673 = count__11669;
var G__11674 = (i__11670 + 1);
seq__11667 = G__11671;
chunk__11668 = G__11672;
count__11669 = G__11673;
i__11670 = G__11674;
continue;
}
} else
{var temp__4092__auto__ = cljs.core.seq.call(null,seq__11667);if(temp__4092__auto__)
{var seq__11667__$1 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11667__$1))
{var c__4150__auto__ = cljs.core.chunk_first.call(null,seq__11667__$1);{
var G__11675 = cljs.core.chunk_rest.call(null,seq__11667__$1);
var G__11676 = c__4150__auto__;
var G__11677 = cljs.core.count.call(null,c__4150__auto__);
var G__11678 = 0;
seq__11667 = G__11675;
chunk__11668 = G__11676;
count__11669 = G__11677;
i__11670 = G__11678;
continue;
}
} else
{var f = cljs.core.first.call(null,seq__11667__$1);lt.object.destroy_BANG_.call(null,f);
{
var G__11679 = cljs.core.next.call(null,seq__11667__$1);
var G__11680 = null;
var G__11681 = 0;
var G__11682 = 0;
seq__11667 = G__11679;
chunk__11668 = G__11680;
count__11669 = G__11681;
i__11670 = G__11682;
continue;
}
}
} else
{return null;
}
}
break;
}
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","destroy-sub-tree","lt.objs.sidebar.workspace/destroy-sub-tree",2888041796),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__destroy_sub_tree,new cljs.core.Keyword(null,"trigger","trigger",4248979754),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"destroy","destroy",2571277164),null], null), null));
lt.objs.sidebar.workspace.file_toggle = (function file_toggle(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",1013904354),crate.binding.bound.call(null,this$,(function (){return lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
}))], null));var seq__11689_11695 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"dblclick","dblclick",3463991820),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"dblopen!","dblopen!",3475189659));
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"open!","open!",1119852169));
})], null)));var chunk__11690_11696 = null;var count__11691_11697 = 0;var i__11692_11698 = 0;while(true){
if((i__11692_11698 < count__11691_11697))
{var vec__11693_11699 = cljs.core._nth.call(null,chunk__11690_11696,i__11692_11698);var ev__4336__auto___11700 = cljs.core.nth.call(null,vec__11693_11699,0,null);var func__4337__auto___11701 = cljs.core.nth.call(null,vec__11693_11699,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11700,func__4337__auto___11701);
{
var G__11702 = seq__11689_11695;
var G__11703 = chunk__11690_11696;
var G__11704 = count__11691_11697;
var G__11705 = (i__11692_11698 + 1);
seq__11689_11695 = G__11702;
chunk__11690_11696 = G__11703;
count__11691_11697 = G__11704;
i__11692_11698 = G__11705;
continue;
}
} else
{var temp__4092__auto___11706 = cljs.core.seq.call(null,seq__11689_11695);if(temp__4092__auto___11706)
{var seq__11689_11707__$1 = temp__4092__auto___11706;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11689_11707__$1))
{var c__4150__auto___11708 = cljs.core.chunk_first.call(null,seq__11689_11707__$1);{
var G__11709 = cljs.core.chunk_rest.call(null,seq__11689_11707__$1);
var G__11710 = c__4150__auto___11708;
var G__11711 = cljs.core.count.call(null,c__4150__auto___11708);
var G__11712 = 0;
seq__11689_11695 = G__11709;
chunk__11690_11696 = G__11710;
count__11691_11697 = G__11711;
i__11692_11698 = G__11712;
continue;
}
} else
{var vec__11694_11713 = cljs.core.first.call(null,seq__11689_11707__$1);var ev__4336__auto___11714 = cljs.core.nth.call(null,vec__11694_11713,0,null);var func__4337__auto___11715 = cljs.core.nth.call(null,vec__11694_11713,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11714,func__4337__auto___11715);
{
var G__11716 = cljs.core.next.call(null,seq__11689_11707__$1);
var G__11717 = null;
var G__11718 = 0;
var G__11719 = 0;
seq__11689_11695 = G__11716;
chunk__11690_11696 = G__11717;
count__11691_11697 = G__11718;
i__11692_11698 = G__11719;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.folder_toggle = (function folder_toggle(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p.folder","p.folder",3836630814),crate.binding.bound.call(null,this$,(function (){return [cljs.core.str(lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))),cljs.core.str(lt.objs.files.separator)].join('');
}))], null));var seq__11726_11732 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (){if(cljs.core.not.call(null,new cljs.core.Keyword(null,"open?","open?",1119852199).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$))))
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"open!","open!",1119852169));
} else
{return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"close!","close!",3951350939));
}
})], null)));var chunk__11727_11733 = null;var count__11728_11734 = 0;var i__11729_11735 = 0;while(true){
if((i__11729_11735 < count__11728_11734))
{var vec__11730_11736 = cljs.core._nth.call(null,chunk__11727_11733,i__11729_11735);var ev__4336__auto___11737 = cljs.core.nth.call(null,vec__11730_11736,0,null);var func__4337__auto___11738 = cljs.core.nth.call(null,vec__11730_11736,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11737,func__4337__auto___11738);
{
var G__11739 = seq__11726_11732;
var G__11740 = chunk__11727_11733;
var G__11741 = count__11728_11734;
var G__11742 = (i__11729_11735 + 1);
seq__11726_11732 = G__11739;
chunk__11727_11733 = G__11740;
count__11728_11734 = G__11741;
i__11729_11735 = G__11742;
continue;
}
} else
{var temp__4092__auto___11743 = cljs.core.seq.call(null,seq__11726_11732);if(temp__4092__auto___11743)
{var seq__11726_11744__$1 = temp__4092__auto___11743;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11726_11744__$1))
{var c__4150__auto___11745 = cljs.core.chunk_first.call(null,seq__11726_11744__$1);{
var G__11746 = cljs.core.chunk_rest.call(null,seq__11726_11744__$1);
var G__11747 = c__4150__auto___11745;
var G__11748 = cljs.core.count.call(null,c__4150__auto___11745);
var G__11749 = 0;
seq__11726_11732 = G__11746;
chunk__11727_11733 = G__11747;
count__11728_11734 = G__11748;
i__11729_11735 = G__11749;
continue;
}
} else
{var vec__11731_11750 = cljs.core.first.call(null,seq__11726_11744__$1);var ev__4336__auto___11751 = cljs.core.nth.call(null,vec__11731_11750,0,null);var func__4337__auto___11752 = cljs.core.nth.call(null,vec__11731_11750,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11751,func__4337__auto___11752);
{
var G__11753 = cljs.core.next.call(null,seq__11726_11744__$1);
var G__11754 = null;
var G__11755 = 0;
var G__11756 = 0;
seq__11726_11732 = G__11753;
chunk__11727_11733 = G__11754;
count__11728_11734 = G__11755;
i__11729_11735 = G__11756;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.sub_folders = (function sub_folders(p__11759){var map__11775 = p__11759;var map__11775__$1 = ((cljs.core.seq_QMARK_.call(null,map__11775))?cljs.core.apply.call(null,cljs.core.hash_map,map__11775):map__11775);var root_QMARK_ = cljs.core.get.call(null,map__11775__$1,new cljs.core.Keyword(null,"root?","root?",1122602767));var path = cljs.core.get.call(null,map__11775__$1,new cljs.core.Keyword(null,"path","path",1017337751));var open_QMARK_ = cljs.core.get.call(null,map__11775__$1,new cljs.core.Keyword(null,"open?","open?",1119852199));var files = cljs.core.get.call(null,map__11775__$1,new cljs.core.Keyword(null,"files","files",1111338473));var folders = cljs.core.get.call(null,map__11775__$1,new cljs.core.Keyword(null,"folders","folders",4625622327));var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),[cljs.core.str((cljs.core.truth_(root_QMARK_)?null:"sub ")),cljs.core.str((cljs.core.truth_(open_QMARK_)?"opened":null))].join('')], null),(function (){var iter__4119__auto__ = (function iter__11776(s__11777){return (new cljs.core.LazySeq(null,(function (){var s__11777__$1 = s__11777;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11777__$1);if(temp__4092__auto__)
{var s__11777__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11777__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11777__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11779 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11778 = 0;while(true){
if((i__11778 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__11778);cljs.core.chunk_append.call(null,b__11779,lt.object.__GT_content.call(null,f));
{
var G__11790 = (i__11778 + 1);
i__11778 = G__11790;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11779),iter__11776.call(null,cljs.core.chunk_rest.call(null,s__11777__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11779),null);
}
} else
{var f = cljs.core.first.call(null,s__11777__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,f),iter__11776.call(null,cljs.core.rest.call(null,s__11777__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.sort_by.call(null,((function (iter__4119__auto__){
return (function (p1__11757_SHARP_){return clojure.string.lower_case.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,p1__11757_SHARP_))));
});})(iter__4119__auto__))
,folders));
})(),(function (){var iter__4119__auto__ = (function iter__11780(s__11781){return (new cljs.core.LazySeq(null,(function (){var s__11781__$1 = s__11781;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11781__$1);if(temp__4092__auto__)
{var s__11781__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11781__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11781__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11783 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11782 = 0;while(true){
if((i__11782 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__11782);cljs.core.chunk_append.call(null,b__11783,lt.object.__GT_content.call(null,f));
{
var G__11791 = (i__11782 + 1);
i__11782 = G__11791;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11783),iter__11780.call(null,cljs.core.chunk_rest.call(null,s__11781__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11783),null);
}
} else
{var f = cljs.core.first.call(null,s__11781__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,f),iter__11780.call(null,cljs.core.rest.call(null,s__11781__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,cljs.core.sort_by.call(null,((function (iter__4119__auto__){
return (function (p1__11758_SHARP_){return clojure.string.lower_case.call(null,lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,p1__11758_SHARP_))));
});})(iter__4119__auto__))
,files));
})()], null));var seq__11784_11792 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__11785_11793 = null;var count__11786_11794 = 0;var i__11787_11795 = 0;while(true){
if((i__11787_11795 < count__11786_11794))
{var vec__11788_11796 = cljs.core._nth.call(null,chunk__11785_11793,i__11787_11795);var ev__4336__auto___11797 = cljs.core.nth.call(null,vec__11788_11796,0,null);var func__4337__auto___11798 = cljs.core.nth.call(null,vec__11788_11796,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11797,func__4337__auto___11798);
{
var G__11799 = seq__11784_11792;
var G__11800 = chunk__11785_11793;
var G__11801 = count__11786_11794;
var G__11802 = (i__11787_11795 + 1);
seq__11784_11792 = G__11799;
chunk__11785_11793 = G__11800;
count__11786_11794 = G__11801;
i__11787_11795 = G__11802;
continue;
}
} else
{var temp__4092__auto___11803 = cljs.core.seq.call(null,seq__11784_11792);if(temp__4092__auto___11803)
{var seq__11784_11804__$1 = temp__4092__auto___11803;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11784_11804__$1))
{var c__4150__auto___11805 = cljs.core.chunk_first.call(null,seq__11784_11804__$1);{
var G__11806 = cljs.core.chunk_rest.call(null,seq__11784_11804__$1);
var G__11807 = c__4150__auto___11805;
var G__11808 = cljs.core.count.call(null,c__4150__auto___11805);
var G__11809 = 0;
seq__11784_11792 = G__11806;
chunk__11785_11793 = G__11807;
count__11786_11794 = G__11808;
i__11787_11795 = G__11809;
continue;
}
} else
{var vec__11789_11810 = cljs.core.first.call(null,seq__11784_11804__$1);var ev__4336__auto___11811 = cljs.core.nth.call(null,vec__11789_11810,0,null);var func__4337__auto___11812 = cljs.core.nth.call(null,vec__11789_11810,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11811,func__4337__auto___11812);
{
var G__11813 = cljs.core.next.call(null,seq__11784_11804__$1);
var G__11814 = null;
var G__11815 = 0;
var G__11816 = 0;
seq__11784_11792 = G__11813;
chunk__11785_11793 = G__11814;
count__11786_11794 = G__11815;
i__11787_11795 = G__11816;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.rename_input = (function rename_input(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input.rename","input.rename",1571488084),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1017479852),"text",new cljs.core.Keyword(null,"value","value",1125876963),lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))], null)], null));var seq__11823_11829 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"focus","focus",1111509066),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.focus","rename.focus",4215768474));
}),new cljs.core.Keyword(null,"blur","blur",1016931289),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"rename.blur","rename.blur",839974025));
})], null)));var chunk__11824_11830 = null;var count__11825_11831 = 0;var i__11826_11832 = 0;while(true){
if((i__11826_11832 < count__11825_11831))
{var vec__11827_11833 = cljs.core._nth.call(null,chunk__11824_11830,i__11826_11832);var ev__4336__auto___11834 = cljs.core.nth.call(null,vec__11827_11833,0,null);var func__4337__auto___11835 = cljs.core.nth.call(null,vec__11827_11833,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11834,func__4337__auto___11835);
{
var G__11836 = seq__11823_11829;
var G__11837 = chunk__11824_11830;
var G__11838 = count__11825_11831;
var G__11839 = (i__11826_11832 + 1);
seq__11823_11829 = G__11836;
chunk__11824_11830 = G__11837;
count__11825_11831 = G__11838;
i__11826_11832 = G__11839;
continue;
}
} else
{var temp__4092__auto___11840 = cljs.core.seq.call(null,seq__11823_11829);if(temp__4092__auto___11840)
{var seq__11823_11841__$1 = temp__4092__auto___11840;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11823_11841__$1))
{var c__4150__auto___11842 = cljs.core.chunk_first.call(null,seq__11823_11841__$1);{
var G__11843 = cljs.core.chunk_rest.call(null,seq__11823_11841__$1);
var G__11844 = c__4150__auto___11842;
var G__11845 = cljs.core.count.call(null,c__4150__auto___11842);
var G__11846 = 0;
seq__11823_11829 = G__11843;
chunk__11824_11830 = G__11844;
count__11825_11831 = G__11845;
i__11826_11832 = G__11846;
continue;
}
} else
{var vec__11828_11847 = cljs.core.first.call(null,seq__11823_11841__$1);var ev__4336__auto___11848 = cljs.core.nth.call(null,vec__11828_11847,0,null);var func__4337__auto___11849 = cljs.core.nth.call(null,vec__11828_11847,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11848,func__4337__auto___11849);
{
var G__11850 = cljs.core.next.call(null,seq__11823_11841__$1);
var G__11851 = null;
var G__11852 = 0;
var G__11853 = 0;
seq__11823_11829 = G__11850;
chunk__11824_11830 = G__11851;
count__11825_11831 = G__11852;
i__11826_11832 = G__11853;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.renameable = (function renameable(this$,cur,content){if(cljs.core.truth_(cur))
{return lt.objs.sidebar.workspace.rename_input.call(null,this$);
} else
{return content;
}
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.file","lt.objs.sidebar.workspace/workspace.file",4597702653),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"tree-item","tree-item",999403348),null,new cljs.core.Keyword(null,"workspace.file","workspace.file",1768213159),null], null), null),new cljs.core.Keyword(null,"path","path",1017337751),"",new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,path){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),path], null));
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,(function (p1__11854_SHARP_){if(cljs.core.truth_(new cljs.core.Keyword(null,"renaming?","renaming?",2774795926).cljs$core$IFn$_invoke$arity$1(p1__11854_SHARP_)))
{return "renaming";
} else
{return "";
}
}))], null),lt.objs.sidebar.workspace.rename_input.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tree-item","div.tree-item",4651075127),lt.objs.sidebar.workspace.file_toggle.call(null,this$)], null)], null);
}));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.folder","lt.objs.sidebar.workspace/workspace.folder",1951235275),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"tree-item","tree-item",999403348),null,new cljs.core.Keyword(null,"workspace.folder","workspace.folder",4355811161),null], null), null),new cljs.core.Keyword(null,"path","path",1017337751),"",new cljs.core.Keyword(null,"open?","open?",1119852199),false,new cljs.core.Keyword(null,"realized?","realized?",4433874243),false,new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,path){lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"path","path",1017337751),path], null));
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,(function (p1__11855_SHARP_){if(cljs.core.truth_(new cljs.core.Keyword(null,"renaming?","renaming?",2774795926).cljs$core$IFn$_invoke$arity$1(p1__11855_SHARP_)))
{return "renaming";
} else
{return "";
}
}))], null),lt.objs.sidebar.workspace.rename_input.call(null,this$),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tree-item","div.tree-item",4651075127),(cljs.core.truth_(path)?lt.objs.sidebar.workspace.folder_toggle.call(null,this$):null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),crate.binding.bound.call(null,this$,lt.objs.sidebar.workspace.sub_folders)], null)], null)], null);
}));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.root","lt.objs.sidebar.workspace/workspace.root",4597214311),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"workspace.root","workspace.root",1768576525),null], null), null),new cljs.core.Keyword(null,"root?","root?",1122602767),true,new cljs.core.Keyword(null,"open-dirs","open-dirs",2513590939),cljs.core.PersistentHashSet.EMPTY,new cljs.core.Keyword(null,"files","files",1111338473),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"folders","folders",4625622327),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"open?","open?",1119852199),true,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tree-root","div.tree-root",4651338758),crate.binding.bound.call(null,this$,lt.objs.sidebar.workspace.sub_folders)], null);
}));
lt.objs.sidebar.workspace.tree = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.root","lt.objs.sidebar.workspace/workspace.root",4597214311));
lt.objs.sidebar.workspace.input = (function input(type,event){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",1114262332),new cljs.core.PersistentArrayMap.fromArray([new cljs.core.Keyword(null,"type","type",1017479852),"file",type,true,new cljs.core.Keyword(null,"style","style",1123684643),"display:none;"], true, false)], null));var seq__11862_11868 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"change","change",3947235106),(function (){var me = this;if(cljs.core.empty_QMARK_.call(null,lt.util.dom.val.call(null,me)))
{return null;
} else
{return lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,event,lt.util.dom.val.call(null,me));
}
})], null)));var chunk__11863_11869 = null;var count__11864_11870 = 0;var i__11865_11871 = 0;while(true){
if((i__11865_11871 < count__11864_11870))
{var vec__11866_11872 = cljs.core._nth.call(null,chunk__11863_11869,i__11865_11871);var ev__4336__auto___11873 = cljs.core.nth.call(null,vec__11866_11872,0,null);var func__4337__auto___11874 = cljs.core.nth.call(null,vec__11866_11872,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11873,func__4337__auto___11874);
{
var G__11875 = seq__11862_11868;
var G__11876 = chunk__11863_11869;
var G__11877 = count__11864_11870;
var G__11878 = (i__11865_11871 + 1);
seq__11862_11868 = G__11875;
chunk__11863_11869 = G__11876;
count__11864_11870 = G__11877;
i__11865_11871 = G__11878;
continue;
}
} else
{var temp__4092__auto___11879 = cljs.core.seq.call(null,seq__11862_11868);if(temp__4092__auto___11879)
{var seq__11862_11880__$1 = temp__4092__auto___11879;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11862_11880__$1))
{var c__4150__auto___11881 = cljs.core.chunk_first.call(null,seq__11862_11880__$1);{
var G__11882 = cljs.core.chunk_rest.call(null,seq__11862_11880__$1);
var G__11883 = c__4150__auto___11881;
var G__11884 = cljs.core.count.call(null,c__4150__auto___11881);
var G__11885 = 0;
seq__11862_11868 = G__11882;
chunk__11863_11869 = G__11883;
count__11864_11870 = G__11884;
i__11865_11871 = G__11885;
continue;
}
} else
{var vec__11867_11886 = cljs.core.first.call(null,seq__11862_11880__$1);var ev__4336__auto___11887 = cljs.core.nth.call(null,vec__11867_11886,0,null);var func__4337__auto___11888 = cljs.core.nth.call(null,vec__11867_11886,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11887,func__4337__auto___11888);
{
var G__11889 = cljs.core.next.call(null,seq__11862_11880__$1);
var G__11890 = null;
var G__11891 = 0;
var G__11892 = 0;
seq__11862_11868 = G__11889;
chunk__11863_11869 = G__11890;
count__11864_11870 = G__11891;
i__11865_11871 = G__11892;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.open_folder = (function open_folder(){lt.objs.sidebar.workspace.active_dialog = lt.objs.sidebar.workspace.input.call(null,new cljs.core.Keyword(null,"nwdirectory","nwdirectory",2339862070),new cljs.core.Keyword(null,"workspace.add.folder!","workspace.add.folder!",1443047615));
return lt.util.dom.trigger.call(null,lt.objs.sidebar.workspace.active_dialog,new cljs.core.Keyword(null,"click","click",1108654330));
});
lt.objs.sidebar.workspace.open_file = (function open_file(){lt.objs.sidebar.workspace.active_dialog = lt.objs.sidebar.workspace.input.call(null,new cljs.core.Keyword(null,"blah","blah",1016930659),new cljs.core.Keyword(null,"workspace.add.file!","workspace.add.file!",821993457));
return lt.util.dom.trigger.call(null,lt.objs.sidebar.workspace.active_dialog,new cljs.core.Keyword(null,"click","click",1108654330));
});
lt.objs.sidebar.workspace.button = (function button(name,action){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),name], null));var seq__11899_11905 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),action], null)));var chunk__11900_11906 = null;var count__11901_11907 = 0;var i__11902_11908 = 0;while(true){
if((i__11902_11908 < count__11901_11907))
{var vec__11903_11909 = cljs.core._nth.call(null,chunk__11900_11906,i__11902_11908);var ev__4336__auto___11910 = cljs.core.nth.call(null,vec__11903_11909,0,null);var func__4337__auto___11911 = cljs.core.nth.call(null,vec__11903_11909,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11910,func__4337__auto___11911);
{
var G__11912 = seq__11899_11905;
var G__11913 = chunk__11900_11906;
var G__11914 = count__11901_11907;
var G__11915 = (i__11902_11908 + 1);
seq__11899_11905 = G__11912;
chunk__11900_11906 = G__11913;
count__11901_11907 = G__11914;
i__11902_11908 = G__11915;
continue;
}
} else
{var temp__4092__auto___11916 = cljs.core.seq.call(null,seq__11899_11905);if(temp__4092__auto___11916)
{var seq__11899_11917__$1 = temp__4092__auto___11916;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11899_11917__$1))
{var c__4150__auto___11918 = cljs.core.chunk_first.call(null,seq__11899_11917__$1);{
var G__11919 = cljs.core.chunk_rest.call(null,seq__11899_11917__$1);
var G__11920 = c__4150__auto___11918;
var G__11921 = cljs.core.count.call(null,c__4150__auto___11918);
var G__11922 = 0;
seq__11899_11905 = G__11919;
chunk__11900_11906 = G__11920;
count__11901_11907 = G__11921;
i__11902_11908 = G__11922;
continue;
}
} else
{var vec__11904_11923 = cljs.core.first.call(null,seq__11899_11917__$1);var ev__4336__auto___11924 = cljs.core.nth.call(null,vec__11904_11923,0,null);var func__4337__auto___11925 = cljs.core.nth.call(null,vec__11904_11923,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11924,func__4337__auto___11925);
{
var G__11926 = cljs.core.next.call(null,seq__11899_11917__$1);
var G__11927 = null;
var G__11928 = 0;
var G__11929 = 0;
seq__11899_11905 = G__11926;
chunk__11900_11906 = G__11927;
count__11901_11907 = G__11928;
i__11902_11908 = G__11929;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.recent = (function recent(this$){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"recent!","recent!",2096199832));
});
lt.objs.sidebar.workspace.recents_item = (function recents_item(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.folders","ul.folders",4036689120),(function (){var iter__4119__auto__ = (function iter__11944(s__11945){return (new cljs.core.LazySeq(null,(function (){var s__11945__$1 = s__11945;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11945__$1);if(temp__4092__auto__)
{var s__11945__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11945__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11945__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11947 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11946 = 0;while(true){
if((i__11946 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__11946);cljs.core.chunk_append.call(null,b__11947,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f),lt.objs.files.separator], null));
{
var G__11958 = (i__11946 + 1);
i__11946 = G__11958;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11947),iter__11944.call(null,cljs.core.chunk_rest.call(null,s__11945__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11947),null);
}
} else
{var f = cljs.core.first.call(null,s__11945__$2);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f),lt.objs.files.separator], null),iter__11944.call(null,cljs.core.rest.call(null,s__11945__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,new cljs.core.Keyword(null,"folders","folders",4625622327).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
})()], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.files","ul.files",1539775442),(function (){var iter__4119__auto__ = (function iter__11948(s__11949){return (new cljs.core.LazySeq(null,(function (){var s__11949__$1 = s__11949;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11949__$1);if(temp__4092__auto__)
{var s__11949__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11949__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11949__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11951 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11950 = 0;while(true){
if((i__11950 < size__4118__auto__))
{var f = cljs.core._nth.call(null,c__4117__auto__,i__11950);cljs.core.chunk_append.call(null,b__11951,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f)], null));
{
var G__11959 = (i__11950 + 1);
i__11950 = G__11959;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11951),iter__11948.call(null,cljs.core.chunk_rest.call(null,s__11949__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11951),null);
}
} else
{var f = cljs.core.first.call(null,s__11949__$2);return cljs.core.cons.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",1013907695),lt.objs.files.basename.call(null,f)], null),iter__11948.call(null,cljs.core.rest.call(null,s__11949__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,new cljs.core.Keyword(null,"files","files",1111338473).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
})()], null)], null));var seq__11952_11960 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
lt.util.dom.prevent.call(null,e);
return lt.util.dom.stop_propagation.call(null,e);
}),new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"select!","select!",2992004631));
})], null)));var chunk__11953_11961 = null;var count__11954_11962 = 0;var i__11955_11963 = 0;while(true){
if((i__11955_11963 < count__11954_11962))
{var vec__11956_11964 = cljs.core._nth.call(null,chunk__11953_11961,i__11955_11963);var ev__4336__auto___11965 = cljs.core.nth.call(null,vec__11956_11964,0,null);var func__4337__auto___11966 = cljs.core.nth.call(null,vec__11956_11964,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11965,func__4337__auto___11966);
{
var G__11967 = seq__11952_11960;
var G__11968 = chunk__11953_11961;
var G__11969 = count__11954_11962;
var G__11970 = (i__11955_11963 + 1);
seq__11952_11960 = G__11967;
chunk__11953_11961 = G__11968;
count__11954_11962 = G__11969;
i__11955_11963 = G__11970;
continue;
}
} else
{var temp__4092__auto___11971 = cljs.core.seq.call(null,seq__11952_11960);if(temp__4092__auto___11971)
{var seq__11952_11972__$1 = temp__4092__auto___11971;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11952_11972__$1))
{var c__4150__auto___11973 = cljs.core.chunk_first.call(null,seq__11952_11972__$1);{
var G__11974 = cljs.core.chunk_rest.call(null,seq__11952_11972__$1);
var G__11975 = c__4150__auto___11973;
var G__11976 = cljs.core.count.call(null,c__4150__auto___11973);
var G__11977 = 0;
seq__11952_11960 = G__11974;
chunk__11953_11961 = G__11975;
count__11954_11962 = G__11976;
i__11955_11963 = G__11977;
continue;
}
} else
{var vec__11957_11978 = cljs.core.first.call(null,seq__11952_11972__$1);var ev__4336__auto___11979 = cljs.core.nth.call(null,vec__11957_11978,0,null);var func__4337__auto___11980 = cljs.core.nth.call(null,vec__11957_11978,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___11979,func__4337__auto___11980);
{
var G__11981 = cljs.core.next.call(null,seq__11952_11972__$1);
var G__11982 = null;
var G__11983 = 0;
var G__11984 = 0;
seq__11952_11960 = G__11981;
chunk__11953_11961 = G__11982;
count__11954_11962 = G__11983;
i__11955_11963 = G__11984;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.recents = (function recents(this$,rs){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),lt.objs.sidebar.workspace.back_button.call(null,this$),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",1013907977),(function (){var iter__4119__auto__ = (function iter__11995(s__11996){return (new cljs.core.LazySeq(null,(function (){var s__11996__$1 = s__11996;while(true){
var temp__4092__auto__ = cljs.core.seq.call(null,s__11996__$1);if(temp__4092__auto__)
{var s__11996__$2 = temp__4092__auto__;if(cljs.core.chunked_seq_QMARK_.call(null,s__11996__$2))
{var c__4117__auto__ = cljs.core.chunk_first.call(null,s__11996__$2);var size__4118__auto__ = cljs.core.count.call(null,c__4117__auto__);var b__11998 = cljs.core.chunk_buffer.call(null,size__4118__auto__);if((function (){var i__11997 = 0;while(true){
if((i__11997 < size__4118__auto__))
{var r = cljs.core._nth.call(null,c__4117__auto__,i__11997);cljs.core.chunk_append.call(null,b__11998,lt.object.__GT_content.call(null,r));
{
var G__12005 = (i__11997 + 1);
i__11997 = G__12005;
continue;
}
} else
{return true;
}
break;
}
})())
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11998),iter__11995.call(null,cljs.core.chunk_rest.call(null,s__11996__$2)));
} else
{return cljs.core.chunk_cons.call(null,cljs.core.chunk.call(null,b__11998),null);
}
} else
{var r = cljs.core.first.call(null,s__11996__$2);return cljs.core.cons.call(null,lt.object.__GT_content.call(null,r),iter__11995.call(null,cljs.core.rest.call(null,s__11996__$2)));
}
} else
{return null;
}
break;
}
}),null,null));
});return iter__4119__auto__.call(null,rs);
})()], null)], null));var seq__11999_12006 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,cljs.core.PersistentVector.EMPTY));var chunk__12000_12007 = null;var count__12001_12008 = 0;var i__12002_12009 = 0;while(true){
if((i__12002_12009 < count__12001_12008))
{var vec__12003_12010 = cljs.core._nth.call(null,chunk__12000_12007,i__12002_12009);var ev__4336__auto___12011 = cljs.core.nth.call(null,vec__12003_12010,0,null);var func__4337__auto___12012 = cljs.core.nth.call(null,vec__12003_12010,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12011,func__4337__auto___12012);
{
var G__12013 = seq__11999_12006;
var G__12014 = chunk__12000_12007;
var G__12015 = count__12001_12008;
var G__12016 = (i__12002_12009 + 1);
seq__11999_12006 = G__12013;
chunk__12000_12007 = G__12014;
count__12001_12008 = G__12015;
i__12002_12009 = G__12016;
continue;
}
} else
{var temp__4092__auto___12017 = cljs.core.seq.call(null,seq__11999_12006);if(temp__4092__auto___12017)
{var seq__11999_12018__$1 = temp__4092__auto___12017;if(cljs.core.chunked_seq_QMARK_.call(null,seq__11999_12018__$1))
{var c__4150__auto___12019 = cljs.core.chunk_first.call(null,seq__11999_12018__$1);{
var G__12020 = cljs.core.chunk_rest.call(null,seq__11999_12018__$1);
var G__12021 = c__4150__auto___12019;
var G__12022 = cljs.core.count.call(null,c__4150__auto___12019);
var G__12023 = 0;
seq__11999_12006 = G__12020;
chunk__12000_12007 = G__12021;
count__12001_12008 = G__12022;
i__12002_12009 = G__12023;
continue;
}
} else
{var vec__12004_12024 = cljs.core.first.call(null,seq__11999_12018__$1);var ev__4336__auto___12025 = cljs.core.nth.call(null,vec__12004_12024,0,null);var func__4337__auto___12026 = cljs.core.nth.call(null,vec__12004_12024,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12025,func__4337__auto___12026);
{
var G__12027 = cljs.core.next.call(null,seq__11999_12018__$1);
var G__12028 = null;
var G__12029 = 0;
var G__12030 = 0;
seq__11999_12006 = G__12027;
chunk__12000_12007 = G__12028;
count__12001_12008 = G__12029;
i__12002_12009 = G__12030;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.back_button = (function back_button(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",1013907516),"Select a workspace"], null));var seq__12037_12043 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"tree!","tree!",1124529077));
})], null)));var chunk__12038_12044 = null;var count__12039_12045 = 0;var i__12040_12046 = 0;while(true){
if((i__12040_12046 < count__12039_12045))
{var vec__12041_12047 = cljs.core._nth.call(null,chunk__12038_12044,i__12040_12046);var ev__4336__auto___12048 = cljs.core.nth.call(null,vec__12041_12047,0,null);var func__4337__auto___12049 = cljs.core.nth.call(null,vec__12041_12047,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12048,func__4337__auto___12049);
{
var G__12050 = seq__12037_12043;
var G__12051 = chunk__12038_12044;
var G__12052 = count__12039_12045;
var G__12053 = (i__12040_12046 + 1);
seq__12037_12043 = G__12050;
chunk__12038_12044 = G__12051;
count__12039_12045 = G__12052;
i__12040_12046 = G__12053;
continue;
}
} else
{var temp__4092__auto___12054 = cljs.core.seq.call(null,seq__12037_12043);if(temp__4092__auto___12054)
{var seq__12037_12055__$1 = temp__4092__auto___12054;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12037_12055__$1))
{var c__4150__auto___12056 = cljs.core.chunk_first.call(null,seq__12037_12055__$1);{
var G__12057 = cljs.core.chunk_rest.call(null,seq__12037_12055__$1);
var G__12058 = c__4150__auto___12056;
var G__12059 = cljs.core.count.call(null,c__4150__auto___12056);
var G__12060 = 0;
seq__12037_12043 = G__12057;
chunk__12038_12044 = G__12058;
count__12039_12045 = G__12059;
i__12040_12046 = G__12060;
continue;
}
} else
{var vec__12042_12061 = cljs.core.first.call(null,seq__12037_12055__$1);var ev__4336__auto___12062 = cljs.core.nth.call(null,vec__12042_12061,0,null);var func__4337__auto___12063 = cljs.core.nth.call(null,vec__12042_12061,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12062,func__4337__auto___12063);
{
var G__12064 = cljs.core.next.call(null,seq__12037_12055__$1);
var G__12065 = null;
var G__12066 = 0;
var G__12067 = 0;
seq__12037_12043 = G__12064;
chunk__12038_12044 = G__12065;
count__12039_12045 = G__12066;
i__12040_12046 = G__12067;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.objs.sidebar.workspace.__BEH__recent_BANG_ = (function __BEH__recent_BANG_(this$){var seq__12073_12077 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));var chunk__12074_12078 = null;var count__12075_12079 = 0;var i__12076_12080 = 0;while(true){
if((i__12076_12080 < count__12075_12079))
{var r_12081 = cljs.core._nth.call(null,chunk__12074_12078,i__12076_12080);lt.object.destroy_BANG_.call(null,r_12081);
{
var G__12082 = seq__12073_12077;
var G__12083 = chunk__12074_12078;
var G__12084 = count__12075_12079;
var G__12085 = (i__12076_12080 + 1);
seq__12073_12077 = G__12082;
chunk__12074_12078 = G__12083;
count__12075_12079 = G__12084;
i__12076_12080 = G__12085;
continue;
}
} else
{var temp__4092__auto___12086 = cljs.core.seq.call(null,seq__12073_12077);if(temp__4092__auto___12086)
{var seq__12073_12087__$1 = temp__4092__auto___12086;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12073_12087__$1))
{var c__4150__auto___12088 = cljs.core.chunk_first.call(null,seq__12073_12087__$1);{
var G__12089 = cljs.core.chunk_rest.call(null,seq__12073_12087__$1);
var G__12090 = c__4150__auto___12088;
var G__12091 = cljs.core.count.call(null,c__4150__auto___12088);
var G__12092 = 0;
seq__12073_12077 = G__12089;
chunk__12074_12078 = G__12090;
count__12075_12079 = G__12091;
i__12076_12080 = G__12092;
continue;
}
} else
{var r_12093 = cljs.core.first.call(null,seq__12073_12087__$1);lt.object.destroy_BANG_.call(null,r_12093);
{
var G__12094 = cljs.core.next.call(null,seq__12073_12087__$1);
var G__12095 = null;
var G__12096 = 0;
var G__12097 = 0;
seq__12073_12077 = G__12094;
chunk__12074_12078 = G__12095;
count__12075_12079 = G__12096;
i__12076_12080 = G__12097;
continue;
}
}
} else
{}
}
break;
}
return lt.object.merge_BANG_.call(null,this$,cljs.core.PersistentHashMap.fromArrays.call(null,[new cljs.core.Keyword(null,"recents","recents",2096199914)],[cljs.core.map.call(null,(function (p1__12068_SHARP_){return lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent-workspace","lt.objs.sidebar.workspace/recent-workspace",4144769423),p1__12068_SHARP_);
}),lt.objs.workspace.all.call(null))]));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent!","lt.objs.sidebar.workspace/recent!",4521365004),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"recent!","recent!",2096199832),null], null), null));
lt.objs.sidebar.workspace.__BEH__tree_BANG_ = (function __BEH__tree_BANG_(this$){var seq__12102_12106 = cljs.core.seq.call(null,new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));var chunk__12103_12107 = null;var count__12104_12108 = 0;var i__12105_12109 = 0;while(true){
if((i__12105_12109 < count__12104_12108))
{var r_12110 = cljs.core._nth.call(null,chunk__12103_12107,i__12105_12109);lt.object.destroy_BANG_.call(null,r_12110);
{
var G__12111 = seq__12102_12106;
var G__12112 = chunk__12103_12107;
var G__12113 = count__12104_12108;
var G__12114 = (i__12105_12109 + 1);
seq__12102_12106 = G__12111;
chunk__12103_12107 = G__12112;
count__12104_12108 = G__12113;
i__12105_12109 = G__12114;
continue;
}
} else
{var temp__4092__auto___12115 = cljs.core.seq.call(null,seq__12102_12106);if(temp__4092__auto___12115)
{var seq__12102_12116__$1 = temp__4092__auto___12115;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12102_12116__$1))
{var c__4150__auto___12117 = cljs.core.chunk_first.call(null,seq__12102_12116__$1);{
var G__12118 = cljs.core.chunk_rest.call(null,seq__12102_12116__$1);
var G__12119 = c__4150__auto___12117;
var G__12120 = cljs.core.count.call(null,c__4150__auto___12117);
var G__12121 = 0;
seq__12102_12106 = G__12118;
chunk__12103_12107 = G__12119;
count__12104_12108 = G__12120;
i__12105_12109 = G__12121;
continue;
}
} else
{var r_12122 = cljs.core.first.call(null,seq__12102_12116__$1);lt.object.destroy_BANG_.call(null,r_12122);
{
var G__12123 = cljs.core.next.call(null,seq__12102_12116__$1);
var G__12124 = null;
var G__12125 = 0;
var G__12126 = 0;
seq__12102_12106 = G__12123;
chunk__12103_12107 = G__12124;
count__12104_12108 = G__12125;
i__12105_12109 = G__12126;
continue;
}
}
} else
{}
}
break;
}
return lt.object.merge_BANG_.call(null,this$,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"recents","recents",2096199914),null], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","tree!","lt.objs.sidebar.workspace/tree!",3018393903),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__tree_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"tree!","tree!",1124529077),null], null), null));
lt.objs.sidebar.workspace.__BEH__recent__DOT__select_BANG_ = (function __BEH__recent__DOT__select_BANG_(this$){lt.objs.workspace.open.call(null,lt.objs.workspace.current_ws,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.raise.call(null,lt.objs.sidebar.workspace.sidebar_workspace,new cljs.core.Keyword(null,"tree!","tree!",1124529077));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent.select!","lt.objs.sidebar.workspace/recent.select!",2595077856),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent__DOT__select_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"select!","select!",2992004631),null], null), null));
lt.objs.sidebar.workspace.__BEH__recent__DOT__delete_BANG_ = (function __BEH__recent__DOT__delete_BANG_(this$){if(cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"file","file",1017047278).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,lt.objs.workspace.current_ws)),lt.objs.files.basename.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)))))
{lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
} else
{}
lt.objs.files.delete_BANG_.call(null,new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(cljs.core.deref.call(null,this$)));
return lt.object.raise.call(null,lt.objs.sidebar.workspace.sidebar_workspace,new cljs.core.Keyword(null,"recent!","recent!",2096199832));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent.delete!","lt.objs.sidebar.workspace/recent.delete!",959251503),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent__DOT__delete_BANG_,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"delete!","delete!",2564367176),null], null), null));
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent-workspace","lt.objs.sidebar.workspace/recent-workspace",4144769423),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"recent-workspace","recent-workspace",2388792085),null], null), null),new cljs.core.Keyword(null,"init","init",1017141378),(function (this$,r){lt.object.merge_BANG_.call(null,this$,r);
return lt.objs.sidebar.workspace.recents_item.call(null,this$);
}));
lt.objs.sidebar.workspace.ws_class = (function ws_class(ws){return [cljs.core.str("workspace"),cljs.core.str((cljs.core.truth_(new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(ws))?" recents":null))].join('');
});
lt.objs.sidebar.workspace.workspace_ui = (function workspace_ui(this$){var e__4335__auto__ = crate.core.html.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1014003715),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",1108647146),crate.binding.bound.call(null,this$,lt.objs.sidebar.workspace.ws_class)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.wstree","div.wstree",2918560745),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.buttons","ul.buttons",666323612),lt.objs.sidebar.workspace.button.call(null,"folder",lt.objs.sidebar.workspace.open_folder),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li.sep","li.sep",4204306399),"|"], null),lt.objs.sidebar.workspace.button.call(null,"file",lt.objs.sidebar.workspace.open_file),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li.sep","li.sep",4204306399),"|"], null),lt.objs.sidebar.workspace.button.call(null,"recent",(function (){return lt.objs.sidebar.workspace.recent.call(null,this$);
}))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul.root","ul.root",615589195),lt.object.__GT_content.call(null,lt.objs.sidebar.workspace.tree)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.recent","div.recent",2761967050),crate.binding.bound.call(null,this$,(function (sw){return lt.objs.sidebar.workspace.recents.call(null,this$,new cljs.core.Keyword(null,"recents","recents",2096199914).cljs$core$IFn$_invoke$arity$1(sw));
}))], null)], null));var seq__12133_12139 = cljs.core.seq.call(null,cljs.core.partition.call(null,2,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"dragover","dragover",4468024186),(function (e){e.dataTransfer.dropEffect = "move";
lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"dragover","dragover",4468024186),e);
lt.util.dom.prevent.call(null,e);
return false;
}),new cljs.core.Keyword(null,"drop","drop",1016996449),(function (e){lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"drop","drop",1016996449),e);
lt.util.dom.stop_propagation.call(null,e);
return lt.util.dom.prevent.call(null,e);
}),new cljs.core.Keyword(null,"contextmenu","contextmenu",911789824),(function (e){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"menu!","menu!",1117686292),e);
})], null)));var chunk__12134_12140 = null;var count__12135_12141 = 0;var i__12136_12142 = 0;while(true){
if((i__12136_12142 < count__12135_12141))
{var vec__12137_12143 = cljs.core._nth.call(null,chunk__12134_12140,i__12136_12142);var ev__4336__auto___12144 = cljs.core.nth.call(null,vec__12137_12143,0,null);var func__4337__auto___12145 = cljs.core.nth.call(null,vec__12137_12143,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12144,func__4337__auto___12145);
{
var G__12146 = seq__12133_12139;
var G__12147 = chunk__12134_12140;
var G__12148 = count__12135_12141;
var G__12149 = (i__12136_12142 + 1);
seq__12133_12139 = G__12146;
chunk__12134_12140 = G__12147;
count__12135_12141 = G__12148;
i__12136_12142 = G__12149;
continue;
}
} else
{var temp__4092__auto___12150 = cljs.core.seq.call(null,seq__12133_12139);if(temp__4092__auto___12150)
{var seq__12133_12151__$1 = temp__4092__auto___12150;if(cljs.core.chunked_seq_QMARK_.call(null,seq__12133_12151__$1))
{var c__4150__auto___12152 = cljs.core.chunk_first.call(null,seq__12133_12151__$1);{
var G__12153 = cljs.core.chunk_rest.call(null,seq__12133_12151__$1);
var G__12154 = c__4150__auto___12152;
var G__12155 = cljs.core.count.call(null,c__4150__auto___12152);
var G__12156 = 0;
seq__12133_12139 = G__12153;
chunk__12134_12140 = G__12154;
count__12135_12141 = G__12155;
i__12136_12142 = G__12156;
continue;
}
} else
{var vec__12138_12157 = cljs.core.first.call(null,seq__12133_12151__$1);var ev__4336__auto___12158 = cljs.core.nth.call(null,vec__12138_12157,0,null);var func__4337__auto___12159 = cljs.core.nth.call(null,vec__12138_12157,1,null);lt.util.dom.on.call(null,e__4335__auto__,ev__4336__auto___12158,func__4337__auto___12159);
{
var G__12160 = cljs.core.next.call(null,seq__12133_12151__$1);
var G__12161 = null;
var G__12162 = 0;
var G__12163 = 0;
seq__12133_12139 = G__12160;
chunk__12134_12140 = G__12161;
count__12135_12141 = G__12162;
i__12136_12142 = G__12163;
continue;
}
}
} else
{}
}
break;
}
return e__4335__auto__;
});
lt.object.object_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","sidebar.workspace","lt.objs.sidebar.workspace/sidebar.workspace",705450607),new cljs.core.Keyword(null,"tags","tags",1017456523),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sidebar.workspace","sidebar.workspace",3781278709),null], null), null),new cljs.core.Keyword(null,"label","label",1116631654),"workspace",new cljs.core.Keyword(null,"order","order",1119910592),-7,new cljs.core.Keyword(null,"init","init",1017141378),(function (this$){return lt.objs.sidebar.workspace.workspace_ui.call(null,this$);
}));
lt.objs.sidebar.workspace.__BEH__sidebar_menu = (function __BEH__sidebar_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Add folder",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.add-folder","workspace.add-folder",2772643205));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Add file",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.add-file","workspace.add-file",2669358035));
})], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Open recent workspace",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show-recents","workspace.show-recents",1806500563));
})], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1017479852),"separator"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Clear workspace",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,lt.objs.sidebar.workspace.tree,new cljs.core.Keyword(null,"clear!","clear!",3951036134));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","sidebar-menu","lt.objs.sidebar.workspace/sidebar-menu",3021041170),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__sidebar_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__recent_menu = (function __BEH__recent_menu(this$,items){return cljs.core.conj.call(null,items,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"label","label",1116631654),"Delete Workspace",new cljs.core.Keyword(null,"click","click",1108654330),(function (){return lt.object.raise.call(null,this$,new cljs.core.Keyword(null,"delete!","delete!",2564367176));
})], null));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","recent-menu","lt.objs.sidebar.workspace/recent-menu",1238711153),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__recent_menu,new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"menu-items","menu-items",3782623556),null], null), null));
lt.objs.sidebar.workspace.__BEH__workspace__DOT__open_on_start = (function __BEH__workspace__DOT__open_on_start(this$){return lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592));
});
lt.object.behavior_STAR_.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","workspace.open-on-start","lt.objs.sidebar.workspace/workspace.open-on-start",2867305284),new cljs.core.Keyword(null,"reaction","reaction",4441361819),lt.objs.sidebar.workspace.__BEH__workspace__DOT__open_on_start,new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Show workspace on start",new cljs.core.Keyword(null,"triggers","triggers",2516997421),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"init","init",1017141378),null], null), null),new cljs.core.Keyword(null,"type","type",1017479852),new cljs.core.Keyword(null,"user","user",1017503549));
lt.objs.sidebar.workspace.sidebar_workspace = lt.object.create.call(null,new cljs.core.Keyword("lt.objs.sidebar.workspace","sidebar.workspace","lt.objs.sidebar.workspace/sidebar.workspace",705450607));
lt.objs.sidebar.add_item.call(null,lt.objs.sidebar.sidebar,lt.objs.sidebar.workspace.sidebar_workspace);
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.add-folder","workspace.add-folder",2772643205),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: add folder",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.sidebar.workspace.open_folder.call(null);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.add-file","workspace.add-file",2669358035),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: add file",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){return lt.objs.sidebar.workspace.open_file.call(null);
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Toggle workspace tree",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (force_QMARK_){return lt.object.raise.call(null,lt.objs.sidebar.sidebar,new cljs.core.Keyword(null,"toggle","toggle",4440567494),lt.objs.sidebar.workspace.sidebar_workspace,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"transient?","transient?",3584270951),false,new cljs.core.Keyword(null,"force?","force?",4040082982),force_QMARK_], null));
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.rename.cancel!","workspace.rename.cancel!",1179487266),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Cancel rename",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288));if(cljs.core.truth_(temp__4092__auto__))
{var c = temp__4092__auto__;return lt.object.raise.call(null,c,new cljs.core.Keyword(null,"rename.cancel!","rename.cancel!",4050107817));
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.rename.submit!","workspace.rename.submit!",3056447044),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Submit rename",new cljs.core.Keyword(null,"hidden","hidden",4091384092),true,new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){var temp__4092__auto__ = lt.objs.context.__GT_obj.call(null,new cljs.core.Keyword(null,"tree.rename","tree.rename",1095020288));if(cljs.core.truth_(temp__4092__auto__))
{var c = temp__4092__auto__;return lt.object.raise.call(null,c,new cljs.core.Keyword(null,"rename.submit!","rename.submit!",1632100299));
} else
{return null;
}
})], null));
lt.objs.command.command.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"command","command",1964298941),new cljs.core.Keyword(null,"workspace.show-recents","workspace.show-recents",1806500563),new cljs.core.Keyword(null,"desc","desc",1016984067),"Workspace: Open recent workspace",new cljs.core.Keyword(null,"exec","exec",1017031683),(function (){lt.objs.command.exec_BANG_.call(null,new cljs.core.Keyword(null,"workspace.show","workspace.show",1768599592),new cljs.core.Keyword(null,"force","force",1111522909));
return lt.objs.sidebar.workspace.recent.call(null,lt.objs.sidebar.workspace.sidebar_workspace);
})], null));
